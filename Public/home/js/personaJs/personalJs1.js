window.globals = {};
function handleFrames(){try{$.each(Array.prototype.slice.call(window.frames),function(a,c){c.document.body.onclick=function(){c.top.document.body.click()}})}catch(e){}}function validateChange(o){var a=$(o),c=a.parents("form").validate().element(a);c&&a.parent().css("margin-bottom","0")}function img_check(o,action_url,id){var _obj=$(o),obj=$("#"+id),oNext=obj.next(),oPrev=obj.prev();this.AllowExt=".jpg,.gif,.jpeg,.png,.pjpeg",this.FileExt=obj.val().substr(obj.val().lastIndexOf(".")).toLowerCase(),0!=this.AllowExt&&-1==this.AllowExt.indexOf(this.FileExt)?errorTips("请上传jpg、gif、png格式头像，大小不超过2M"):($("#"+id+"_error").text("").hide(),$.ajaxFileUpload({url:action_url,secureuri:!1,fileElementId:id,data:{companyLogo:obj.val(),workId:oMoudle.workId},dataType:"text",success:function(rs){oMoudle.workId="";var data=eval("("+rs+")");if(data.success){var imgSrc=ctx+"/"+data.content;oPrev.removeClass("active").addClass("up"),oNext.css({width:120,height:120}).attr("src",imgSrc),$("#selfDescription").find(".mr_headimg").attr("src",imgSrc)}else errorTips("上传失败，请重新上传","上传头像")},error:function(){errorTips("上传失败，请重新上传","上传头像")}}))}function file_check(obj,action_url,id){if(2==uploadFlag)return!1;uploadFlag=2,$("#loadingImg").css("visibility","visible");var obj=$("#"+id),userId=$("#userid").val();return this.AllowExt=".doc,.docx,.pdf,.ppt,.pptx,.txt,.wps",this.FileExt=obj.val().substr(obj.val().lastIndexOf(".")).toLowerCase(),""==obj.val()?($("#loadingImg").css("visibility","hidden"),!1):void(0!=this.AllowExt&&-1==this.AllowExt.indexOf(this.FileExt)?(errorTips("只支持word、pdf、ppt、txt、wps格式文件，请重新上传"),$("#resumeUpload").val(""),$("#loadingImg").css("visibility","hidden"),uploadFlag=1):$.ajaxFileUpload({type:"POST",url:action_url,secureuri:!1,fileElementId:id,data:{userId:userId},dataType:"text",success:function(jsonStr){uploadFlag=1;var json=eval("("+jsonStr+")");if($("#loadingImg").css("visibility","hidden"),json.success){$.ajax({url:ctx+"/mycenter/resume/setDefaultResume.json",type:"POST",data:{type:"0"}}).done(function(a){a.success?$("#default_resume").val("默认投递：附件简历"):alert(a.msg)}),$(".mr_upload").hide(),$(".mr_uploaded .mr_up_main a").text(json.content.nearbyName).attr("title","下载"+json.content.nearbyName),$(".mr_uploaded .mr_up_main p").text(json.content.time);var isShowDefault=$("#isShowDefault");"0"==isShowDefault.val()?$(".mr_uploaded .mr_set_default").hide():$(".mr_uploaded .mr_set_default").show(),$(".mr_uploaded").show(),$.colorbox({inline:!0,href:$("div#uploadFileSuccess"),title:"上传附件简历"})}else-1==json.code?$.colorbox({inline:!0,href:$("div#fileResumeUpload"),title:"附件简历上传失败"}):-2==json.code?$.colorbox({inline:!0,href:$("div#fileResumeUploadSize"),title:"附件简历上传失败"}):(uploadFlag=1,errorTips("简历上传失败，请重新上传"),$("#loadingImg").css("visibility","hidden"))},error:function(){errorTips("简历上传失败，请重新上传"),$("#loadingImg").css("visibility","hidden"),uploadFlag=1,$(".btn_s").click(function(){window.location.reload()}),$("#colorbox").on("click","#cboxClose",function(){"uploadFile"==$(this).siblings("#cboxLoadedContent").children("div").attr("id")&&window.location.reload()})}}))}function getStrLen(a){for(var i,c,h=0,i=0;i<a.length;i++)c=a.charCodeAt(i),h+=isDbcCase(c)?1:2;return h}function isDbcCase(a){return a>=32&&127>=a?!0:a>=65377&&65439>=a?!0:!1}function popQR(){$.ajax({url:ctx+"/qr/qrcode.jpg",type:"GET"}).done(function(a){a&&a.success&&$(".dropdown_menu img").attr("src",a.content)})}function updateRatioRM(a,c){var h=a/100*250,_=c/100*250;$(".mr_solid").animate({width:h}),$(".mr_dashed").animate({width:_}),$(".mr_top .mr_bfb").text(a+"%")}function updateResumeTime(a){$(".upResumeTime").text(a)}function initTitlePosition(){var a=parseInt($("#customBlock .cust_title").width())/2;$("#customBlock .cust_title").css("margin-left",-parseInt(.65*a))}function switchResumeStatus(a,c,h){$.colorbox.close(),$.ajax({url:ctx+"/mycenter/openMyResume.json",type:"POST",async:!1,data:{openStatus:a},dataType:"json"}).done(function(a){clearTimeout(v);var _=$(".openresume_tip");if(1==a.state){_.hide();var g=$(".succ-fail");1==a.content.data.openStatus?(h.eq(0).attr("checked","checked"),$(c).removeClass("toggle-off"),g.find("p").text("已开启PLUS"),globals.isOpenResume=1,g.show()):(h.eq(1).attr("checked","checked"),$(c).addClass("toggle-off"),g.find("p").text("已关闭PLUS"),globals.isOpenResume=0,g.show());var v=setTimeout(function(){g.stop().hide(),openFlag=!0},3e3)}else{if(405==a.state)return $(".open_resume_notice").show(),!1;alert(a.message)}})}function getCountDays(a,c){var h=[31,28,31,30,31,30,31,31,30,31,30,31];return(a-0)%4==0&&c-0==2?29:h[c-1]}function pushStatistics(){var a=[];$(".tj_exposure").each(function(c,e){if($(e).attr("data-lg-tj-id")){var h=$(e).attr("data-lg-tj-id")||"idnull",_=$(e).attr("data-lg-tj-no")||"idnull",g=$(e).attr("data-lg-tj-cid")||"idnull";a.push(getTjId(h,_,g)),$(e).removeClass("tj_exposure")}}),a.length>0&&exposureStatistics(a)}function exposureStatistics(a){var c=new Image,h={lt:"trackshow",a:a.join(","),t:"ad",v:1,dl:window.location.href,dr:window.location.protocol+"//"+window.location.hostname,time:(new Date).getTime()};paramsArr=[];for(var _ in h)paramsArr.push(_+"="+h[_]);c.src=analyseUri.jsonURL+"?"+paramsArr.join("&")}function getTjId(a,c,h){return[$.trim(a),$.trim(c),0,$.trim(h),Math.round(1e4*Math.random())].join("_")}!function(a){function f(){function i(l){"remove"===l&&this.each(function(n,o){var m=_(o);m&&m.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(n,o){var m=tinyMCE.get(o.id.replace(/_parent$/,""));m&&m.remove()})}function h(n){var l,m=this;if(n!==c)i.call(m),m.each(function(p,q){var o;(o=tinyMCE.get(q.id))&&o.setContent(n)});else if(m.length>0&&(l=tinyMCE.get(m[0].id)))return l.getContent()}function _(m){var l=null;return m&&m.id&&d.tinymce&&(l=tinyMCE.get(m.id)),l}function g(l){return!!(l&&l.length&&d.tinymce&&l.is(":tinymce"))}var v={};a.each(["text","html","val"],function(n,l){var o=v[l]=a.fn[l],m="text"===l;a.fn[l]=function(s){var p=this;if(!g(p))return o.apply(p,arguments);if(s!==c)return h.call(p.filter(":tinymce"),s),o.apply(p.not(":tinymce"),arguments),p;var r="",q=arguments;return(m?p:p.eq(0)).each(function(u,c){var t=_(c);r+=t?m?t.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):t.getContent({save:!0}):o.apply(a(c),q)}),r}}),a.each(["append","prepend"],function(n,m){var o=v[m]=a.fn[m],l="prepend"===m;a.fn[m]=function(q){var p=this;return g(p)?q!==c?(p.filter(":tinymce").each(function(s,t){var r=_(t);r&&r.setContent(l?q+r.getContent():r.getContent()+q)}),o.apply(p.not(":tinymce"),arguments),p):void 0:o.apply(p,arguments)}}),a.each(["remove","replaceWith","replaceAll","empty"],function(m,l){var n=v[l]=a.fn[l];a.fn[l]=function(){return i.call(this,l),n.apply(this,arguments)}}),v.attr=a.fn.attr,a.fn.attr=function(o,q){var m=this,n=arguments;if(!o||"value"!==o||!g(m))return q!==c?v.attr.apply(m,n):v.attr.apply(m,n);if(q!==c)return h.call(m.filter(":tinymce"),q),v.attr.apply(m.not(":tinymce"),n),m;var p=m[0],l=_(p);return l?l.getContent({save:!0}):v.attr.apply(a(p),n)}}var c,e,h=[],d=window;a.fn.tinymce=function(c){function o(){var r=[],q=0;f&&(f(),f=null),p.each(function(t,u){var s,a=u.id,h=c.oninit;a||(u.id=a=tinymce.DOM.uniqueId()),s=new tinymce.Editor(a,c),r.push(s),s.onInit.add(function(){var x,a=h;p.css("visibility",""),h&&++q==r.length&&(tinymce.is(a,"string")&&(x=-1===a.indexOf(".")?null:tinymce.resolve(a.replace(/\.\w+$/,"")),a=tinymce.resolve(a)),a.apply(x||tinymce,r))})}),a.each(r,function(t,s){s.render()})}var _,g,m,i,p=this,l="",n="";return p.length?c?(p.css("visibility","hidden"),d.tinymce||e||!(_=c.script_url)?1===e?h.push(o):o():(e=1,g=_.substring(0,_.lastIndexOf("/")),/_(src|dev)\.js/g.test(_)&&(n="_src"),m=_.lastIndexOf("?"),-1!=m&&(l=_.substring(m+1)),d.tinyMCEPreInit=d.tinyMCEPreInit||{base:g,suffix:n,query:l},-1!=_.indexOf("gzip")&&(i=c.language||"en",_=_+(/\?/.test(_)?"&":"?")+"js=true&core=true&suffix="+escape(n)+"&themes="+escape(c.theme)+"&plugins="+escape(c.plugins)+"&languages="+i,d.tinyMCE_GZ||(tinyMCE_GZ={start:function(){function q(r){tinymce.ScriptLoader.markDone(tinyMCE.baseURI.toAbsolute(r))}tinymce.suffix=n,q("langs/"+i+".js"),q("themes/"+c.theme+"/editor_template"+n+".js"),q("themes/"+c.theme+"/langs/"+i+".js"),a.each(c.plugins.split(","),function(s,r){r&&(q("plugins/"+r+"/editor_plugin"+n+".js"),q("plugins/"+r+"/langs/"+i+".js"))})},end:function(){}})),a.ajax({type:"GET",url:_,dataType:"script",cache:!0,success:function(){tinymce.dom.Event.domLoaded=1,e=2,c.script_loaded&&c.script_loaded(),o(),a.each(h,function(q,r){r()})}})),p):tinyMCE.get(p[0].id):p},a.extend(a.expr[":"],{tinymce:function(a){return!!(a.id&&"tinyMCE"in window&&tinyMCE.get(a.id))}})}(jQuery),window.myresumeCommon=window.myresumeCommon||{requestTargets:{workShowSave:"/workShow/save.json",workShowDel:"/workShow/delws.json",skillSave:"/skillEvaluate/save.json",skillDel:"/skillEvaluate/delSkill.json",skillDelAll:"/skillEvaluate/delAllSkill.json",workUpload:"/workShow/uploadWorkPic.json",workCut:"/workShow/cutWorkPic.json",projectExpSave:"/projectExperience/save.json",projectExpDel:"/projectExperience/delProject.json",expectJobSave:"/expectJobs/expectJobs.json",myRemark:"/resume/intro.json",uploadLogo:"/workExperience/uploadLogo.json",photoUpload:"/resume/uploadPhoto.json",upCreateCompanyLogo:"/c/uploadPic.json",createCompanyCut:"/c/cutPic.json"},templates:{workShowOnline:['<div class="mr_wo_show" data-type="#{type}" data-id="#{id}">',"<div>",'<div class="mr_edit mr_c_r_t">','<i></i><em class="mr_edit_text" data-type="#{type}">编辑</em>',"</div>","</div>",'<div class="mr_self_site">','<a class="mr_self_sitelink" href="#{ahref}" target="_blank">',"#{href}","</a>","</div>",'<div class="mr_wo_preview">',"#{desc}","</div>","</div>",'<form class="add_worksshow_form addWorksShowOnlineFormUpdate dn">','<div class="mr_add_work mr_addwork_online">','<div class="mr_worksshow_tab">','<span class="mr_wst_upimage disabled">上传图片</span>','<span class="mr_wst_uponline selected">在线作品</span>',"</div>",'<div class="mr_wo_show">','<div class="mr_self_site">','<a class="mr_self_sitelink" href="#{ahref}" target="_blank">',"#{href}","</a>","</div>",'<div class="mr_wo_preview">',"#{desc}","</div>","</div>","<label>作品地址</label>",'<div class="mr_input_div mr_click_flag">','<input class="mr_btn workOnlineUrlUpdate" name="url" value="#{href}"/>',"</div>","<label>作品描述</label>",'<div id="workOnlineDescUpdate" class="wrap_editor">','<script id="ueditor_#{id}" type="text/plain" class="ueditor_updateonlineImage"></script>',"</div>",'<div class="mr_ope clearfixs">','<div class="mr_delete">','<div class="mr_delete_pop dn">',"<p>确定删除本条信息？</p>","<div>",'<span class="mr_del_ok">删除</span>','<span class="mr_del_cancel">取消</span>  ',"</div>","</div>","<span>删除本条</span>","</div>",'<input type="submit" class="mr_save" value="保存">','<a href="javascript:;" class="mr_cancel">取消</a>',"</div>","</div>","</form>"].join(""),workShowUpload:['<div class="mr_wu_show" data-type="#{type}" data-id="#{id}">','<div class="mr_wu_t">','<a href="'+ctx+'/#{imageUrl}" target="_blank">','<img class="wh43" src="'+ctx+'/#{imgsrc}" alt="#{title}" data-origin-src="#{imageUrl}">',"</a>","</div>",'<div class="mr_wu_con">','<div class="clearfixs">','<div class="mr_content_l #{hasTitle}">','<div class="l2 maxWidth">','<span class="mr_work_title">[ #{title} ]</span>',"</div>","</div>",'<div class="mr_content_r">','<div class="mr_edit mr_c_r_t">','<i></i><em class="mr_edit_text" data-type="#{type}">编辑</em>',"</div>","</div>","</div> ",'<div class="mr_wu_con_m">',"#{desc}","</div> ","</div>","</div>",'<form class="add_worksshow_form dn addWorksShowUploadFormUpdate">','<div class="mr_add_work mr_addwork_online">','<div class="mr_worksshow_tab">','<span class="mr_wst_upimage selected">上传图片</span>','<span class="mr_wst_uponline disabled">在线作品</span>',"</div>",'<div class="mr_worksshow_upimage">',"<div>","<i></i>","<span>上传作品图片</span>","</div>",'<input type="file" class="worksshow_up" id="worksshowUpUpdate_#{id}" name="workPic" title="目前仅支持10MB以内的PNG/JPG/JPEG/GIF图片" onchange="myresumeCommon.utils.imageUpload( this, myresumeCommon.requestTargets.workUpload, worksShowOperator.addUploadSucc, worksShowOperator.addUploadFail );" />','<img class="worksshowUpUpdateShow worksshow_img" src="" alt=""/>',"</div>","<label>作品标题</label>",'<div class="mr_input_div mr_click_flag">','<input class="mr_btn workUploadTitleUpdate" name="workTitle" value="#{title}"/>',"</div>","<label>作品描述</label>",'<div id="workImagesDescUpdate" class="mr_click_flag wrap_editor">','<script id="ueditor_#{id}" type="text/plain" class="ueditor_updateupdateImage"></script>',"</div>",'<div class="mr_ope clearfixs">','<div class="mr_delete">','<div class="mr_delete_pop dn">',"<p>确定删除本条信息？</p>","<div>",'<span class="mr_del_ok">删除</span>','<span class="mr_del_cancel">取消</span>  ',"</div>","</div>","<span>删除本条</span>","</div>",'<input type="submit" class="mr_save" value="保存">','<a href="javascript:;" class="mr_cancel">取消</a>',"</div> ","</div>","</form>"].join(""),skillItem:['<div class="mr_skill_con" data-grade="#{skillPercent}" data-skill-id="#{id}">','<span class="mr_skill_name" title="#{skillName}">#{skillName}</span>','<span class="mr_skill_plan">',"<em></em>","</span>",'<span class="mr_skill_delete"></span>','<span class="mr_skill_level">#{masterLevel}</span>','<i class="mr_skill_circle"><em>#{masterLevel}</em></i>',"</div>"].join("")},config:{userPhotoSelector:{width:250,height:250},companyLogoSelector:{width:250,height:250},perImagSelector:{width:120,height:120},productImgSelector:{width:300,height:180},workShowSelector:{width:280,height:210},cutLogoImage:{width:360,height:360,bgColor:"#ccc",enableRotation:!1,enableZoom:!0,selector:{w:170,h:170,showPositionsOnDrag:!1,showDimetionsOnDrag:!1,centered:!0,bgInfoLayer:"#fff",borderColor:"#02d1a1",animated:!1,maxWidth:358,maxHeight:358,borderColorHover:"#02d1a1"},image:{source:"",width:0,height:0,minZoom:10,maxZoom:300}},cutImage:{width:360,height:360,bgColor:"#ccc",enableRotation:!1,enableZoom:!0,selector:{w:250,h:250,showPositionsOnDrag:!1,showDimetionsOnDrag:!1,centered:!0,bgInfoLayer:"#fff",borderColor:"#02d1a1",animated:!1,maxWidth:358,maxHeight:358,borderColorHover:"#02d1a1"},image:{source:"",width:0,height:0,minZoom:10,maxZoom:300}},cutPerImage:{width:360,height:360,bgColor:"#ccc",enableRotation:!1,enableZoom:!0,selector:{w:120,h:120,showPositionsOnDrag:!1,showDimetionsOnDrag:!1,centered:!0,bgInfoLayer:"#fff",borderColor:"#02d1a1",animated:!1,maxWidth:358,maxHeight:358,borderColorHover:"#02d1a1"},image:{source:"",width:0,height:0,minZoom:10,maxZoom:300}},cutProductImage:{width:360,height:360,bgColor:"#ccc",enableRotation:!1,enableZoom:!0,selector:{w:300,h:180,showPositionsOnDrag:!1,showDimetionsOnDrag:!1,centered:!0,bgInfoLayer:"#fff",borderColor:"#02d1a1",animated:!1,maxWidth:358,maxHeight:358,borderColorHover:"#02d1a1"},image:{source:"",width:0,height:0,minZoom:10,maxZoom:300}},tinymce:{script_url:ctx+"/js/tinymce/jscripts/tiny_mce/tiny_mce.js",theme:"advanced",language:"zh-cn",plugins:"paste,autolink,lists,style,layer,save,advhr,advimage,advlink,iespell,inlinepopups,preview,media,searchreplace,contextmenu,fullscreen,noneditable,visualchars,nonbreaking",theme_advanced_buttons1:"bullist,numlist",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"none",theme_advanced_resizing:!1,paste_auto_cleanup_on_paste:!0,paste_as_text:!0,auto_cleanup_word:!0,paste_remove_styles:!0,contextmenu:"copy cut paste",force_br_newlines:!0,force_p_newlines:!1,apply_source_formatting:!1,remove_linebreaks:!1,convert_newlines_to_brs:!0,content_css:ctx+"/js/tinymce/examples/css/content.css",template_external_list_url:"lists/template_list.js",external_link_list_url:"lists/link_list.js",template_replace_values:{username:"Some User",staffid:"991234"},onchange_callback:function(a){tinyMCE.triggerSave();var c=tinyMCE.get(a.id).getContent();c.length>20&&$("#"+a.id).valid()}}},utils:{imageUpload:function(a,c,h,_){a=$(a);var g=a.attr("id"),v=a.attr("title"),b="text",w={};this.AllowExt=".jpg,.gif,.jpeg,.png,.pjpeg",this.FileExt=a.val().substr(a.val().lastIndexOf(".")).toLowerCase(),0!=this.AllowExt&&-1==this.AllowExt.indexOf(this.FileExt)?(errorTips(v),$("input[type = 'file']").val("")):$.ajaxFileUpload({url:c,secureuri:!1,fileElementId:g,data:w,dataType:b,success:function(a){"text"==b&&(a=$.parseJSON(a)),a.success?h&&h(a.content,g):(_&&_(1),errorTips(v,"错误提示"))},error:function(a){_&&_(a),errorTips("支持jpg、jpeg、gif、png格式，文件小于10M","错误提示")}})},unset:function(a){$.each(a,function(c){a[c]=null})},strFormat:function(a,c){a=String(a);var h=Array.prototype.slice.call(arguments,1),_=Object.prototype.toString;return h.length?(h=1==h.length&&null!==c&&/\[object Array\]|\[object Object\]/.test(_.call(c))?c:h,a.replace(/#\{(.+?)\}/g,function(a,c){var g=h[c];return"[object Function]"==_.call(g)&&(g=g(c)),"undefined"==typeof g?"":g})):a},requester:function(a,c){a.dataType=a.dataType||"json",a.type=a.type||"POST",a.data=a.data||{},a.data.resubmitToken=globals.token,$.ajax(a).done(function(a){null!=a.resubmitToken&&""!=a.resubmitToken&&(globals.token=a.resubmitToken),c&&c(a)})},addHttpPrefix:function(a,c,h){a=a.split("|");for(var _=a[0],i=0,g=a.length;g>i;i++)if(a[i]===c.substring(0,a[i].length))return;h(_+c)},errorTips:function(a,c,h){h=h||2e3,1!=a.data("errortipspending")&&(a.text(c),a.show(),a.data("errortipspending",1),window.setTimeout(function(){a.hide(),a.data("errortipspending",0)},h))},throttle:function(a,c,h,_){h=void 0==h?null:h,a.tId&&clearTimeout(a.tId),a.tId=setTimeout(function(){a.apply(h,c)},_?_:140)},inputerListener:function(a,c){var h=0;if("onpropertychange"in a[0]&&$.browser.ie&&parseInt($.browser.version<=8))a.bind("propertychange",function(e){"value"==e.originalEvent.propertyName&&myresumeCommon.utils.throttle(c,[a.val()],h)});else if($.browser.ie&&9==$.browser.version){var _,g=a.val();a.bind("focus",function(){_=window.setInterval(function(){var _=a.val();_!=g&&(g=_,myresumeCommon.utils.throttle(c,[g],h))},50)}),a.bind("blur",function(){window.clearInterval(_),_=void 0})}else a.bind("input",function(){myresumeCommon.utils.throttle(c,[a.val()],h)})}}};var cookieName="paiRecTip",btnClose=$("#pai_top_tip").find(".tip_close");btnClose.on("click",function(){$("#pai_top_tip").hide(),$.cookie(cookieName,"0",{expires:365})}),this.JSON||(this.JSON={}),function(){function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var c=meta[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,c){var h,d,e,f,_,g=gap,i=c[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(c,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,_=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,h=0;f>h;h+=1)_[h]=str(h,i)||"null";return e=0===_.length?"[]":gap?"[\n"+gap+_.join(",\n"+gap)+"\n"+g+"]":"["+_.join(",")+"]",gap=g,e}if(rep&&"object"==typeof rep)for(f=rep.length,h=0;f>h;h+=1)d=rep[h],"string"==typeof d&&(e=str(d,i),e&&_.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&_.push(quote(d)+(gap?": ":":")+e));return e=0===_.length?"{}":gap?"{\n"+gap+_.join(",\n"+gap)+"\n"+g+"}":"{"+_.join(",")+"}",gap=g,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b"," ":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,c,h){var d;if(gap="",indent="","number"==typeof h)for(d=0;h>d;d+=1)indent+=" ";else"string"==typeof h&&(indent=h);if(rep=c,c&&"function"!=typeof c&&("object"!=typeof c||"number"!=typeof c.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,c){var h,d,e=a[c];if(e&&"object"==typeof e)for(h in e)Object.hasOwnProperty.call(e,h)&&(d=walk(e,h),void 0!==d?e[h]=d:delete e[h]);return reviver.call(a,c,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),!function(a,c,h){function _(h){v[h]||(v[h]=!0,a.migrateWarnings.push(h),c.console&&console.warn&&!a.migrateMute&&(console.warn("JQMIGRATE: "+h),a.migrateTrace&&console.trace&&console.trace()))}function g(c,h,g,v){if(Object.defineProperty)try{return void Object.defineProperty(c,h,{configurable:!0,enumerable:!0,get:function(){return _(v),g},set:function(a){_(v),g=a}})}catch(b){}a._definePropertyBroken=!0,c[h]=g}var v={};a.migrateWarnings=[],!a.migrateMute&&c.console&&console.log&&console.log("JQMIGRATE: Logging is active"),a.migrateTrace===h&&(a.migrateTrace=!0),a.migrateReset=function(){v={},a.migrateWarnings.length=0},"BackCompat"===document.compatMode&&_("jQuery is not compatible with Quirks Mode");var b=a("<input/>",{size:1}).attr("size")&&a.attrFn,$=a.attr,w=a.attrHooks.value&&a.attrHooks.value.get||function(){return null},y=a.attrHooks.value&&a.attrHooks.value.set||function(){return h},k=/^(?:input|button)$/i,C=/^[238]$/,S=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,j=/^(?:checked|selected)$/i;g(a,"attrFn",b||{},"jQuery.attrFn is deprecated"),a.attr=function(c,g,v,w){var y=g.toLowerCase(),T=c&&c.nodeType;return w&&($.length<4&&_("jQuery.fn.attr( props, pass ) is deprecated"),c&&!C.test(T)&&(b?g in b:a.isFunction(a.fn[g])))?a(c)[g](v):("type"===g&&v!==h&&k.test(c.nodeName)&&c.parentNode&&_("Can't change the 'type' of an input or button in IE 6/7/8"),!a.attrHooks[y]&&S.test(y)&&(a.attrHooks[y]={get:function(c,_){var g,v=a.prop(c,_);return v===!0||"boolean"!=typeof v&&(g=c.getAttributeNode(_))&&g.nodeValue!==!1?_.toLowerCase():h},set:function(c,h,_){var g;return h===!1?a.removeAttr(c,_):(g=a.propFix[_]||_,g in c&&(c[g]=!0),c.setAttribute(_,_.toLowerCase())),_}},j.test(y)&&_("jQuery.fn.attr('"+y+"') may use property instead of attribute")),$.call(a,c,g,v))},a.attrHooks.value={get:function(a,c){var h=(a.nodeName||"").toLowerCase();return"button"===h?w.apply(this,arguments):("input"!==h&&"option"!==h&&_("jQuery.fn.attr('value') no longer gets properties"),c in a?a.value:null)},set:function(a,c){var h=(a.nodeName||"").toLowerCase();return"button"===h?y.apply(this,arguments):("input"!==h&&"option"!==h&&_("jQuery.fn.attr('value', val) no longer sets properties"),void(a.value=c))}};var T,P,E=a.fn.init,z=a.parseJSON,I=/^(?:[^<]*(<[\w\W]+>)[^>]*|#([\w\-]*))$/;a.fn.init=function(c,h,g){var v;return c&&"string"==typeof c&&!a.isPlainObject(h)&&(v=I.exec(c))&&v[1]&&("<"!==c.charAt(0)&&_("$(html) HTML strings must start with '<' character"),h&&h.context&&(h=h.context),a.parseHTML)?E.call(this,a.parseHTML(a.trim(c),h,!0),h,g):E.apply(this,arguments)},a.fn.init.prototype=a.fn,a.parseJSON=function(a){return a||null===a?z.apply(this,arguments):(_("jQuery.parseJSON requires a valid JSON string"),null)},a.uaMatch=function(a){a=a.toLowerCase();var c=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:c[1]||"",version:c[2]||"0"}},a.browser||(T=a.uaMatch(navigator.userAgent),P={},T.browser&&(P[T.browser]=!0,P.version=T.version),P.chrome?P.webkit=!0:P.webkit&&(P.safari=!0),a.browser=P),g(a,"browser",a.browser,"jQuery.browser is deprecated"),a.sub=function(){function c(a,h){return new c.fn.init(a,h)}a.extend(!0,c,this),c.superclass=this,c.fn=c.prototype=this(),c.fn.constructor=c,c.sub=this.sub,c.fn.init=function(_,g){return g&&g instanceof a&&!(g instanceof c)&&(g=c(g)),a.fn.init.call(this,_,g,h)},c.fn.init.prototype=c.fn;var h=c(document);return _("jQuery.sub() is deprecated"),c},a.ajaxSetup({converters:{"text json":a.parseJSON}});var N=a.fn.data;a.fn.data=function(c){var g,v,b=this[0];return!b||"events"!==c||1!==arguments.length||(g=a.data(b,c),v=a._data(b,c),g!==h&&g!==v||v===h)?N.apply(this,arguments):(_("Use of jQuery.fn.data('events') is deprecated"),v)};var F=/\/(java|ecma)script/i,M=a.fn.andSelf||a.fn.addBack;a.fn.andSelf=function(){return _("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),M.apply(this,arguments)},a.clean||(a.clean=function(c,h,g,v){h=h||document,h=!h.nodeType&&h[0]||h,h=h.ownerDocument||h,_("jQuery.clean() is deprecated");var i,b,$,w,y=[];if(a.merge(y,a.buildFragment(c,h).childNodes),g)for($=function(a){return!a.type||F.test(a.type)?v?v.push(a.parentNode?a.parentNode.removeChild(a):a):g.appendChild(a):void 0},i=0;null!=(b=y[i]);i++)a.nodeName(b,"script")&&$(b)||(g.appendChild(b),"undefined"!=typeof b.getElementsByTagName&&(w=a.grep(a.merge([],b.getElementsByTagName("script")),$),y.splice.apply(y,[i+1,0].concat(w)),i+=w.length));return y});var R=a.event.add,O=a.event.remove,D=a.event.trigger,A=a.fn.toggle,H=a.fn.live,L=a.fn.die,U="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",W=new RegExp("\\b(?:"+U+")\\b"),J=/(?:^|\s)hover(\.\S+|)\b/,B=function(c){return"string"!=typeof c||a.event.special.hover?c:(J.test(c)&&_("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),c&&c.replace(J,"mouseenter$1 mouseleave$1"))};a.event.props&&"attrChange"!==a.event.props[0]&&a.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),a.event.dispatch&&g(a.event,"handle",a.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),a.event.add=function(a,c,h,g,v){a!==document&&W.test(c)&&_("AJAX events should be attached to document: "+c),R.call(this,a,B(c||""),h,g,v)},a.event.remove=function(a,c,h,_,g){O.call(this,a,B(c)||"",h,_,g)},a.fn.error=function(){var a=Array.prototype.slice.call(arguments,0);return _("jQuery.fn.error() is deprecated"),a.splice(0,0,"error"),arguments.length?this.bind.apply(this,a):(this.triggerHandler.apply(this,a),this)},a.fn.toggle=function(c,h){if(!a.isFunction(c)||!a.isFunction(h))return A.apply(this,arguments);_("jQuery.fn.toggle(handler, handler...) is deprecated");var g=arguments,v=c.guid||a.guid++,i=0,b=function(h){var _=(a._data(this,"lastToggle"+c.guid)||0)%i;return a._data(this,"lastToggle"+c.guid,_+1),h.preventDefault(),g[_].apply(this,arguments)||!1};for(b.guid=v;i<g.length;)g[i++].guid=v;return this.click(b)},a.fn.live=function(c,h,g){return _("jQuery.fn.live() is deprecated"),H?H.apply(this,arguments):(a(this.context).on(c,this.selector,h,g),this)},a.fn.die=function(c,h){return _("jQuery.fn.die() is deprecated"),L?L.apply(this,arguments):(a(this.context).off(c,this.selector||"**",h),this)},a.event.trigger=function(a,c,h,g){return h||W.test(a)||_("Global events are undocumented and deprecated"),D.call(this,a,c,h||document,g)},a.each(U.split("|"),function(c,h){a.event.special[h]={setup:function(){var c=this;return c!==document&&(a.event.add(document,h+"."+a.guid,function(){a.event.trigger(h,null,c,!0)}),a._data(this,h,a.guid++)),!1},teardown:function(){return this!==document&&a.event.remove(document,h+"."+a._data(this,h)),!1}}})}(jQuery,window),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(t,s){var n,a,o,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,a=n.name,t.href&&a&&"map"===n.nodeName.toLowerCase()?(o=e("img[usemap='#"+a+"']")[0],!!o&&i(o)):!1):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||s:s)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),s="absolute"===i,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&a.length?a:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var s=e.attr(i,"tabindex"),n=isNaN(s);return(n||s>=0)&&t(i,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(a,s(this,t)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(a,s(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,s,n=e(this[0]);n.length&&n[0]!==document;){if(i=n.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0}}),e.ui.plugin={add:function(t,i,s){var n,a=e.ui[t].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(e,t,i,s){var n,a=e.plugins[t];if(a&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;a.length>n;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i)}};var s=0,n=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,n,a;
for(a=0;null!=(n=i[a]);a++)try{s=e._data(n,"events"),s&&s.remove&&e(n).triggerHandler("remove")}catch(o){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var n,a,o,r,c={},l=t.split(".")[0];return t=t.split(".")[1],n=l+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[l]=e[l]||{},a=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?void(c[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=a,t}}()):void(c[t]=s)}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||t:t},c,{constructor:o,namespace:l,widgetName:t,widgetFullName:n}),a?(e.each(a._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,s,a=n.call(arguments,1),o=0,r=a.length;r>o;o++)for(i in a[o])s=a[o][i],a[o].hasOwnProperty(i)&&void 0!==s&&(t[i]=e.isPlainObject(s)?e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):s);return t},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(a){var o="string"==typeof a,r=n.call(arguments,1),c=this;return a=!o&&r.length?e.widget.extend.apply(null,[a].concat(r)):a,this.each(o?function(){var i,n=e.data(this,s);return"instance"===a?(c=n,!1):n?e.isFunction(n[a])&&"_"!==a.charAt(0)?(i=n[a].apply(n,r),i!==n&&void 0!==i?(c=i&&i.jquery?c.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+a+"'")}:function(){var t=e.data(this,s);t?(t.option(a||{}),t._init&&t._init()):e.data(this,s,new i(a,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=s++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,n,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},s=t.split("."),t=s.shift(),s.length){for(n=o[t]=e.widget.extend({},this.options[t]),a=0;s.length-1>a;a++)n[s[a]]=n[s[a]]||{},n=n[s[a]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var n,a=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,o){function r(){return t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var c=s.match(/^([\w:-]*)\s*(.*)$/),l=c[1]+a.eventNamespace,u=c[2];u?n.delegate(u,l,r):i.bind(l,r)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}}),e.widget;var a=!1;e(document).mouseup(function(){a=!1}),e.widget("ui.mouse",{version:"1.11.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!a){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1===t.which,n="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),a=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):t.which?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),a=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.widget("ui.draggable",e.ui.mouse,{version:"1.11.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var i=this.document[0],s=this.options;try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur()}catch(n){}return this.helper||s.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(s.iframeFix===!0?"iframe":s.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",t,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options,a=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===n.containment?void(this.containment=[0,0,e(a).width()-this.helperProportions.width-this.margins.left,(e(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):n.containment.constructor===Array?void(this.containment=n.containment):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=e(n.containment),s=i[0],void(s&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,s,n,a,o=this.options,r=this._isRootNode(this.scrollParent[0]),c=e.pageX,l=e.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(c=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(c=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((c-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,c=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a),"y"===o.axis&&(c=this.originalPageX),"x"===o.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:c-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s,this],!0),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,s){var n=s.options,a=e.extend({},i,{item:s.element});s.sortables=[],e(n.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,a))})},stop:function(t,i,s){var n=e.extend({},i,{item:s.element});e.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,n))})},drag:function(t,i,s){var n=this;e.each(s.sortables,function(){var a=!1,o=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,e.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",t),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",t),s.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,s){var n=e("body"),a=s.options;n.css("cursor")&&(a._cursor=n.css("cursor")),n.css("cursor",a.cursor)},stop:function(t,i,s){var n=s.options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("opacity")&&(a._opacity=n.css("opacity")),n.css("opacity",a.opacity)},stop:function(t,i,s){var n=s.options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,s){var n=s.options,a=!1,o=s.scrollParentNotHidden[0],r=s.document[0];o!==r&&"HTML"!==o.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+o.offsetHeight-t.pageY<n.scrollSensitivity?o.scrollTop=a=o.scrollTop+n.scrollSpeed:t.pageY-s.overflowOffset.top<n.scrollSensitivity&&(o.scrollTop=a=o.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+o.offsetWidth-t.pageX<n.scrollSensitivity?o.scrollLeft=a=o.scrollLeft+n.scrollSpeed:t.pageX-s.overflowOffset.left<n.scrollSensitivity&&(o.scrollLeft=a=o.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(r).scrollTop()<n.scrollSensitivity?a=e(r).scrollTop(e(r).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(r).scrollTop())<n.scrollSensitivity&&(a=e(r).scrollTop(e(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(r).scrollLeft()<n.scrollSensitivity?a=e(r).scrollLeft(e(r).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(r).scrollLeft())<n.scrollSensitivity&&(a=e(r).scrollLeft(e(r).scrollLeft()+n.scrollSpeed)))),a!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(s,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,s){var n=s.options;s.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var t=e(this),i=t.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,s){var n,a,o,r,c,l,u,d,h,p,f=s.options,m=f.snapTolerance,_=i.offset.left,g=_+s.helperProportions.width,v=i.offset.top,b=v+s.helperProportions.height;for(h=s.snapElements.length-1;h>=0;h--)c=s.snapElements[h].left,l=c+s.snapElements[h].width,u=s.snapElements[h].top,d=u+s.snapElements[h].height,c-m>g||_>l+m||u-m>b||v>d+m||!e.contains(s.snapElements[h].item.ownerDocument,s.snapElements[h].item)?(s.snapElements[h].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[h].item})),s.snapElements[h].snapping=!1):("inner"!==f.snapMode&&(n=m>=Math.abs(u-b),a=m>=Math.abs(d-v),o=m>=Math.abs(c-g),r=m>=Math.abs(l-_),n&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top-s.margins.top),a&&(i.position.top=s._convertPositionTo("relative",{top:d,left:0}).top-s.margins.top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:c-s.helperProportions.width}).left-s.margins.left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left-s.margins.left)),p=n||a||o||r,"outer"!==f.snapMode&&(n=m>=Math.abs(u-v),a=m>=Math.abs(d-b),o=m>=Math.abs(c-_),r=m>=Math.abs(l-g),n&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top-s.margins.top),a&&(i.position.top=s._convertPositionTo("relative",{top:d-s.helperProportions.height,left:0}).top-s.margins.top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:c}).left-s.margins.left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left-s.margins.left)),!s.snapElements[h].snapping&&(n||a||o||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[h].item})),s.snapElements[h].snapping=n||a||o||r||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,s){var n,a=s.options,o=e.makeArray(e(a.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});o.length&&(n=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",n+t)}),this.css("zIndex",n+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("zIndex")&&(a._zIndex=n.css("zIndex")),n.css("zIndex",a.zIndex)},stop:function(t,i,s){var n=s.options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}}),e.ui.draggable,e.widget("ui.resizable",e.ui.mouse,{version:"1.11.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return t[s]>0?!0:(t[s]=1,n=t[s]>0,t[s]=0,n)},_create:function(){var t,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)s=e.trim(t[i]),a="ui-resizable-"+s,n=e("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(t){var i,s,n,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=this.element.children(this.handles[i]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(n,a),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,n=!1;for(i in this.handles)s=e(this.handles[i])[0],(s===t.target||e.contains(s,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var i,s,n,a=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),a.containment&&(i+=e(a.containment).scrollLeft()||0,s+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===n?this.axis+"-resize":n),o.addClass("ui-resizable-resizing"),this._propagate("start",t),!0
},_mouseDrag:function(t){var i,s,n=this.originalMousePosition,a=this.axis,o=t.pageX-n.left||0,r=t.pageY-n.top||0,c=this._change[a];return this._updatePrevProperties(),c?(i=c.apply(this,[t,o,r]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,s,n,a,o,r,c,l=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,a=s?0:u.sizeDiff.width,o={width:u.helper.width()-a,height:u.helper.height()-n},r=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,c=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(e.extend(o,{top:c,left:r})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,s,n,a,o=this.options;a={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,s=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,n=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),s>a.minHeight&&(a.minHeight=s),a.maxWidth>i&&(a.maxWidth=i),a.maxHeight>n&&(a.maxHeight=n)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,s=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,n=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,r=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,l=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return a&&(e.width=t.minWidth),o&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),n&&(e.height=t.maxHeight),a&&l&&(e.left=r-t.minWidth),s&&l&&(e.left=r-t.maxWidth),o&&u&&(e.top=c-t.minHeight),n&&u&&(e.top=c-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],s=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],n=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)i[t]=parseInt(s[t],10)||0,i[t]+=parseInt(n[t],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,c={width:i.size.width-r,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(c,u&&l?{top:u,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,s,n,a,o,r,c=e(this).resizable("instance"),l=c.options,u=c.element,d=l.containment,h=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;h&&(c.containerElement=e(h),/document/.test(d)||d===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){i[e]=c._num(t.css("padding"+s))}),c.containerOffset=t.offset(),c.containerPosition=t.position(),c.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},s=c.containerOffset,n=c.containerSize.height,a=c.containerSize.width,o=c._hasScroll(h,"left")?h.scrollWidth:a,r=c._hasScroll(h)?h.scrollHeight:n,c.parentData={element:h,left:s.left,top:s.top,width:o,height:r}))},resize:function(t){var i,s,n,a,o=e(this).resizable("instance"),r=o.options,c=o.containerOffset,l=o.position,u=o._aspectRatio||t.shiftKey,d={top:0,left:0},h=o.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(d=c),l.left<(o._helper?c.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-c.left:o.position.left-d.left),u&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=r.helper?c.left:0),l.top<(o._helper?c.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-c.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?c.top:0),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),i=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-d.left:o.offset.left-c.left)),s=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-d.top:o.offset.top-c.top)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,u&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,s=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),c=o.outerWidth()-t.sizeDiff.width,l=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:c,height:l}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:c,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options,s=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)})},resize:function(t,i){var s=e(this).resizable("instance"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},c=function(t,s){e(t).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),a={},o=s&&s.length?s:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var i=(n[t]||0)+(r[t]||0);i&&i>=0&&(a[t]=i||null)}),t.css(a)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?c(n.alsoResize):e.each(n.alsoResize,function(e,t){c(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),s=i.options,n=i.size,a=i.originalSize,o=i.originalPosition,r=i.axis,c="number"==typeof s.grid?[s.grid,s.grid]:s.grid,l=c[0]||1,u=c[1]||1,d=Math.round((n.width-a.width)/l)*l,h=Math.round((n.height-a.height)/u)*u,p=a.width+d,f=a.height+h,m=s.maxWidth&&p>s.maxWidth,_=s.maxHeight&&f>s.maxHeight,g=s.minWidth&&s.minWidth>p,v=s.minHeight&&s.minHeight>f;s.grid=c,g&&(p+=l),v&&(f+=u),m&&(p-=l),_&&(f-=u),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=o.top-h):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=o.left-d):((0>=f-u||0>=p-l)&&(t=i._getPaddingPlusBorderDimensions(this)),f-u>0?(i.size.height=f,i.position.top=o.top-h):(f=u-t.height,i.size.height=f,i.position.top=o.top+a.height-f),p-l>0?(i.size.width=p,i.position.left=o.left-d):(p=u-t.height,i.size.width=p,i.position.left=o.left+a.width-p))}}),e.ui.resizable,e.widget("ui.slider",e.ui.mouse,{version:"1.11.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",o=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),t=n.length;i>t;t++)o.push(a);this.handles=n.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,s,n,a,o,r,c,l,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(s-u.values(t));(n>i||n===i&&(t===u._lastChangedValue||u.values(t)===d.min))&&(n=i,a=e(this),o=t)}),r=this._start(t,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),c=a.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-c.left-a.width()/2,top:t.pageY-c.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,s,n,a;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/t,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>s||1===t&&s>i)&&(i=s),i!==this.values(t)&&(n=this.values(),n[t]=i,a=this._trigger("slide",e,{handle:this.handles[t],value:i,values:n}),s=this.values(t?0:1),a!==!1&&this.values(t,i))):i!==this.value()&&(a=this._trigger("slide",e,{handle:this.handles[t],value:i}),a!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var s,n,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(s=this.options.values,n=arguments[0],a=0;s.length>a;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,i){var s,n=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(n=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!i),this._super(t,i),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,s;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,s=e-i;return 2*Math.abs(i)>=t&&(s+=i>0?t:-t),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,s,n,a,o=this.options.range,r=this.options,c=this,l=this._animateOff?!1:r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((c.values(s)-c._valueMin())/(c._valueMax()-c._valueMin())),u["horizontal"===c.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[l?"animate":"css"](u,r.animate),c.options.range===!0&&("horizontal"===c.orientation?(0===s&&c.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&c.range[l?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===s&&c.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&c.range[l?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?100*((s-n)/(a-n)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(t){var i,s,n,a,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),i=this._start(t,o),i===!1))return}switch(a=this.options.step,s=n=this.options.values&&this.options.values.length?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;n=this._trimAlignValue(s+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;n=this._trimAlignValue(s-a)}this._slide(t,o,n)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})}),!function(a){function c(){var a=z.image.source.split(".");return a[a.length-1]}function h(){j("image").scaleX=parseFloat(j("selector").w/j("image").w),j("image").scaleY=parseFloat(j("selector").h/j("image").h)}function _(){var a=j("image").scaleX,c=j("image").scaleY;c>a?(j("image").h=j("selector").h+2,j("image").w=Math.round(j("image").w*c),z.image.minZoom=j("selector").h/z.image.height*100):(j("image").h=Math.round(j("image").h*a),j("image").w=j("selector").w+2,z.image.minZoom=j("selector").w/z.image.width*100),z.image.maxZoom=3*z.image.minZoom}function g(){var c="",h="";I()?(c="rotate("+j("image").rotation+","+(j("image").posX+j("image").w/2)+","+(j("image").posY+j("image").h/2)+")",h=" translate("+j("image").posX+","+j("image").posY+")",c+=h,a("#img_to_crop").attr2("transform",c)):(c=j("image").rotation,a("#img_to_crop").css({rotation:c,top:j("image").posY,left:j("image").posX}))}function v(){var c=a("<div />").css({position:"absolute","background-color":"#FFF","z-index":3,opacity:.6,width:31,height:E.height()/2,top:5,left:5}).mouseover(function(){a(this).css("opacity",1)}).mouseout(function(){a(this).css("opacity",.6)}),h=a("<div />").css({color:"#000",font:"700 11px Arial",margin:"auto",width:10}),_=a("<div />").css({color:"#000",font:"700 11px Arial",margin:"auto",width:21});h.html("0"),_.html("360");var v=a("<div />");v.slider({orientation:"horizontal",value:360,min:0,max:360,step:z.rotationSteps>360||z.rotationSteps<0?1:z.rotationSteps,slide:function(c,ui){j("image").rotation=Math.abs(360-ui.value),g(),null!=z.onRotate&&z.onRotate(a("#img_to_crop"),j("image").rotation)}}),c.append(h),c.append(v),c.append(_),v.css({margin:" 7px auto",height:E.height()/2-60,position:"relative",width:7}),E.append(c)}function b(){var c=E.next("div.isExist");c.length>0&&c.remove();var _=a("<div class='isExist' />").css({"background-color":"#fff",opacity:1,height:E.height()/2-168,width:"285px",margin:"20px auto 0 auto"}),v=a("<div />").css({color:"#000",font:"700 14px Arial","margin-left":"10px","text-align":"left","float":"left"}).html("<img class='right' src='//www.lgstatic.com/www/static/mycenter/static/images/myresume/mr_headright_cd5370d.png' />"),b=a("<div />").css({color:"#000",font:"700 14px Arial","float":"left","margin-right":"10px","text-align":"right"}).html("<img class='left' src='//www.lgstatic.com/www/static/mycenter/static/images/myresume/mr_headleft_4c6826d.png' />"),w=a("<div />");w.slider({orientation:"horizontal ",value:$(),min:z.image.minZoom,max:z.image.maxZoom,step:z.zoomSteps>z.image.maxZoom||z.zoomSteps<0?1:z.zoomSteps,slide:function(c,ui){var _=z.image.width*Math.abs(ui.value)/100,v=z.image.height*Math.abs(ui.value)/100,b=j("selector").w+2,$=j("selector").h+2;b>_&&(_=b),$>v&&(v=$),I()?(a("#img_to_crop").attr2("width",_+"px"),a("#img_to_crop").attr2("height",v+"px")):a("#img_to_crop").css({width:_+"px",height:v+"px"}),j("image").w=_,j("image").h=v,h(),j("image").posX=z.width/2-j("image").w/2+1,j("image").posY=z.height/2-j("image").h/2+1,g(),null!=z.onZoom&&z.onZoom(a("#img_to_crop"),j("image"))}}),_.append(b),_.append(w),_.append(v),w.css({margin:" 7px","float":"left",height:"5px",width:200,position:"relative"}),E.after(_)}function $(){var a=0;return a=j("image").w>j("image").h?100*j("image").w/z.image.width:100*j("image").h/z.image.height}function w(){z.selector.centered&&(j("selector").y=z.height/2-j("selector").h/2,j("selector").x=z.width/2-j("selector").w/2);var c=a("<div />").attr2("id","selector").css({width:j("selector").w,height:j("selector").h,top:j("selector").y+"px",left:j("selector").x+"px",border:"1px solid "+z.selector.borderColor,position:"absolute",cursor:"move","user-select":"none","z-index":"1"}).mouseover(function(){a(this).css({border:"1px solid "+z.selector.borderColorHover})}).mouseout(function(){a(this).css({border:"1px solid "+z.selector.borderColor})});y(c),E.append(c)}function y(c){var h=null,_=!1;h=c.find("#infoSelector").length>0?c.find("#infoSelector"):a("<div />").attr2("id","infoSelector").css({position:"absolute",top:0,left:0,"font-size":z.selector.infoFontSize+"px","font-family":"Arial",color:z.selector.infoFontColor,width:"100%"}),z.selector.showDimetionsOnDrag&&(h.html("X:"+j("selector").x+"px - Y:"+j("selector").y+"px"),_=!0),z.selector.showPositionsOnDrag&&h.html(_?h.html()+" | W:"+j("selector").w+"px - H:"+j("selector").h+"px":""),c.append(h)}function k(){function c(a){a.offsetX=void 0!=a.offsetX?a.offsetX:a.originalEvent.layerX,a.offsetY=void 0!=a.offsetY?a.offsetY:a.originalEvent.layerY}function h(a){c(a);var h=a.offsetX-$,b=a.offsetY-w,y=_+b,k=v+h,C=(z.width-j("selector").w)/2,S=(z.height-j("selector").h)/2;y=S>y?y:S,k=C>k?k:C;var T=j("image").w+C-z.width;k=-T+2>k?-T+2:k;var P=j("image").h+S-z.height;y=-P+2>y?-P+2:y,j("image").posY=y,j("image").posX=k,g()}var _,v,b=a("<div />").attr2("id","fakelayer").css({position:"absolute","z-index":1e3,visibility:"invisible",width:"360px",height:"360px",top:"74px",left:"30px",cursor:"move",background:"transparent",zoom:"1"}),$=0,w=0;b.bind("mousedown",function(a){c(a),$=a.offsetX,w=a.offsetY,v=j("image").posX,_=j("image").posY,b.bind("mousemove",h)}),b.bind("mouseup mouseleave",function(){b.unbind("mousemove",h)}),E.parent().append(b)}function C(){var c=["t","b","l","r"];a.each(c,function(){var c=a("<div />").attr2("id",this).css({overflow:"hidden",background:z.overlayColor,opacity:.6,position:"absolute","z-index":2,visibility:"visible"});E.append(c)});var h=(z.height-j("selector").h)/2,_=(z.width-j("selector").w)/2;E.find("#t").css({display:"block",width:"100%",height:h,left:0,top:0}),E.find("#b").css({display:"block",width:"100%",height:h,left:0,top:z.height/2+j("selector").h/2+2}),E.find("#l").css({display:"block",width:_,height:j("selector").h+2,left:0,top:h}),E.find("#r").css({display:"block",width:_-2,height:j("selector").h+2,right:0,top:h})}function S(a,c){E.data(a,c)}function j(a){return E.data(a)}function T(a){return 1==a.nodeType&&"http://www.w3.org/2000/svg"==a.namespaceURI}function P(c){var h=j("image"),_=j("selector"),g={viewPortW:E.width(),viewPortH:E.height(),imageX:h.posX,imageY:h.posY,imageRotate:h.rotation,imageW:h.w,imageH:h.h,imageSource:h.source,selectorX:_.x,selectorY:_.y,selectorW:_.w,selectorH:_.h};return a.extend(g,c)}var E=null,z=null,I=function(){return a.browser.msie&&a.browser.version>=9||!a.browser.msie};a.fn.cropzoom=function($){return z=a.extend(!0,a.fn.cropzoom.defaults,$),this.each(function(){if(!a.isFunction(a.fn.draggable)||!a.isFunction(a.fn.resizable)||!a.isFunction(a.fn.slider))return void alert("You must include ui.draggable, ui.resizable and ui.slider to use cropZoom");if(""==z.image.source||0==z.image.width||0==z.image.height)return void alert("You must set the source, witdth and height of the image element");a("#img_to_crop").remove(),E=a(this),E.empty(),E.css({width:z.width,height:z.height,position:"relative"}),S("image",{h:z.image.height,w:z.image.width,posY:0,posX:0,scaleX:0,scaleY:0,rotation:0,source:z.image.source}),S("selector",{x:z.selector.x,y:z.selector.y,w:null!=z.selector.maxWidth&&z.selector.w>z.selector.maxWidth?z.selector.maxWidth:z.selector.w,h:null!=z.selector.maxHeight&&z.selector.h>z.selector.maxHeight?z.selector.maxHeight:z.selector.h}),h(),_(),j("image").posX=z.width/2-j("image").w/2+1,j("image").posY=z.height/2-j("image").h/2+1;var $=null,y=null;if(I())$=E[0].ownerDocument.createElementNS("http://www.w3.org/2000/svg","svg"),$.setAttribute("id","k"),$.setAttribute("width",z.width),$.setAttribute("height",z.height),$.setAttribute("preserveAspectRatio","none"),y=E[0].ownerDocument.createElementNS("http://www.w3.org/2000/svg","image"),y.setAttributeNS("http://www.w3.org/1999/xlink","href",z.image.source),y.setAttribute("width",j("image").w),y.setAttribute("height",j("image").h),y.setAttribute("id","img_to_crop"),y.setAttribute("preserveAspectRatio","none"),a(y).attr2("x",0),a(y).attr2("y",0),a(y).css("cursor","move"),$.appendChild(y),a.browser.msie&&a.browser.version>=10&&window.setTimeout(function(){y.setAttributeNS("http://www.w3.org/1999/xlink","href",""),y.setAttributeNS("http://www.w3.org/1999/xlink","href",z.image.source)},0);else{E[0].ownerDocument.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML");var T=document.createStyleSheet();T.addRule("v\\:image","behavior: url(#default#VML);display:inline-block"),T.addRule("v\\:image","antiAlias: false;"),$=a("<div />").attr2("id","k").css({width:z.width,height:z.height,position:"absolute"}),y=document.createElement("v:image"),y.setAttribute("id","img_to_crop"),y.setAttribute("src",z.image.source),y.setAttribute("gamma","0"),a(y).css({position:"absolute",left:0,top:0,width:j("image").w,height:j("image").h,cursor:"move"}),y.setAttribute("coordsize","21600,21600"),y.outerHTML=y.outerHTML;var P=c();("png"==P||"gif"==P)&&(y.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+z.image.source+"',sizingMethod='scale');"),$.append(y)}return E.append($),g(),w(),E.find(".ui-icon-gripsmall-diagonal-se").css({width:8,height:8}),C(),k(),z.enableZoom&&b(),z.enableRotation&&v(),this})};var N=a.fn.addClass;a.fn.addClass=function(c){return c=c||"",this.each(function(){if(T(this)){var h=this;
a.each(c.split(/\s+/),function(i,c){var _=h.className?h.className.baseVal:h.getAttribute("class");-1==a.inArray(c,_.split(/\s+/))&&(_+=(_?" ":"")+c,h.className?h.className.baseVal=_:h.setAttribute("class",_))})}else N.apply(a(this),[c])})};var F=a.fn.removeClass;a.fn.removeClass=function(c){return c=c||"",this.each(function(){if(T(this)){var h=this;a.each(c.split(/\s+/),function(i,c){var _=h.className?h.className.baseVal:h.getAttribute("class");_=a.grep(_.split(/\s+/),function(n){return n!=c}).join(" "),h.className?h.className.baseVal=_:h.setAttribute("class",_)})}else F.apply(a(this),[c])})};var M=a.fn.toggleClass;a.fn.toggleClass=function(c,h){return this.each(function(){T(this)?("boolean"!=typeof h&&(h=!a(this).hasClass(c)),a(this)[(h?"add":"remove")+"Class"](c)):M.apply(a(this),[c,h])})};var R=a.fn.hasClass;a.fn.hasClass=function(c){c=c||"";var h=!1;return this.each(function(){if(T(this)){var _=(this.className?this.className.baseVal:this.getAttribute("class")).split(/\s+/);h=a.inArray(c,_)>-1}else h=R.apply(a(this),[c]);return!h}),h};var O=a.fn.attr;a.fn.attr2=function(c,h,_){if("string"==typeof c&&void 0===h){var g=O.apply(this,[c,h,_]);return g&&g.baseVal?g.baseVal.valueAsString:g}var v=c;return"string"==typeof c&&(v={},v[c]=h),this.each(function(){if(T(this))for(var n in v)this.setAttribute(n,"function"==typeof v[n]?v[n]():v[n]);else O.apply(a(this),[c,h,_])})};var D=a.fn.removeAttr;a.fn.removeAttr=function(c){return this.each(function(){T(this)?this[c]&&this[c].baseVal?this[c].baseVal.value="":this.setAttribute(c,""):D.apply(a(this),[c])})},a.fn.cropzoom.defaults={width:500,height:375,bgColor:"#000",overlayColor:"#fff",selector:{x:0,y:0,w:229,h:100,aspectRatio:!1,centered:!1,borderColor:"yellow",borderColorHover:"red",bgInfoLayer:"#FFF",infoFontSize:10,infoFontColor:"blue",showPositionsOnDrag:!0,showDimetionsOnDrag:!0,maxHeight:null,maxWidth:null},image:{source:"",rotation:0,width:0,height:0,minZoom:10,maxZoom:150},enableRotation:!0,enableZoom:!0,zoomSteps:1,rotationSteps:5,onSelectorDrag:null,onSelectorDragStop:null,onSelectorResize:null,onSelectorResizeStop:null,onZoom:null,onRotate:null,onImageDrag:null},a.fn.extend({setSelector:function(x,c,h,_,g){void 0!=g&&1==g?a("#selector").animate({top:c,left:x,width:h,height:_},"slow"):a("#selector").css({top:c,left:x,width:h,height:_}),S("selector",{x:x,y:c,w:h,h:_})},restore:function(){E.empty(),S("image",{}),S("selector",{}),a("#img_to_crop").remove()},send:function(c,h,_,g){a.ajax({url:c,type:h,data:P(_),success:function(r){S("imageResult",r),null!=r.resubmitToken&&""!=r.resubmitToken&&(globals.token=r.resubmitToken),void 0!==g&&null!=g&&g(r)},error:function(r){null!=r.resubmitToken&&""!=r.resubmitToken&&(globals.token=r.resubmitToken)}})}})}(jQuery),!function(){var a={CityWrapper:function(){var a={active:"mr_on"},c={hotCitys:"<li>北京</li><li>上海</li><li>广州</li><li>深圳</li><li>杭州</li><li>成都</li><li>西安</li><li>南京</li><li>厦门</li><li>武汉</li>"},h=function(a){var c={};this._get=function(a){return c[a]},this._set=function(a,h){var _=this;return c[a]=h,_},_.call(this,a)},_=function(a){var h=this;if(!a.container)throw"Need options.container!";var _={};a.container.find(".mr_province li:first ul").html(c.hotCitys);var v=a.container.find(".mr_province li");v.each(function(){var a=$(this);_[a.find("span")]=a.find("ul")}),h._set("container",a.container)._set("onchange",a.onchange)._set("targetShown",a.container.find('input[type="button"]'))._set("basicCity",a.container.find('input[name="workCity"]'))._set("beforeShown",a.beforeShown)._set("afterHide",a.afterHide)._set("targetPanel",a.container.find(".xl_list"))._set("value",void 0)._set("targetProvinceWrap",a.container.find(".mr_province"))._set("targetProvinces",a.container.find(".mr_province span"))._set("targetCityWrap",a.container.find(".mr_province ul"))._set("targetCityObjs",a.container.find(".mr_province ul li"))._set("targetHotCitys",a.container.find(".mr_province li:first  ul li"))._set("targetHotCityUl",a.container.find(".mr_province li:first  ul"))._set("targetHotCityLeft",a.container.find(".mr_province li:first  span"))._set("oProvinceCity",_)._set("targetCityUl",a.container.find(".mr_province li ul")),g.call(h)},g=function(){var a=this;y.call(a)},v={hide:function(a){if(a._get("stateShown")){a._get("targetPanel").hide();var c=a._get("afterHide");c&&c(a._get("container"),a),a._set("stateShown",!1)}},show:function(a){if(!a._get("stateShown")){b.call(a);var c=a._get("beforeShown");c&&c(a._get("container"),a),a._get("targetPanel").show(),a._set("stateShown",!0)}},change:function(a,c){var h=a._get("value");a._get("targetShown").val(h),a._get("basicCity").val(h);var _=a._get("onchange");h!=c&&_&&_(h,a._get("container")),v.hide(a)}},b=function(){var c=this;c._get("targetProvinces").removeClass(a.active),c._get("targetCityObjs").removeClass(a.active),c._set("value",c._get("targetShown").val());var h=!0,_=c._get("value");return c._get("targetCityUl").hide(),""==_||"所在城市"==_?(c._get("targetHotCityLeft").addClass(a.active),c._get("targetHotCityLeft").next().show(),c._get("targetProvinceWrap").animate({scrollTop:"0px"},1),h=!1,!1):void(h&&(c._get("targetHotCitys").each(function(){var g=$(this),v=$.trim(g.text());return _==v?(c._get("targetHotCityUl").show(),g.addClass(a.active),c._get("targetHotCityLeft").addClass(a.active),c._get("targetProvinceWrap").animate({scrollTop:"0px"},1),h=!1,!1):void 0}),h&&c._get("targetCityWrap").each(function(){var g=$(this);g.find("li").each(function(){var g=$(this);if(_==$.trim(g.text())){var v=g.parent();v.show(),g.addClass(a.active),v.prev().addClass(a.active);var b=v.parent().index();return c._get("targetProvinceWrap").animate({scrollTop:33*b+"px"},1),h=!1,!1}})})))},w={containerClick:function(a,c){c._get("stateShown")?v.hide(c):v.show(c)},documentClick:function(a,c){c._get("stateShown")&&v.hide(c)},provinceClick:function(c,h){var _=$(this);$.trim(_.text()),h._get("targetProvinces").removeClass(a.active),_.addClass(a.active),h._get("targetCityWrap").hide(),_.next().show(),h._get("targetCityObjs").removeClass(a.active),_.next().find("li").each(function(){var c=$(this);h._get("value")==$.trim(c.text())&&c.addClass(a.active)})},cityClick:function(c,h){var _=$(this),g=_.parent();g.find("li").removeClass(a.active),_.addClass(a.active);var b=h._get("value");h._set("value",_.text()),v.change(h,b)}},y=function(){var a=this;a._get("container").bind("click",function(c){w.containerClick.call(this,c,a),c.stopPropagation()}),$(document).bind("click",function(c){w.documentClick.call(this,c,a)}),a._get("targetPanel").bind("click",function(a){a.stopPropagation()}),a._get("targetProvinceWrap").delegate("span","click",function(c){w.provinceClick.call(this,c,a),c.stopPropagation()}),a._get("targetCityWrap").delegate("li","click",function(c){w.cityClick.call(this,c,a),c.stopPropagation()})};return h.prototype={constructor:h,show:function(){var a=this;return v.show(a),a},hide:function(){var a=this;return v.hide(a),a},set:function(a,c){var h=this,_=h._get("value");if(h._set("value",a),h._get("targetShown").val(a),c){var g=h._get("onchange");a!=_&&g&&g(a,h._get("container"))}return h},get:function(){var a=this;return a._get("value")},reset:function(){var a=this;return a.set(""),a}},h}(),CalendarWrapper:function(){var a={active:"active",today:"today",hover:"active",disable:"disable"},c={toToday:"<li>至今</li>",toTodayText:"至今"},h=function(a){var c={};this._get=function(a){return c[a]},this._set=function(a,h){var _=this;return c[a]=h,_},_.call(this,a)},_=function(a){var c=this;if(!a.container)throw"Need options.container!";c._set("container",a.container)._set("onchange",a.onchange)._set("beforeShown",a.beforeShown)._set("afterHide",a.afterHide)._set("has2Today",a.has2Today||!1)._set("targetHidden",a.container.find('input[type="hidden"]'))._set("targetShown",a.container.find('input[type="button"]'))._set("targetPanel",a.container.find(".mr_calendar_ym"))._set("targetYearsCon",a.container.find(".mr_year"))._set("targetMonthsCon",a.container.find(".mr_month"))._set("targetYearsLis",a.container.find(".mr_year li"))._set("targetMonthsLis",a.container.find(".mr_month li"))._set("targetMonthsSpans",a.container.find(".mr_month span"))._set("value",void 0)._set("valueYear",void 0)._set("valueMonth",void 0)._set("stateShown",!1)._set("leftBr",void 0)._set("rightBr",void 0)._set("targetYearWrap",a.container.find(".mr_year"))._set("disable",!1),y.call(c)},g=function(a){return a+"月"},v=function(a){return a.replace("月","")},b=function(a,c){return 10>+c&&(c="0"+c),a+"."+c},w=function(a){a+="";var c=a.split(".");return{year:c[0],month:parseInt(c[1])+""}},y=function(){var a=this;a._get("has2Today")&&"至今"!=a._get("targetYearsCon").find("li:first").text()&&a._get("targetYearsCon").prepend(c.toToday)&&a._set("targetYearsLis",a._get("container").find(".mr_year li")),N.call(a),I.call(a),j.call(a)},k={hide:function(a){if(a._get("stateShown")){a._get("targetPanel").hide();var c=a._get("afterHide");c&&c(a._get("container"),a),a._set("stateShown",!1),a._set("valueYear",void 0)._set("valueMonth",void 0)}},show:function(a){if(!a._get("disable")&&!a._get("stateShown")){C.call(a);var c=a._get("beforeShown");c&&c(a._get("container"),a),a._get("targetPanel").show(),a._set("stateShown",!0)}},change:function(a,c){var h=a._get("value");a._get("targetHidden").val(h),a._get("targetShown").val(h);var _=a._get("onchange");h!=c&&_&&_(h,a._get("container")),k.hide(a)}},C=function(){var h=this;h._get("targetYearsLis").removeClass(a.active),h._get("targetMonthsSpans").removeClass(a.active).removeClass(a.disable),E.call(h);var _=h._get("value"),v=h._get("targetYearsCon").find("li:first");if(""==$.trim(_)){var b;if("至今"==$.trim(v.text())){var y=v.nextAll().not(".disable").first();y.trigger("click"),h._set("valueYear",y.text()),b=y}else{var k=h._get("targetYearsCon").find("li").not(".disable").first();k.trigger("click"),h._set("valueYear",k.text()),b=k}return void h._get("targetYearWrap").animate({scrollTop:32*$(k).index()+"px"},1)}if(_==c.toTodayText){h._get("targetYearsCon").find("li:first").addClass(a.active);var C=h._get("todayMonth");return h._get("targetMonthsSpans").each(function(){var c=$(this);$.trim(c.text())==g(C)&&c.addClass(a.today)}),void h._get("targetYearWrap").animate({scrollTop:0},1)}var S=w(_);h._set("valueYear",S.year),h._set("valueMonth",S.month),h._get("targetYearsLis").each(function(){var c=$(this);return $.trim(c.text())==S.year?(c.addClass(a.active),window.setTimeout(function(){c.trigger("click")},0),h._get("targetYearWrap").animate({scrollTop:32*c.index()+"px"},1),!1):void 0}),h._get("targetMonthsSpans").each(function(){var c=$(this);return $.trim(c.text())==g(S.month)?(c.addClass(a.active),!1):void 0})},S={containerClick:function(a,c){c._get("stateShown")?k.hide(c):k.show(c)},documentClick:function(a,c){c._get("stateShown")&&k.hide(c)},yearsClick:function(h,_){var v=$(this);if(!v.hasClass(a.disable)){var b=$.trim(v.text());if(b==c.toTodayText){var y=_._get("value");return _._set("value",b),void k.change(_,y)}if(_._set("valueYear",b),_._get("targetYearsLis").removeClass(a.active),v.addClass(a.active),_._get("targetMonthsSpans").removeClass(a.active).removeClass(a.today).removeClass(a.disable),b==_._get("todayYear")){var C=_._get("todayMonth");_._get("targetMonthsSpans").each(function(){var c=$(this);$.trim(c.text())==g(C)&&c.addClass(a.today)})}E.call(_);var S=_._get("value");S&&(S=w(S),b==S.year&&_._get("targetMonthsSpans").each(function(){var c=$(this);$.trim(c.text())==g(S.month)&&c.addClass(a.active)}))}},monthsClick:function(c,h){var _;if(_=h._get("valueYear")){var g=$(this);if(!g.hasClass(a.disable)){var w=v($.trim(g.text()));h._set("valueMonth",w),h._get("targetMonthsSpans").removeClass(a.active),g.addClass(a.active);var y=h._get("value");h._set("value",b(_,w)),k.change(h,y)}}}},j=function(){var a=this;a._get("container").bind("click",function(c){S.containerClick.call(this,c,a),c.stopPropagation()}),$(document).bind("click",function(c){S.documentClick.call(this,c,a)}),a._get("targetPanel").bind("click",function(a){a.stopPropagation()}),a._get("targetYearsCon").delegate("li","click",function(c){S.yearsClick.call(this,c,a),c.stopPropagation()}),a._get("targetMonthsCon").delegate("span","click",function(c){S.monthsClick.call(this,c,a),c.stopPropagation()})},T=function(c){var h=this;h._get("targetMonthsSpans").each(function(){var h=$(this);c(v($.trim(h.text())))&&h.addClass(a.disable)})},P=function(c){var h=this;h._get("targetYearsLis").each(function(){var h=$(this);c($.trim(h.text()))&&h.addClass(a.disable)})},E=function(){var h=this;h._get("targetMonthsSpans").removeClass(a.disable),h._get("targetYearsLis").removeClass(a.disable);var _,g=h._get("leftBr"),v=h._get("rightBr"),$=h._get("value");return v!=c.toTodayText&&v||(v=b(h._get("todayYear"),h._get("todayMonth"))),$||h._get("valueYear")?(_=$&&!h._get("valueYear")?$==c.toTodayText?h._get("todayYear"):w($).year:h._get("valueYear"),void z.call(h,g,v,_)):(_=h._get("todayYear"),void z.call(h,g,v,_))},z=function(a,c,h){var _=this;if(a){var g=w(a);h==g.year&&T.call(_,function(a){return+a<+g.month}),P.call(_,function(a){return+a<g.year})}if(c){var v=w(c);h==v.year&&T.call(_,function(a){return+a>+v.month}),h>v.year&&T.call(_,function(){return!0}),P.call(_,function(a){return+a>v.year})}},I=function(){var c=this,h=c._get("todayYear"),_=c._get("todayMonth");c._get("targetYearsLis").each(function(){var c=$(this);return $.trim(c.text())==h?(c.addClass(a.today),!1):void 0}),c._get("targetMonthsSpans").each(function(){var c=$(this);return $.trim(c.text())==g(_)?(c.addClass(a.today),!1):void 0})},N=function(){var a=this,c=new Date,h=c.getFullYear(),_=c.getMonth()+1;a._set("todayYear",h),a._set("todayMonth",_);var g=b(h,_);a._set("todayDate",g),a._set("rightBr",g)};return h.prototype={constructor:h,show:function(){var a=this;return k.show(a),a},hide:function(){var a=this;return k.hide(a),a},disable:function(){var a=this;return a._set("disable",!0),a},enable:function(){var a=this;return a._set("disable",!1),a},set:function(a,c){var h=this,_=h._get("value");if(h._set("value",a),h._get("targetHidden").val(a),h._get("targetShown").val(a),c){var g=h._get("onchange");a!=_&&g&&g(a,h._get("container"))}return h},get:function(){var a=this;return a._get("value")},reset:function(){var a=this;return a.set(""),a._set("leftBr",void 0),a._set("rightBr",void 0),a},setLeftBoundary:function(a){var c=this;return c._set("leftBr",a),E.call(c),c},setRightBoundary:function(a){var c=this;return c._set("rightBr",a),E.call(c),c}},h}(),CalendarDouble:function(){var c=function(a){this.init(a)};return c.prototype={constructor:c,init:function(c){var h=this;if(!c.wrap)throw"Need wrap!";h.wrap=c.wrap;var _=h.wrap.children("div:first"),g=h.wrap.children("div:last");h.calendarStart=new a.CalendarWrapper({container:_,onchange:function(a){h.calendarEnd.setLeftBoundary(a)},beforeShown:function(a){$(document).trigger("click");var c=a.find('input[type="button"]');"起始时间"!=c.val()&&"结束时间"!=c.val()&&a.find("span.error").hide(),h.calendarEnd.hide(),a.siblings().find('input[type="button"]').removeClass("select_color"),a.parents(".practice").find(".practiceDate").find('input[type="button"]').removeClass("select_color"),a.parents(".work").find(".workDate").find('input[type="button"]').removeClass("select_color"),a.find('input[type="button"]').addClass("select_color")},afterHide:function(a){a.find('input[type="button"]').removeClass("select_color"),$(".mr_workexpFormTop").css("paddingBottom","15px").siblings(".adddel").css("marginTop","0px"),$(".mr_practiceConFormTop").css("paddingBottom","15px").siblings(".adddel").css("marginTop","0px");var c=a.find('input[type="button"]');"起始时间"!=c.val()&&"结束时间"!=c.val()&&(a.find('input[type="button"]').css("color","#333"),a.find("span.error").hide())}}),h.calendarEnd=new a.CalendarWrapper({container:g,onchange:function(a){h.calendarStart.setRightBoundary(a)},beforeShown:function(a){$(document).trigger("click");var c=a.find('input[type="button"]');"起始时间"!=c.val()&&"结束时间"!=c.val()&&a.find("span.error").hide(),h.calendarStart.hide(),a.siblings().find('input[type="button"]').removeClass("select_color"),a.parents(".practice").find(".practiceDate").find('input[type="button"]').removeClass("select_color"),a.parents(".work").find(".workDate").find('input[type="button"]').removeClass("select_color"),a.find('input[type="button"]').addClass("select_color")},afterHide:function(a){a.find('input[type="button"]').removeClass("select_color"),$(".mr_workexpFormTop").css("paddingBottom","15px").siblings(".adddel").css("marginTop","0px"),$(".mr_practiceConFormTop").css("paddingBottom","15px").siblings(".adddel").css("marginTop","0px");var c=a.find('input[type="button"]');"起始时间"!=c.val()&&"结束时间"!=c.val()&&(a.find('input[type="button"]').css("color","#333"),a.find("span.error").hide())},has2Today:!0})},setCalendarStart:function(a){var c=this;c.calendarStart.set(a,!0)},setCalendarEnd:function(a){var c=this;c.calendarEnd.set(a,!0)},getCalendarStart:function(){var a=this;return a.calendarStart.get()},getCalendarEnd:function(){var a=this;return a.calendarEnd.get()},disable:function(){var a=this;a.calendarStart.disable(),a.calendarEnd.disable()},enable:function(){var a=this;a.calendarStart.enable(),a.calendarEnd.enable()},show:function(){var a=this;a.calendarStart.show(),a.calendarEnd.show()},hide:function(){var a=this;a.calendarStart.hide(),a.calendarEnd.hide()}},c}()};window.components=a}();var projectTitle=$(".mr_jobe_list .l2 .projectTitle");projectTitle.each(function(){var a=$(this),c=a.width();a.find("span").css("left",c+5)});var amountScore=parseInt($.trim($(".mr_bfb").text())),oMoudle={workId:"",eduId:""},oMoudleScore={expectJobsScore:"",projectExpScore:"",workShowScore:"",skillScore:"",myRemarkScore:""},oDelMoudle,oMdScore={expectJobsScore:globals.expectJobsScore,skillScore:globals.skillScore,projectExpScore:globals.projectExperienceScore,workShowScore:globals.workShowScore,myRemarkScore:globals.myRemarkScore};$(function(){function a(){var a=$(".mr_job_des .mr_expjob_content"),r=/&nbsp/g,c=$.trim(a.text()).replace(r,"");""!=c&&$(".mr_job_des").removeClass("dn")}function c(){var a=$(".mr_sns a");a.eq(a.length-1).addClass(),a.each(function(){var a=$(this).data("sns"),c=$(this),h=c.find("span");switch(h.find("em"),parseInt(a)){case 1:var _=document.createTextNode("Twitter");c.addClass("sns1");break;case 2:var _=document.createTextNode("Dribbble");c.addClass("sns2");break;case 3:var _=document.createTextNode("Behance");c.addClass("sns3");break;case 4:var _=document.createTextNode("LinkedIn");c.addClass("sns4");break;case 5:var _=document.createTextNode("Quora");c.addClass("sns5");break;case 6:var _=document.createTextNode("Github");c.addClass("sns6");break;case 7:var _=document.createTextNode("知乎");c.addClass("sns7");break;case 8:var _=document.createTextNode("LOFTER");c.addClass("sns8");break;case 9:var _=document.createTextNode("UI中国");c.addClass("sns9");break;case 10:var _=document.createTextNode("新浪微博");c.addClass("sns10");break;case 11:var _=document.createTextNode("SegmentFault");c.addClass("sns11");break;case 12:var _=document.createTextNode("StackoverFlow");c.addClass("sns12")}h.prepend($(_)).css("marginLeft",-(h.width()+20)/2+"px")})}function h(a){for(var c=0,i=0;i<a.length;i++){var h=a.charCodeAt(i);h>=1&&126>=h||h>=65376&&65439>=h?c++:c+=2}return c}function _(a,c,h){var _,b=$("#workExperience .list_show .mr_jobe_list"),w=$("#educationalBackground .list_show .mr_jobe_list"),y=$(".toggle");a?0==b.length||0==w.length?(_="2",v(y,h,_)):g(h):0==w.length?(_="2",v(y,h,_)):($(".openresume_tip").hide(),g(h))}function g(a){globals.isOpenResume=a?"3":"0"}function v(a,c,h){switch($(".openresume_tip").hide(),a.addClass("toggle-off"),$(".openresume_tip").hide(),globals.isOpenResume=h,h){case"2":$(".unopen").show();break;case"3":$(".firstset").show()}globals.isFirstOpen=c;var _=a.find("input");_.eq(0).attr("checked","checked")}function b(e){return e.stopPropagation(),!1}function w(a,c,h,_){if(y(),oDelMoudle.parent().parent().removeClass("md_flag").addClass("dn"),$("#"+c).addClass("dn"),"customBlock"!=c){switch(c){case"expectJob":globals.hasExpectJobs=!1;break;case"skillsAssess":globals.hasSkillEvaluates=!1;break;case"selfDescription":globals.hasSelf=!1;break;case"worksShow":globals.hasWorkShows=!1}if(0==h){var g=parseInt($.trim($(".mr_bfb").text())),v=amountScore-g,b=parseInt(_.content.infoCompleteStatus.score);$(".mr_top .mr_bfb").text(b+"%"),amountScore=v+b,W(c,1)}else W(c,1)}else $("#customTitleName").val("");$(".hide_md").each(function(){var d=$(this).data("md");d==c&&$(this).addClass("dn").removeClass("mr_hide")}),9==$(".md_flag").length?$(".mr_module_add").addClass("dn"):$(".mr_module_add").removeClass("dn"),a.parents(".mr_md_del").remove()}function y(){switch(X){case"olinfoForm":$(".mr_p_info").show(),$("#olinfoForm .mr_info_edit").addClass("dn");break;case"addJobForm":$("#addJobForm .mr_cancel").trigger("click");break;case"upJobForm":$("#currentUpJobForm .mr_cancel").trigger("click");break;case"addEduForm":$("#addEduForm .mr_cancel").trigger("click");break;case"upEduForm":$("#upEduForm .mr_cancel").trigger("click");break;case"addProForm":$("#addProForm .mr_cancel").trigger("click");break;case"upProForm":$("#currentUpProForm .mr_cancel").trigger("click");break;case"addWorksShowUploadForm":$("#addWorksShowUploadForm .mr_cancel").trigger("click");break;case"upWorksShowUploadForm":$("#upWorksShowUploadForm .mr_cancel").trigger("click");break;case"upSelfForm":$("#upSelfForm .mr_cancel").trigger("click");break;case"upExpJobForm":$("#upExpJobForm .mr_cancel").trigger("click");break;case"upCustomForm":$("#upCustomForm .mr_cancel").trigger("click");break;case"updateSkill":$("#skillsAssess .mr_moudle_content .mr_cancel").trigger("click");break;default:return}U(),X="",Q=!1}function k(a,c){1==c&&y();var h=$("#"+a).offset();switch(a){case"expectJob":1==c&&$("#expectJob .mr_head_r").trigger("click");break;case"workExperience":1==c&&$("#workExperience .mr_head_r").trigger("click");break;case"projectExperience":1==c&&$("#projectExperience .mr_head_r").trigger("click");break;case"educationalBackground":1==c&&$("#educationalBackground .mr_head_r").trigger("click");case"selfDescription":1==c&&$("#selfDescription .mr_head_r").trigger("click");break;case"worksShow":1==c&&$("#worksShow .mr_head_r").trigger("click");break;case"customBlock":1==c&&$("#customBlock .mr_head_r").trigger("click");break;case"skillsAssess":1==c&&$("#skillsAssess .mr_head_r").trigger("click");break;case"baseinfo":1==c&&$("#baseinfo .mr_head_r").trigger("click");break;default:return}$("body,html").animate({scrollTop:h.top},400,function(){$("#"+a).animate({borderColor:"#e46a4a"},300,function(){$(this).animate({borderColor:"transparent"})})})}function C(a,c){if(!a){$(".openresume_tip").hide(),$(".unopen").show(),$(".toggle").addClass("toggle-off"),globals.isOpenResume="2",globals.isFirstOpen=c;var h=$(".toggle").find("input");h.eq(0).attr("checked","checked")}}function S(a){$("#addJobForm").submit(function(){a.sync()}).validate({rules:lt.rules,messages:lt.messages,errorPlacement:function(a,c){"hidden"==c.attr("type")?($(c).parent().css("margin-bottom","20px"),a.appendTo($(c).parent())):c.is("textarea")?$(c).parent().find(".wrap_editor").after(a):a.insertAfter($(c).parent())},submitHandler:function(c){var h=globals.resumeId,_=$("img.logo_u",c).attr("src"),g=$('input[name="companyName"]',c).val(),v=$('input[name="positionName"]',c).val(),b=$('input[name="startTime"]',c).val(),w=$('input[name="endTime"]',c).val(),y=a.getContent().replace(/<(?!ol|li|ul|p|\/ol|\/li|\/ul|\/p)[^>]*>/g,"").replace(/<([a-z][a-z0-9]*)[^>]*?(\/?)>/gi,"<$1$2>").replace(/&nbsp;/gi,""),k=globals.token,C=!1;""!=$.trim(_)&&(C=!0),$(c).find(":submit").val("保存中...").attr("disabled",!0),$.ajax({url:ctx+"/workExperience/save.json",type:"post",data:{id:h,companyLogo:_,companyName:g,positionName:v,startDate:b,endDate:w,workContent:y,resubmitToken:k,isUploadLogo:C},dataType:"json"}).done(function(h){if(globals.token=h.resubmitToken,h.success){var _=h.content.isOpenMyResume,g=$(".toggle"),v=h.content.firstOpen;globals.isFirstOpen=v,_&&($(".openresume_tip").hide(),globals.isFirstOpen?(globals.isOpenResume="3",$(".firstset").show()):globals.isOpenResume=g.hasClass("toggle-off")?"0":"1"),R(h),j(),$("img.logo_u",c).css({width:0,height:0}),$("div.up",c).removeClass("up"),updateResumeTime(h.content.refreshTime);var rt=h.content.infoCompleteStatus.score,b=parseInt($.trim($(".mr_bfb").text())),w=amountScore-b+rt;updateRatioRM(rt,w),lt.obj.find(".mr_head_r").trigger("click");var y=h.content.workExperiences;P(y);var k=lt.obj.find(".mr_empty_add");k.not(":hidden")&&k.hide();var C=$(".mr_module .flag_work");C.is(":hidden")||C.addClass("dn"),a.setContent(""),pt.reset(),ft.reset()}else $(c).find(".wrap_editor").after('<span for="ueditor_textarea_editorValue" class="error">'+h.msg+"</span>");$(c).find(":submit").val("保 存").attr("disabled",!1)})}})}function j(){var a=$("#addJobForm");$("#companyLogo",a).val(""),$("img.logo_u",a).attr("src",""),$("#companyName",a).val(""),$("#positionName",a).val(""),$("#startTime",a).val(""),$(".mr_btn",a).val(""),$("#endTime",a).val(""),$("#jobContent",a).val("")}function T(){$("#currentUpJobForm").submit(function(){J.sync()}).validate({rules:lt.rules,messages:lt.messages,errorPlacement:function(a,c){"hidden"==c.attr("type")?($(c).parent().css("margin-bottom","20px"),a.appendTo($(c).parent())):c.is("textarea")?$(c).parent().find(".wrap_editor").after(a):a.insertAfter($(c).parent())},submitHandler:function(a){var c=globals.token,h=globals.resumeId,_=$("#currentUpJobForm > .mr_expid").val(),g=$("img.logo_u",a).attr("src"),v=$('input[name="companyName"]',a).val(),b=$('input[name="positionName"]',a).val(),w=$('input[name="startTime"]',a).val(),y=$('input[name="endTime"]',a).val(),k=J.getContent().replace(/<(?!ol|li|ul|p|\/ol|\/li|\/ul|\/p)[^>]*>/g,"").replace(/<([a-z][a-z0-9]*)[^>]*?(\/?)>/gi,"<$1$2>").replace(/&nbsp;/gi,""),C=$("input[name='companyLogoHide']",a).val(),S=!1;C!=g&&(S=!0),$(a).find(":submit").val("保存中...").attr("disabled",!0),$.ajax({url:ctx+"/workExperience/save.json",type:"post",data:{id:h,companyLogo:g,companyName:v,positionName:b,startDate:w,endDate:y,workContent:k,resubmitToken:c,expid:_,isUploadLogo:S},dataType:"json"}).done(function(c){if(globals.token=c.resubmitToken,c.success){R(c),updateResumeTime(c.content.refreshTime);var rt=c.content.infoCompleteStatus.score,h=parseInt($.trim($(".mr_bfb").text())),_=amountScore-h+rt;updateRatioRM(rt,_),$(".mr_cancel",a).trigger("click");var g=c.content.workExperiences;P(g)}else $(a).find(".wrap_editor").after('<span for="ueditor_textarea_editorValue" class="error">'+c.msg+"</span>");$(a).find(":submit").val("保 存").attr("disabled",!1)})}})}function P(a){var c=(lt.obj.find(".list_show"),lt.obj.find(".list_show .updatejob_wrap .mr_jobe_list")),h=lt.obj.find(".list_show .new_addjob_hide .mr_jobe_list"),_=lt.obj.find(".list_show .new_addjob_hide .jobExpForm");if(a.length>c.length){for(var g=[],v=0;v<a.length;v++)g.push(a[v].id);for(var b=g[0],i=0;i<g.length;i++)b<g[i]&&(b=g[i]);var w=g.indexOf(b);a[w].companyLogo&&$(h).find("img").attr("src",ctx+"/"+a[w].companyLogo),$(h).find("h4").text(a[w].companyName),$(h).find("h4").next().text(a[w].positionName),$(h).find(".mr_edit").attr({"data-expid":a[w].id,"data-logo":a[w].companyLogo,"data-comname":a[w].companyName,"data-posname":a[w].positionName,"data-startime":a[w].startDate,"data-endtime":a[w].endDate,"data-content":a[w].workContent}),$(h).find(".mr_content_r span:eq(0)").text(a[w].startDate),$(h).find(".mr_content_r span:eq(2)").text(a[w].endDate),a[w].workContent?($(h).find(".mr_content_m").show(),$(h).find(".mr_content_m").html(a[w].workContent)):$(h).find(".mr_content_m").hide(),$(_).find(".mr_expid").val(a[w].id),$(_).find(".mr_sta_time .mr_btn").val(a[w].startDate),$(_).find(".mr_sta_time .startTime").val(a[w].startDate),$(_).find(".mr_end_time .mr_btn").val(a[w].endDate),$(_).find(".mr_end_time .endTime").val(a[w].endDate),a[w].companyLogo&&""!=a[w].companyLogo&&$(_).find('input[name="companyLogoHide"]').val(ctx+"/"+a[w].companyLogo),w>0?($(c[w-1]).next().after($(".new_addjob_hide").html()),$(c[w-1]).next().next().next().find(".companyName").val(a[w].companyName),$(c[w-1]).next().next().next().find(".autoPosition").val(a[w].positionName),$(c[w-1]).next().next().next().find("script").attr("id","ueditor_"+a[w].id),$(c[w-1]).next().next().next().find(".mr_upload_logo .companyLogo_new_hide").attr("id","upcompanyLogo_"+a[w].id)):(lt.obj.find(".list_show .updatejob_wrap").prepend($(".new_addjob_hide").html()),$(lt.obj.find(".list_show .updatejob_wrap").find(".jobExpForm")[0]).find(".companyName").val(a[w].companyName),$(lt.obj.find(".list_show .updatejob_wrap").find(".jobExpForm")[0]).find(".autoPosition").val(a[w].positionName),$(lt.obj.find(".list_show .updatejob_wrap").find(".jobExpForm")[0]).find("script").attr("id","ueditor_"+a[w].id),$(lt.obj.find(".list_show .updatejob_wrap").find(".jobExpForm")[0]).find(".mr_upload_logo .companyLogo_new_hide").attr("id","upcompanyLogo_"+a[w].id))}else for(var i=0;i<a.length;i++)a[i].companyLogo&&($(c[i]).find("img").attr("src",ctx+"/"+a[i].companyLogo),$(c[i]).next("form").find('input[name="companyLogoHide"]').val(ctx+"/"+a[i].companyLogo)),$(c[i]).find("h4").text(a[i].companyName),$(c[i]).find("h4").next().text(a[i].positionName),$(c[i]).find(".mr_edit").attr({"data-expid":a[i].id,"data-logo":a[i].companyLogo,"data-comname":a[i].companyName,"data-posname":a[i].positionName,"data-startime":a[i].startDate,"data-endtime":a[i].endDate,"data-content":a[i].workContent}),$(c[i]).find(".mr_content_r span:eq(0)").text(a[i].startDate),$(c[i]).find(".mr_content_r span:eq(2)").text(a[i].endDate),a[i].workContent?($(c[i]).find(".mr_content_m").show(),$(c[i]).find(".mr_content_m").html(a[i].workContent)):$(c[i]).find(".mr_content_m").hide()}function E(){vt.obj.find(".ul_edubg").on("click","li",function(e){e.stopPropagation();var a=$(this).parent().parent();a.prev().val($(this).text()),a.prev().prev().val($(this).text()),a.hide(),$(".select_color").removeClass("select_color");var c=$(this).parents("form").validate().element(a.prev().prev());c&&(a.next().hide(),$(this).parents(".mr_timed_div").css("margin-bottom","0"))})}function z(){vt.obj.find(".ul_eduy").on("click","li",function(e){e.stopPropagation();var a=$(this).parent().parent();a.prev().val($(this).text()),a.prev().prev().val($(this).text()),a.hide(),$(".select_color").removeClass("select_color");var c=$(this).parents("form").validate().element(a.prev().prev());c&&(a.next().hide(),$(this).parents(".mr_timed_div").css("margin-bottom","0"))})}function I(a){var c=a;$('input[name="schoolName"]',c).val(""),$('input[name="positionName"]',c).val(""),$('input[name="degree_val"]',c).val(""),$('input[name="degree_text"]',c).val(""),$('input[name="graduate"]',c).val(""),$('input[name="graduate_text"]',c).val("")}function N(){$("#addEduForm").validate({rules:vt.rules,messages:vt.messages,errorPlacement:function(a,c){vt.errorPlacement(a,c)},submitHandler:function(a){var c=globals.resumeId,h=$('input[name="schoolName"]',a).val(),_=$('input[name="positionName"]',a).val(),g=$('input[name="degree_val"]',a).val(),v=$('input[name="graduate"]',a).val(),b=globals.token;$(a).find(":submit").val("保存中...").attr("disabled",!0),$.ajax({url:ctx+"/educationExperience/save.json",type:"post",data:{id:c,schoolName:h,professional:_,education:g,endYear:v,resubmitToken:b},dataType:"json"}).done(function(c){if(c.success){var h=c.content.isOpenMyResume,_=$(".toggle"),g=c.content.firstOpen;globals.isFirstOpen=g,h&&($(".openresume_tip").hide(),globals.isFirstOpen?(globals.isOpenResume="3",$(".firstset").show()):globals.isOpenResume=_.hasClass("toggle-off")?"0":"1"),R(c),globals.token=c.resubmitToken,I(a),updateResumeTime(c.content.refreshTime);var rt=c.content.infoCompleteStatus.score,v=parseInt($.trim($(".mr_bfb").text())),b=amountScore-v+rt;updateRatioRM(rt,b),vt.obj.find(".mr_head_r").trigger("click");var w=c.content.educationExperiences;
M(w);var y=vt.obj.find(".mr_empty_add");y.not(":hidden")&&y.hide();var k=$(".mr_module .flag_edu");k.is(":hidden")||k.addClass("dn")}else alert(c.msg);$(a).find(":submit").val("保 存").attr("disabled",!1)})}})}function F(){$("#upEduForm").validate({rules:vt.rules,messages:vt.messages,errorPlacement:function(a,c){vt.errorPlacement(a,c)},submitHandler:function(a){var c=globals.resumeId,h=$('input[name="schoolName"]',a).val(),_=$('input[name="positionName"]',a).val(),g=$('input[name="degree_val"]',a).val(),v=$('input[name="graduate"]',a).val(),b=globals.token;$(a).find(":submit").val("保存中...").attr("disabled",!0),$.ajax({url:ctx+"/educationExperience/save.json",type:"POST",data:{id:c,schoolName:h,professional:_,education:g,endYear:v,resubmitToken:b,eduid:oMoudle.eduId},dataType:"json"}).done(function(c){if(c.success){R(c),globals.token=c.resubmitToken,I(a),updateResumeTime(c.content.refreshTime);var rt=c.content.infoCompleteStatus.score,h=parseInt($.trim($(".mr_bfb").text())),_=amountScore-h+rt;updateRatioRM(rt,_),$(".mr_cancel",a).trigger("click");var g=c.content.educationExperiences;M(g)}else alert(c.msg)})}})}function M(a){for(var c="",i=0;i<a.length;i++)c+='<div class="clearfixs mb46 mr_jobe_list">',c+='<div class="mr_content_l">',""!=a[i].schoolBadge&&(c+='<div class="l1">',c+='<img src="'+GLOBAL_DOMAIN.lgsctx+"/"+a[i].schoolBadge+'" alt="学校Logo"/>',c+="</div>"),c+='<div class="l2">',c+="<h4>"+a[i].schoolName+"</h4>",c+="<span>"+a[i].education+" · "+a[i].professional+"</span>",c+="</div>",c+="</div>",c+='<div class="mr_content_r">',c+='<div class="mr_edit mr_c_r_t" data-eduid = "'+a[i].id+'" data-schoolname = "'+a[i].schoolName+'" data-edu = "'+a[i].education+'" data-pro = "'+a[i].professional+'" data-date = "'+a[i].endDate+'">',c+="<i></i><em>编辑</em>",c+="</div>",c+=1==a[i].whetherGraduate?"<span>"+a[i].endDate+"年毕业</span>":"<span>"+a[i].endDate+"年毕业( 预计 )</span>",c+="</div>",c+="</div>";vt.obj.find(".list_show").html(c)}function R(a){var c=($.trim($(".base_info .j").text()),$(".ul_shenfen")),h=a.content.resume,_=a.content.latestWorkExperience,g=a.content.latestEducationExperience,v=h.userIdentity,b=h.workYear;if(_)var w=_.positionName+" · "+_.companyName;else var w="·";if(g)var y=g.professional+" · "+g.schoolName;else var y="·";var k,C,S,j=$.trim(y),T=$.trim(w);switch(k=$("span.shenfen"),0==k.length&&(k=$("<span></span>").addClass("shenfen"),$(".info_t").prepend(k)),C=$("<i></i>"),v){case 0:"应届毕业生"==$.trim(b)?(S=$("·"!=j?"<em data-id='0' title='"+y+"'>"+y+"</em>":"<em data-id='0' title='"+w+"'>"+w+"</em>"),k.removeClass("dn").empty(),k.append(C).append(S)):(S=$("·"!=T?"<em data-id='0' title='"+w+"'>"+w+"</em>":"<em data-id='0' title='"+y+"'>"+y+"</em>"),k.removeClass("dn").empty(),k.append(C).append(S)),"·"==$.trim(k.text())&&k.addClass("dn");break;case 1:S=$("·"!=j?"<em data-id='1' title='"+y+"'>"+y+"</em>":"<em data-id='2' title='"+w+"'>"+w+"</em>"),k.removeClass("dn").empty(),k.append(C).append(S),"·"==$.trim(k.text())&&k.addClass("dn");break;case 2:S=$("·"!=T?"<em data-id='2' title='"+w+"'>"+w+"</em>":"<em data-id='1' title='"+y+"'>"+y+"</em>"),k.removeClass("dn").empty(),k.append(C).append(S),"·"==$.trim(k.text())&&k.addClass("dn")}var P=c.find("li[data-id='2']"),E=c.find("li[data-id='1']");if("·"!=T)if(P.length>0)P.text(w);else{var z=$("<li></li>").attr({"data-id":"2",title:w}).text(w);c.append(z)}else P.remove();if("·"!=j)if(E.length>0)E.text(y);else{var I=$("<li></li>").attr({"data-id":"1",title:y}).text(y);c.append(I)}else E.remove()}function O(a){$("#addProForm").submit(function(){a.sync()}).validate({rules:{projectName:{required:!0,maxlenStr:50},thePost:{required:!0,maxlenStr:30},startTime:{required:!0},endTime:{required:!0},editorValue:{required:!1,ueditorLength:[10,1600]},pro_link:{maxlenStr:60,checkUrl:!0}},messages:{projectName:{required:"必填",maxlenStr:"请输入100字符以内的项目名称"},thePost:{required:"必填",maxlenStr:"哇，你的职责这么厉害，你的公司知道吗？60个字符以内哦"},startTime:{required:"必填"},endTime:{required:"必填"},editorValue:{ueditorLength:"请输入10-1600字符的项目描述"},pro_link:{maxlenStr:"链接太长，目前只支持120字符以内哦",checkUrl:"请输入有效的项目链接"}},errorPlacement:function(a,c){"hidden"==c.attr("type")?($(c).parent().css("margin-bottom","25px"),a.appendTo($(c).parent())):c.is("textarea")?$(c).parent().find(".wrap_editor").after(a):a.insertAfter($(c).parent())},submitHandler:function(c){var h=$('input[name="projectName"]',c).val(),_=$('input[name="thePost"]',c).val(),g=$('input[name="startTime"]',c).val(),v=$('input[name="endTime"]',c).val(),b=a.getContent().replace(/<(?!ol|li|ul|p|\/ol|\/li|\/ul|\/p)[^>]*>/g,"").replace(/<([a-z][a-z0-9]*)[^>]*?(\/?)>/gi,"<$1$2>").replace(/&nbsp;/gi,""),w=$('input[name="pro_link"]',c).val();$(c).find(":submit").val("保存中...").attr("disabled",!0),myresumeCommon.utils.addHttpPrefix("http://|https://",w,function(a){w=""==w?"":a}),$.ajax({url:ctx+"/"+myresumeCommon.requestTargets.projectExpSave,type:"POST",data:{id:globals.resumeId,projectid:"",projectName:$.trim(h),positionName:$.trim(_),startDate:$.trim(g),endDate:$.trim(v),projectRemark:$.trim(b),dutyRemark:"",projectUrl:$.trim(w)},dataType:"json"}).done(function(a){if(a.success){X="",Q=!0,U(),$("#addProForm").addClass("dn");var h=a&&a.content&&a.content.projectExperiences||[];A(h),wt.AddCancel();var _=wt.obj.find(".mr_empty_add");h.length?_.hide():_.show(),updateResumeTime(a.content.refreshTime),""!=oMoudleScore.projectExpScore&&(amountScore-=oMoudleScore.projectExpScore),oMoudleScore.projectExpScore="";var rt=a.content.infoCompleteStatus.score,g=parseInt($.trim($(".mr_bfb").text())),v=amountScore-g+rt;updateRatioRM(rt,v),wt.checkState(),xt.reset(),yt.reset()}else $(c).find(".wrap_editor").after('<span for="ueditor_textarea_editorValue" class="error">'+a.msg+"</span>");$(c).find(":submit").val("保 存").attr("disabled",!1)})}})}function D(a){$("#currentUpProForm").submit(function(){J.sync()}).validate({rules:{projectName:{required:!0,maxlenStr:50},thePost:{required:!0,maxlenStr:30},startTime:{required:!0},endTime:{required:!0},editorValue:{required:!1,ueditorLength:[10,1600]},pro_link:{maxlenStr:60,checkUrl:!0}},messages:{projectName:{required:"必填",maxlenStr:"请输入100字符以内的项目名称"},thePost:{required:"必填",maxlenStr:"哇，你的职责这么厉害，你的公司知道吗？60个字符以内哦"},startTime:{required:"必填"},endTime:{required:"必填"},editorValue:{ueditorLength:"请输入10-1600字符的项目描述"},pro_link:{maxlenStr:"链接太长，目前只支持120字符以内哦",checkUrl:"请输入有效的项目链接"}},errorPlacement:function(a,c){"hidden"==c.attr("type")?($(c).parent().css("margin-bottom","25px"),a.appendTo($(c).parent())):c.is("textarea")?$(c).parent().find(".wrap_editor").after(a):a.insertAfter($(c).parent())},submitHandler:function(c){var h=$('input[name="projectName"]',c).val(),_=$('input[name="thePost"]',c).val(),g=$('input[name="startTime"]',c).val(),v=$('input[name="endTime"]',c).val(),b=J.getContent().replace(/<(?!ol|li|ul|p|\/ol|\/li|\/ul|\/p)[^>]*>/g,"").replace(/<([a-z][a-z0-9]*)[^>]*?(\/?)>/gi,"<$1$2>").replace(/&nbsp;/gi,""),w=$('input[name="pro_link"]',c).val();$(c).find(":submit").val("保存中...").attr("disabled",!0),myresumeCommon.utils.addHttpPrefix("http://|https://",w,function(a){w=""==w?"":a}),$.ajax({url:ctx+"/"+myresumeCommon.requestTargets.projectExpSave,type:"POST",data:{id:globals.resumeId,projectid:a,projectName:$.trim(h),positionName:$.trim(_),startDate:$.trim(g),endDate:$.trim(v),projectRemark:$.trim(b),dutyRemark:"",projectUrl:$.trim(w)},dataType:"json"}).done(function(a){if($(c).find(":submit").val("保存").attr("disabled",!1),a.success){X="",Q=!0,U();var h=a&&a.content&&a.content.projectExperiences||[];A(h),wt.UpCancel();var _=wt.obj.find(".mr_empty_add");h.length?_.hide():_.show(),updateResumeTime(a.content.refreshTime),""!=oMoudleScore.projectExpScore&&(amountScore-=oMoudleScore.projectExpScore),oMoudleScore.projectExpScore="";var rt=a.content.infoCompleteStatus.score,g=parseInt($.trim($(".mr_bfb").text())),v=amountScore-g+rt;updateRatioRM(rt,v),wt.checkState()}else $(c).find(".wrap_editor").after('<span for="ueditor_textarea_editorValue" class="error">'+a.msg+"</span>")})}})}function A(a){var c=(wt.obj.find(".list_show"),wt.obj.find(".list_show .updatepro_wrap .mr_jobe_list")),h=wt.obj.find(".list_show .new_addpro_hide .mr_jobe_list");if(wt.obj.find(".list_show .new_addpro_hide .proExpForm"),a.length>c.length){for(var _=[],g=0;g<a.length;g++)_.push(a[g].id);for(var v=_[0],i=0;i<_.length;i++)v<_[i]&&(v=_[i]);var b=_.indexOf(v);$(h).attr("data-id",a[b].id),a[b].projectUrl&&""!=a[b].projectUrl?($(h).find(".projectTitle").attr("href",a[b].projectUrl),$(h).find(".projectTitle").attr("target","_blank"),$(h).find(".projectTitle").html(a[b].projectName+"<i></i>")):($(h).find(".projectTitle").addClass("nourl"),$(h).find(".projectTitle").text(a[b].projectName)),$(h).find(".l2 p").text(a[b].positionName),$(h).find(".mr_edit").attr("data-id",a[b].id),$(h).find(".mr_edit").attr("data-remark",a[b].projectRemark),$(h).find(".mr_content_r span:eq(0)").text(a[b].startDate),$(h).find(".mr_content_r span:eq(2)").text(a[b].endDate),a[b].projectRemark&&""!=a[b].projectRemark?$(h).find(".mr_content_m").html(a[b].projectRemark):$(h).find(".mr_content_m").addClass("dn"),b>0?($(c[b-1]).next().after(wt.obj.find(".list_show .updatepro_wrap").parent().find(".new_addpro_hide").html()),$(c[b-1]).next().next().next().find("script").attr("id","ueditor_"+a[b].id)):(wt.obj.find(".list_show .updatepro_wrap").prepend(wt.obj.find(".list_show .updatepro_wrap").parent().find(".new_addpro_hide").html()),$(wt.obj.find(".list_show .updatepro_wrap").find(".proExpForm")[0]).find("script").attr("id","ueditor_"+a[b].id))}else for(var i=0;i<a.length;i++)for(var g=0;g<c.length;g++)$(c[g]).attr("data-id")==a[i].id&&(a[i].projectUrl&&""!=a[i].projectUrl?($(c[g]).find(".projectTitle").attr("href",a[i].projectUrl),$(c[g]).find(".projectTitle").attr("target","_blank"),$(c[g]).find(".projectTitle").html(a[i].projectName+"<i></i>")):($(c[g]).find(".projectTitle").addClass("nourl"),$(c[g]).find(".projectTitle").text(a[i].projectName)),$(c[g]).find(".l2 p").text(a[i].positionName),$(c[g]).find(".mr_edit").attr("data-id",a[i].id),$(c[g]).find(".mr_edit").attr("data-remark",a[i].projectRemark),$(c[g]).find(".mr_content_r span:eq(0)").text(a[i].startDate),$(c[g]).find(".mr_content_r span:eq(2)").text(a[i].endDate),$(c[g]).find(".mr_content_m").html(a[i].projectRemark))}function H(){var a=$(".mr_empty_add");a.not("hidden").addClass("addgrey"),a.bind("click",L),$(".mr_head_r").each(function(){$(this).css("cursor","default");var a=$(this).children("em").text();"添加"==a?$(this).addClass("mr_add_grey"):"编辑"==a&&$(this).addClass("mr_up_grey")}),$(".mr_c_r_t").each(function(){$(this).css("cursor","default");var a=$(this).children("em").text();"添加"==a?$(this).addClass("mr_add_grey"):"编辑"==a&&$(this).addClass("mr_up_grey")})}function L(){return!1}function U(){var a=$(".mr_empty_add");a.not("hidden").removeClass("addgrey"),a.unbind("click",L),$(".mr_head_r").each(function(){$(this).css("cursor","pointer");var a=$(this).children("em");$(this).hasClass("mr_add_grey")?(a.text("添加"),$(this).removeClass("mr_add_grey")):$(this).hasClass("mr_up_grey")&&(a.text("编辑"),$(this).removeClass("mr_up_grey"))}),$(".mr_c_r_t").each(function(){$(this).css("cursor","pointer");var a=$(this).children("em");$(this).hasClass("mr_add_grey")?(a.text("添加"),$(this).removeClass("mr_add_grey")):$(this).hasClass("mr_up_grey")&&(a.text("编辑"),$(this).removeClass("mr_up_grey"))}),Q=!0,X=""}function W(a,c){var h=parseInt($.trim($(".mr_bfb").text())),_=0;switch(a){case"expectJob":_=parseInt(oMdScore.expectJobsScore),oMoudleScore.expectJobsScore=_;break;case"projectExperience":_=parseInt(oMdScore.projectExpScore),oMoudleScore.projectExpScore=_;break;case"worksShow":_=parseInt(oMdScore.workShowScore),oMoudleScore.workShowScore=_;break;case"skillsAssess":_=parseInt(oMdScore.skillScore),oMoudleScore.skillScore=_;break;case"selfDescription":_=parseInt(oMdScore.myRemarkScore),oMoudleScore.myRemarkScore=_;break;default:return}0==c?amountScore+=_:amountScore-=_,amountScore>=100&&(amountScore=100),h>amountScore&&(amountScore=h),updateRatioRM(h,amountScore)}var J=void 0,B=$("#customTitleName");$("#customBlock .cust_title span").text(""==B.val()?"自定义标题":B.val()),9==$(".md_flag").length?$(".mr_module_add").addClass("dn"):$(".mr_module_add").removeClass("dn"),initTitlePosition();var Y=globals.initRatio;updateRatioRM(Y,Y);var V=$(".mr_myresume_r .scroll_fix").offset();$(window).scroll(function(){var a=$(window).scrollTop();V&&V.top<=a?$(".mr_myresume_r .scroll_fix").addClass("mr_myresume_r_fix"):$(".mr_myresume_r .scroll_fix").removeClass("mr_myresume_r_fix")}),0==$(".m_hide").hasClass("dn").length&&$(".mr_module_add").hide();var X="",Z="",Q=!0;window.onbeforeunload=function(){return Q?void 0:"内容还未保存，确认离开该页面吗？ "},a(),$.validator.addMethod("ueditorLength",function(a,c,h){var _=a.replace(/<(?!ol|li|ul|p|\/ol|\/li|\/ul|\/p)[^>]*>/g,"").replace(/<([a-z][a-z0-9]*)[^>]*?(\/?)>/gi,"<$1$2>").replace(/&nbsp;/gi,""),g=getStrLen(_);return g<=h[1]&&g>=h[0]?!0:!1},$.validator.format("请输入长度为 {0} - {1} 的字长"));var G=function(){$(".companyName").autocomplete({source:function(a,c){var h=new Array;$.ajax({type:"POST",async:!1,url:sctx+"/suggestion",dataType:"jsonp",jsonp:"suggestCompanyback",data:{input:a.term,type:2,num:6}}).done(function(a){if(null!=a&&void 0!=a)for(var _ in a){var g=a[_];if(null!=g&&void 0!=g&&g.length>0)for(var i in g)h.push(g[i].cont)}c(h)})},minLength:1})};$(".mr_created").delegate(".companyName","keydown keyup",function(){myresumeCommon.utils.throttle(G,[],this,300)});var K=function(){$(".autoPosition").autocomplete({source:function(a,c){var h=new Array;$.ajax({type:"POST",async:!1,url:sctx+"/suggestion",dataType:"jsonp",jsonp:"suggestPositionback",data:{input:a.term,type:5,num:6}}).done(function(a){if(null!=a&&void 0!=a)for(var _ in a){var g=a[_];if(null!=g&&void 0!=g&&g.length>0)for(var i in g)h.push(g[i].cont)}c(h)})},minLength:1})};$(".mr_created").delegate(".autoPosition","keydown keyup",function(){myresumeCommon.utils.throttle(K,[],this,300)});var et=function(){$(".autoCollege").autocomplete({source:function(a,c){var h=new Array;$.ajax({type:"POST",async:!1,url:sctx+"/suggestion",dataType:"jsonp",jsonp:"suggestCollegeback",data:{input:a.term,type:3,num:6}}).done(function(a){if(null!=a&&void 0!=a)for(var _ in a){var g=a[_];if(null!=g&&void 0!=g&&g.length>0)for(var i in g)h.push(g[i].cont)}c(h)})},minLength:1})};$(".mr_created").delegate(".autoCollege","keydown keyup",function(){myresumeCommon.utils.throttle(et,[],this,300)});var tt=function(){$(".autoMajor").autocomplete({source:function(a,c){var h=new Array;$.ajax({type:"POST",async:!1,url:sctx+"/suggestion",dataType:"jsonp",jsonp:"suggestMajorback",data:{input:a.term,type:4,num:6}}).done(function(a){if(null!=a&&void 0!=a)for(var _ in a){var g=a[_];if(null!=g&&void 0!=g&&g.length>0)for(var i in g)h.push(g[i].cont)}c(h)})},minLength:1})};$(".mr_created").delegate(".autoMajor","keydown keyup",function(){myresumeCommon.utils.throttle(tt,[],this,300)}),$(".mr_name_edit .ed_name,.mr_intro_edit .ed_name").bind("click",function(e){e.stopPropagation(),$(".select_color").removeClass("select_color"),$(this).addClass("select_color")}),$(".mr_r_nav ul li:first").bind("click",function(e){e.stopPropagation();var a=$(this).find("em");a.is(":hidden")||a.addClass("dn")}),$(".mr_sns")&&$(".mr_sns a").length>0&&c(),$(".mr_sns").delegate("a","hover",function(){$(this).find("span").toggle()}),$(".mr_headfile").hover(function(){$(".shadow").show()},function(){$(".shadow").hide()}),$(".mr_p_name,.mr_p_info,.mr_p_introduce").hover(function(){$(this).addClass("mr_active").find(".mr_edit").removeClass("dn")},function(){$(this).removeClass("mr_active").find(".mr_edit").addClass("dn")}),$(".mr_p_name .mr_edit").bind("click",function(){$(".mr_p_name").hide(),$("#mr_name").val($(".mr_p_name .mr_name").text()),$(".mr_name_edit").removeClass("dn"),$("#nameForm").find("input#mr_name")[0].focus(),Q=!1});var it=$("input#mr_name");it.on("keyup",function(){var a=$.trim(it.val()).length;0==a&&$(this).attr("placeholder","姓名")}),$(".mr_name_edit .cancel").bind("click",function(){$(".mr_p_name").show(),$(".mr_name_edit").addClass("dn"),Q=!0}),$(".mr_p_introduce .mr_edit").bind("click",function(){$(".mr_p_introduce").hide(),"0"==$(this).attr("data-type")&&$("#mr_intro").val($(".mr_p_introduce .mr_intro").text()),$(".mr_intro_edit").removeClass("dn"),$("#mr_intro").focus(),$("#introduceForm .mroneError").hide(),Q=!1}),$(".mr_intro_edit .cancel").bind("click",function(){$(".mr_p_introduce").show(),$(".mr_intro_edit").addClass("dn"),Q=!0}),$(".a").hover(function(){var a=$(".birth_span"),c=$.trim(a.text()),h=$(".a");""!=c&&"出生"!=c?(a.removeClass("dn"),h.css("cursor","pointer")):h.css("cursor","default")},function(){setTimeout(function(){var a=$(".birth_span");a.addClass("dn")},90)}),jQuery.validator.addMethod("truename",function(a,c){var h=/^([a-zA-Z ]+|[\u4e00-\u9fa5]+)$/;return this.optional(c)||h.test(a)},"请输入有效的公司简称"),jQuery.validator.addMethod("truename2",function(a,c){var h=/([·`~!@#$^&':;,?~！……&；：。，、？=])/;return this.optional(c)||!h.test(a)},"请输入有效的名字"),$("#nameForm").validate({rules:{mr_name:{required:!0,truename2:!0,rangeLenStr:[1,15]}},messages:{mr_name:{required:"必填",truename2:"格式错误",rangeLenStr:"请输入真实姓名"}},errorPlacement:function(a,c){a.appendTo($(c).parent()),$(".c_section span.error").css("margin","5px 0 10px 138px")},submitHandler:function(a){var c=globals.token,h=$('input[name="mr_name"]',a).val(),_=globals.resumeId;h=$.trim(h),$(a).find(":submit").val("保存中...").attr("disabled",!0),$.ajax({url:ctx+"/resume/updateUserName.json",type:"POST",data:{name:h,id:_,resubmitToken:c},dataType:"json"}).done(function(c){if(c.success){Q=!0,globals.token=c.resubmitToken,$("#nowrap").html(h+"&nbsp;");var _=c.content.resume,g=_.name;$(".mr_name_edit").addClass("dn"),$(".mr_name").html(g).parent().show();var v=c.content.url;$("#body").append("<iframe id='ifr' style='display:none;' src='"+v+"'></iframe>")}else alert(c.msg);$(a).find(":submit").val("保 存").attr("disabled",!1)})}}),$("#introduceForm").on("keyup",'input[name="mr_intro"]',function(){var a=$(this),c=$.trim(a.val()),_=h(c);0==_?(Q=!0,a.siblings("span.mroneError").text("必填").css("display","block")):4>_?(Q=!0,a.siblings("span.mroneError").text("太短了").css("display","block")):_>=4&&58>=_?a.siblings("span.mroneError").hide():_>58&&a.siblings("span.mroneError").text("请输入4-58个字符的介绍").css("display","block")}),$("#introduceForm .save").click(function(){var a=$(this),c=$.trim($("#introduceForm #mr_intro").val()),_=h(c);if(0==_)Q=!0,a.siblings("span.mroneError").text("必填").css("display","block");else if(4>_)Q=!0,a.siblings("span.mroneError").text("太短了").css("display","block");else if(_>=4&&58>=_){var g=$("#introduceForm"),v=globals.resumeId,b=$('input[name="mr_intro"]',g).val();$(g).find(":submit").val("保存中...").attr("disabled",!0);var w=globals.token;$.ajax({url:ctx+"/resume/oneWord.json",type:"POST",data:{oneWord:b,resubmitToken:w,id:v},dataType:"json"}).done(function(a){if(a.success){globals.token=a.resubmitToken,$(".mr_intro_edit").addClass("dn");var c=$(".mr_intro");c.hasClass("mr_intro_grey")&&c.removeClass("mr_intro_grey").addClass("mr_intro_normal"),c.text(b).attr("title",b).parent().show();var h=a.content.infoCompleteStatus.score,_=parseInt($.trim($(".mr_bfb").text())),v=amountScore-_+h;updateRatioRM(h,v)}else alert(a.msg);$(g).find(":submit").val("保 存").attr("disabled",!1),Q=!0})}else _>58&&a.siblings("span.mroneError").text("请输入4-58个字符的介绍").show()}),$(".mr_created,.mr_uncreate").delegate(".normal_s","click",function(e){e.stopPropagation();var a=$(this).find(".xl_list"),c=a.is(":hidden");$(".xl_list").hide(),$(".select_color").removeClass("select_color"),c?($(this).addClass("select_color"),a.show()):a.hide(),dt&&dt.hide(),mt&&mt.hide(),ct&&ct.hide()}),$(".mr_created,.mr_uncreate").delegate(".email_s,.mobile_s","focus",function(e){e.stopPropagation();var a=$(this).find(".xl_list"),c=a.is(":hidden");$(".xl_list").hide(),$(".select_color").removeClass("select_color"),c?($(this).addClass("select_color"),a.show()):a.hide(),dt&&dt.hide(),mt&&mt.hide(),ct&&ct.hide()}),$(".mr_self_state .mr_self_s").bind("click",function(e){e.stopPropagation(),$(".form_wrap").removeClass("select_color");var a=$(this).find(".xl_list");a.is(":hidden")&&$(this).addClass("select_color"),a.toggle()}),$(".mr_self_state .mr_self_s").hover(function(){$(this).hasClass("active")&&$(this).removeClass("active")},function(){var a=$(this).find(".xl_list");a.is(":hidden")&&$(this).addClass("active")}),$("#mr_mobile,#mr_email").click(function(e){e.stopPropagation(),$(".select_color").removeClass("select_color"),$(this).parent().addClass("select_color"),mt.hide()}),$(".xl_list").bind("click",function(e){e.stopPropagation()}),$(".mr_my_qr").hover(function(){$(this).addClass("open")},function(){$(this).removeClass("open")}),$(document).click(function(){var a=$(".mr_years");a.find(".xl_list").is(":visible")&&""==$("#mr_year").val()&&$("<span class='error'>").text("必选").appendTo(a);var c=$(".mr_months");c.find(".xl_list").is(":visible")&&""==$("#mr_month").val()&&$("<span class='error'>").text("必选").appendTo(c),$(".xl_list").hide(),$(".select_color").removeClass("select_color");var h=$(".mr_down_tip");h.is(":hidden")||h.addClass("dn"),dt&&dt.hide(),mt&&mt.hide(),ct&&ct.hide(),xt&&xt.hide(),yt&&yt.hide(),bt&&bt.hide(),$t&&$t.hide(),pt&&pt.hide(),ft&&ft.hide(),ut&&ut.hide(),ht&&ht.hide(),xt&&xt.hide(),yt&&yt.hide();var _=$(".mr_self_state .mr_self_s");_.hasClass("active")||_.addClass("active");var g=$(".set_default_wrap");g.hasClass("active")&&g.trigger("click")}),$(".ul_xl").delegate("li","click",function(){$("#xl").val($(this).text()),$(this).parent().parent().hide(),$(".select_color").removeClass("select_color")}),$(".ul_gznx").delegate("li","click",function(){var a=$(this).text();if($("#gznx").val(a),"应届毕业生"==$.trim(a)){var c=$(".ul_shenfen li[data-id = '1']");0!=c.length&&($("#shenfen").val(c.text()),globals.personIdFlag="1")}else{var h=$(".ul_shenfen li[data-id = '2']");0!=h.length&&($("#shenfen").val(h.text()),globals.personIdFlag="2")}$(this).parent().parent().hide(),$(".select_color").removeClass("select_color")}),$(".mr_years .normal_s, .mr_months .normal_s").click(function(){$(this).parent().find("span.error").remove()}),$(".ul_year").delegate("li","click",function(){var a=$("#mr_year").val();$("#mr_year").val($(this).text()),$(this).parent().parent().hide(),$(".select_color").removeClass("select_color"),a!=$(this).text()&&!!$("#mr_month").val()&&function(a,c){$("#olinfoForm .mr_days").show().find("#mr_day").val("01");for(var h=getCountDays(a,c),_=[],i=1;h>=i;i++)_.push(10>i?"<li>0"+i+"</li>":"<li>"+i+"</li>");$("#olinfoForm .mr_days .ul_day").html(_.join(""))}($("#mr_year").val(),$("#mr_month").val())}),$(".ul_month").delegate("li","click",function(){var a=$("#mr_month").val();$("#mr_month").val($(this).text()),$(this).parent().parent().hide(),$(".select_color").removeClass("select_color"),a!=$(this).text()&&!!$("#mr_year").val()&&function(a,c){$("#olinfoForm .mr_days").show().find("#mr_day").val("01");for(var h=getCountDays(a,c),_=[],i=1;h>=i;i++)_.push(10>i?"<li>0"+i+"</li>":"<li>"+i+"</li>");$("#olinfoForm .mr_days .ul_day").html(_.join(""))}($("#mr_year").val(),$("#mr_month").val())}),$(".ul_day").delegate("li","click",function(){$("#mr_day").val($(this).text()),$(this).parent().parent().hide(),$(".select_color").removeClass("select_color")}),$(".ul_shenfen").delegate("li","click",function(){$("#shenfen").val($(this).text()),globals.personIdFlag=$(this).attr("data-id"),$(this).parent().parent().hide(),$(".select_color").removeClass("select_color")}),$(".ul_self_state").delegate("li","click",function(){var a=globals.token,c=$(this).text(),h=$(this);$.ajax({url:ctx+"/resume/updateUserStatus.json",type:"post",data:{status:c,resumeId:globals.resumeId,resubmitToken:a},dataType:"json"}).done(function(a){a.success?(globals.resubmitToken=a.resubmitToken,updateResumeTime(a.content.refreshTime),$("#self_state").val(c),h.parent().parent().hide(),$(".select_color").removeClass("select_color")):alert(a.msg)})}),$(".mr_sex .mr_man").bind("click",function(){$(this).addClass("active").find("i").addClass("active"),$(".mr_sex .mr_women").removeClass("active").find("i").removeClass("active")}),$(".mr_sex .mr_women").bind("click",function(){$(this).addClass("active").find("i").addClass("active"),$(".mr_sex .mr_man").removeClass("active").find("i").removeClass("active")}),$(".sns_area").delegate('input[id^="sns"]',"click",function(e){e.stopPropagation(),$(".select_color").removeClass("select_color"),$(this).parent().addClass("select_color")}),$(".sns_area").delegate(".sns_del","click",function(){var a=$(this).parent().find("i").attr("class");a="."+a,$(this).parent().remove(),$(".mr_add_m ul .active").removeClass("active"),$(".mr_add_m "+a).show();var c=$(".sns_area .mr_sns_m");return 0==c.length&&($(".mr_add_sns").hide(),$(".sns_empty").show()),!1}),$(".mr_add_m li").hover(function(){$(this).find("span").show()},function(){$(this).find("span").hide()}),$(".mr_locks").hover(function(){$(this).find("em").show()},function(){$(this).find("em").hide()}),$(".mr_add_m ul").delegate("li","click",function(e){e.stopPropagation(),$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")}),$(".mr_add_op .sns_save").bind("click",function(e){e.stopPropagation();var a="";return $(".mr_add_m ul .active").each(function(){var c=$(this).data("flag"),h="sns"+c;a+='<div class="form_wrap mr_sns_m">',a+='    <i class="'+h+'"></i>',a+='    <em class=""></em>',a+='    <a href="javascript:;" class="sns_del"></a>',a+='    <input type="text" id="'+h+'" name="'+h+'" data-sns="'+c+'" class="mr_button" />',a+="</div>"}),$(".mr_add_m ul .active").removeClass("active"),$(".sns_area").append(a),$(".mr_add_m").slideUp("dn"),!1}),$(".mr_add_m").click(function(e){e.stopPropagation()}),$(".mr_add_op .sns_cancel").bind("click",function(e){return e.stopPropagation(),$(".mr_add_m li").removeClass("active"),$(".mr_add_m").slideUp("dn"),!1}),$(".sns_add").bind("click",function(){12!=$(".sns_area .mr_sns_m").length&&($(".mr_add_m li").show(),$(".sns_area i").each(function(){var a=$(this).attr("class");a="."+a,$(".mr_add_m "+a).hide()}),$(".mr_add_m").slideToggle(300))}),$(".sns_add_empty").bind("click",function(){12!=$(".sns_area .mr_sns_m").length&&($(".mr_add_m li").show(),$(".sns_area i").each(function(){var a=$(this).attr("class");a="."+a,$(".mr_add_m "+a).hide()}),$(".mr_add_m").slideToggle(300))}),$(".sns_area").delegate("input[id^='sns']","keyup",function(){$.trim($(this).val())&&$(this).parent().find("em").removeClass("mr_no").removeClass("mr_ok").addClass("mr_ok")});var nt={required:!0,checkUrlNot:!0,maxlength:100};$("#olinfoForm").validate({rules:{mr_year:{required:!0},mr_month:{required:!0},mr_mobile:{required:!0,isMobile:!0,maxlength:11},mr_email:{required:!0,email:!0,maxlength:100},sns1:nt,sns2:nt,sns3:nt,sns4:nt,sns5:nt,sns6:nt,sns7:nt,sns8:nt,sns9:nt,sns10:nt,sns11:nt,sns12:nt},messages:{mr_year:{required:"必选"},mr_month:{required:"必选"},mr_mobile:{required:"必填",isMobile:"目前仅支持11位有效中国大陆号码",maxlength:"目前仅支持11位有效中国大陆号码"},mr_email:{required:"必填",email:"请输入正确的邮箱",maxlength:"输入100个字符以内的邮箱地址"}},errorPlacement:function(a,c){$(c).data("sns")?$(c).parent().find("em").addClass("mr_no"):(a.insertAfter($(c).parent()),$(".c_section span.error").css("margin","5px 0 10px 138px"))},submitHandler:function(a){return $(a).find(":submit").val("保存中...").attr("disabled",!0),$("#sess_submit").one("click",function(){var h=$('input[name="shenfen"]',a).val(),g=$('input[name="mr_year"]',a).val(),v=$('input[name="mr_month"]',a).val(),b=$('input[name="mr_day"]',a).val(),w=$('input[name="xl"]',a).val(),y=$('input[name="gznx"]',a).val(),k=$('input[name="szcs"]',a).val(),C=$('input[name="mr_mobile"]',a).val(),S=$('input[name="mr_email"]',a).val(),j=$(".sns_area input"),T=$(".mr_sex span.active em").text(),P={},E=[],z="",I=globals.token;j.each(function(){var a=$(this).val(),c=$(this).data("sns");P[c]=a;var h={};h.accountId=c,h.accountUrl=a,E.push(h);var _="sns"+c;a=0==$.trim(a).indexOf("http://")||0==$.trim(a).indexOf("https://")?a:"http://"+a,z+="<a href='"+a+"' target='_blank' data-sns='"+c+"' data-site='"+a+"' class='"+_+"'><span><em></em></span></a>"}),E=JSON.stringify(E),$.ajax({url:ctx+"/resume/basic.json",type:"post",data:{highestEducation:w,workYear:y,phone:C,email:S,liveCity:k,birthday:b?g+"."+v+"."+b:g+"."+v,workYear:y,sex:T,type:1,resubmitToken:I,socialAccountJson:E,userIdentity:globals.personIdFlag},dataType:"json"}).done(function(P){if(globals.token=P.resubmitToken,P.success){$("#sess_submit").hide().siblings("input").show(),$(".w_tips").hide(),U(),X="",Q=!0,updateResumeTime(P.content.refreshTime);var rt=P.content.infoCompleteStatus.score,E=parseInt($.trim($(".mr_bfb").text())),I=amountScore-E+rt;updateRatioRM(rt,I),$("#olinfoForm .mr_info_edit").addClass("dn"),$(".mr_infoed .shenfen em").text(h).attr("title",h),y=$('input[name="gznx"]',a).val();var N=y,F=N;if("应届毕业生"!=$.trim(y)?($(".mr_infoed .base_info .job_span").text(y+="工作经验"),N+="工作经验"):$(".mr_infoed .base_info .job_span").text(y),$(".mr_infoed .base_info .s").text(T),P.content.resume.ageNum){var M=$(".mr_infoed .base_info .a").show();M.children(".age").text(P.content.resume.ageNum+"岁"),M.children(".birth_span").html(b?g+"年"+v+"月"+b+"日出生<em></em>":g+"年"+v+"月出生<em></em>")}else $(".mr_infoed .base_info .a").hide();$(".mr_infoed .base_info .x").text(w),$(".mr_infoed .base_info .d").text(k),$(".mr_infoed .mobile em").text(C).attr("title",C),$(".mr_infoed .email em").text(S).attr("title",S),j.length>0?$(".mr_infoed .mr_sns").removeClass("dn"):$(".mr_infoed .mr_sns").addClass("dn"),$(".mr_infoed .mr_sns").html(z);var R=$(".mr_module .flag_work"),O=$("#workExperience"),D=P.content.isOpenMyResume,A=P.content.firstOpen;if("应届毕业生"==y)O.find(".mr_title_c").text("实习经历"),O.find(".mr_empty_add span").text("添加实习经历"),$(".mr_module li[data-md = 'workExperience'] .mr_m_name").text("实习经历"),R.is(":hidden")||R.addClass("dn"),_(!1,D,A);else{if(O.find(".mr_title_c").text("工作经历"),O.find(".mr_empty_add span").text("添加工作经历"),$(".mr_module li[data-md = 'workExperience'] .mr_m_name").text("工作经历"),0==$("#workExperience .mr_jobe_list").length){var R=$(".mr_module .flag_work");R.is(":hidden")&&R.removeClass("dn")}_(!0,D,A)}var H=$(".mr_infoed .mr_edit_on");H.attr("data-sf",$.trim(h.split("·")[0])),H.attr("data-shenfen",h),H.attr("data-sex",T),H.attr("data-xl",w),H.attr("data-gzjy",F),H.attr("data-city",k),H.attr("data-mobile",C),H.attr("data-email",S),H.attr("data-birth-year",g),H.attr("data-birth-month",v),H.attr("data-birth-date",b),$(".mr_p_info").show();var L=$(".mr_ope .mr_cancel");L.attr("data-sf",$.trim(h.split("·")[0])),L.attr("data-shenfen",h),L.attr("data-sex",T),L.attr("data-xl",w),L.attr("data-gzjy",F),L.attr("data-city",k),L.attr("data-mobile",C),L.attr("data-email",S),L.attr("data-birth-year",g),L.attr("data-birth-month",v),L.attr("data-birth-date",b),c()}else alert(P.msg);$(a).find(":submit").val("保 存").attr("disabled",!1)})}),$("#mr_mobile").val()!=$("#sess_phone").val()&&$("#sess_phone").val().length>0&&$("#mr_email").val()!=$("#sess_email").val()&&$("#sess_email").val().length>0?($("#mr_mobile").parent().nextAll("p.w_tips:eq(0)").show(),void $("#sess_submit").show().siblings("input").hide()):$("#mr_mobile").val()!=$("#sess_phone").val()&&$("#mr_mobile").val().length>0&&$("#sess_phone").val().length>0?($("#mr_mobile").parent().nextAll("p.w_tips:eq(1)").show(),void $("#sess_submit").show().siblings("input").hide()):($("#mr_mobile").parent().nextAll("p.w_tips:eq(1)").hide(),$("#mr_email").val()!=$("#sess_email").val()&&$("#mr_email").val().length>0&&$("#sess_email").val().length>0?($("#mr_email").parent().nextAll("p.w_tips:eq(2)").show(),void $("#sess_submit").show().siblings("input").hide()):($("#mr_email").parent().nextAll("p.w_tips:eq(2)").hide(),void $("#sess_submit").trigger("click")))}}),$("#infoForm").validate({rules:{mr_mobile:{required:!0,isMobile:!0,maxlength:11},mr_email:{required:!0,email:!0,maxlength:100}},messages:{mr_mobile:{required:"必填",isMobile:"目前仅支持11位有效中国大陆号码",maxlength:"目前仅支持11位有效中国大陆号码"},mr_email:{required:"必填",email:"请输入正确的邮箱",maxlength:"请输入正确的邮箱"}},errorPlacement:function(a,c){$(c).parent().after(a),$(".c_section span.error").css("margin","5px 0 10px 138px")
},submitHandler:function(a){return $(a).find(":submit").val("保存中...").attr("disabled",!0),$("#sess_submit").one("click",function(){var c=$('input[name="xl"]',a).val(),h=$('input[name="gznx"]',a).val(),_=$('input[name="mr_mobile"]',a).val(),g=$('input[name="mr_email"]',a).val(),v=$('input[name="szcs"]',a).val(),b=globals.token;$.ajax({url:ctx+"/resume/basic.json",type:"POST",data:{highestEducation:c,workYear:h,phone:_,email:g,liveCity:v,type:1,resubmitToken:b},dataType:"json"}).done(function(b){if(globals.token=b.resubmitToken,b.success){$("#sess_submit").hide().siblings("input").show(),$(".w_tips").hide(),U(),X="",Q=!0,$(".mr_p_info .xl em").text(c);var w=h;$(".mr_p_info .gzjy em").text("应届毕业生"!=$.trim(h)?h+="工作经验":h),$(".mr_p_info .city em").text(v),$(".mr_p_info .mobile em").text(_),$(".mr_p_info .email em").text(g).attr("title",g),$("#infoForm .mr_info_edit").addClass("dn");var y=$(".mr_p_info .mr_edit_unon");y.attr("data-xl",c),y.attr("data-gzjy",w),y.attr("data-city",v),y.attr("data-mobile",_),y.attr("data-email",g),$(".mr_p_info").show()}else alert(b.msg);$(a).find(":submit").val("保 存").attr("disabled",!1)})}),$("#mr_mobile").val()!=$("#sess_phone").val()&&$("#sess_phone").val().length>0&&$("#mr_email").val()!=$("#sess_email").val()&&$("#sess_email").val().length>0?($("#mr_mobile").parent().nextAll("p.w_tips:eq(0)").show(),void $("#sess_submit").show().siblings("input").hide()):$("#mr_mobile").val()!=$("#sess_phone").val()&&$("#mr_mobile").val().length>0&&$("#sess_phone").val().length>0?($("#mr_mobile").parent().nextAll("p.w_tips:eq(1)").show(),void $("#sess_submit").show().siblings("input").hide()):($("#mr_mobile").parent().nextAll("p.w_tips:eq(1)").hide(),$("#mr_email").val()!=$("#sess_email").val()&&$("#mr_email").val().length>0&&$("#sess_email").val().length>0?($("#mr_email").parent().nextAll("p.w_tips:eq(2)").show(),void $("#sess_submit").show().siblings("input").hide()):($("#mr_email").parent().nextAll("p.w_tips:eq(2)").hide(),void $("#sess_submit").trigger("click")))}}),$("#infoForm .mr_info_edit .mr_cancel").bind("click",function(){$(".mr_info_edit").addClass("dn"),$("#xl").val($(this).attr("data-xl")),$("#gznx").val($(this).attr("data-gzjy")),$("#mr_mobile").val($(this).attr("data-mobile")),$("#mr_email").val($(this).attr("data-email")),$("#szcs").val($(this).attr("data-city")),$("#sess_submit").hide().siblings("input").show(),$(".w_tips").hide(),$(".mr_p_info").show(),Q=!0}),$("#olinfoForm .mr_info_edit .mr_cancel").bind("click",function(){$(".mr_info_edit").addClass("dn");var a=$("#olinfoForm");a.find("span.error").hide(),a.find("input.error").removeClass("error");var c=$(".info_t .shenfen em");globals.personIdFlag=c.attr("data-id"),$("#shenfen").val(c.text());var h=$(this).attr("data-sex");$(".mr_sex span,.mr_sex i").removeClass("active"),"男"==h||""==h?($(".mr_sex .mr_man").addClass("active"),$(".mr_sex .mr_man i").addClass("active")):($(".mr_sex .mr_women").addClass("active"),$(".mr_sex .mr_women i").addClass("active")),$("#mr_year").val($(this).attr("data-birth-year")),$("#mr_month").val($(this).attr("data-birth-month")),$("#mr_day").val($(this).attr("data-birth-date")),$("#xl").val($(this).attr("data-xl")),$("#gznx").val($(this).attr("data-gzjy")),$("#szcs").val($(this).attr("data-city")),$("#mr_mobile").val($(this).attr("data-mobile")),$("#mr_email").val($(this).attr("data-email")),$("#sess_submit").hide().siblings("input").show(),$(".w_tips").hide(),$(".mr_p_info").show(),Q=!0,X="",U()}),$(".mr_p_info .mr_edit_unon").bind("click",function(){$(".mr_p_info").hide(),$("#xl").val($(this).attr("data-xl")),$("#gznx").val($(this).attr("data-gzjy")),$("#mr_mobile").val($(this).attr("data-mobile")),$("#mr_email").val($(this).attr("data-email")),$("#szcs").val($(this).attr("data-city")),$("#infoForm .mr_info_edit").removeClass("dn"),$("#infoForm").find(":submit").val("保存").attr("disabled",!1),Q=!1}),$(".mr_p_info .mr_edit_on").bind("click",function(){if(""==X){$("#olinfoForm").find(":submit").val("保存").attr("disabled",!1),H(),X="olinfoForm",Q=!1,$(".mr_p_info").hide();var a=$(".info_t .shenfen em");globals.personIdFlag=a.attr("data-id"),a.parent().hasClass("dn")?$("#shenfen").val(""):"·"==$.trim(a.text())?$("#shenfen").val(""):$("#shenfen").val(a.text()).attr("title",a.text()),""==$.trim($(".ul_shenfen").text())?$(".mr_showidentity_div").bind("click",b):$(".mr_showidentity_div").unbind("click",b);var c=$(this).attr("data-sex");$(".mr_sex span,.mr_sex i").removeClass("active"),"男"==c?($(".mr_sex .mr_man").addClass("active"),$(".mr_sex .mr_man i").addClass("active")):"女"==c&&($(".mr_sex .mr_women").addClass("active"),$(".mr_sex .mr_women i").addClass("active")),$("#mr_year").val($(this).attr("data-birth-year")),$("#mr_month").val($(this).attr("data-birth-month"));var h=$(this).attr("data-birth-date");$("#mr_year").val()&&$("#mr_month").val()?function(a,c){$("#olinfoForm .mr_days").show().find("#mr_day").val(h);for(var _=getCountDays(a,c),g=[],i=1;_>=i;i++)g.push(10>i?"<li>0"+i+"</li>":"<li>"+i+"</li>");$("#olinfoForm .mr_days .ul_day").html(g.join(""))}($("#mr_year").val(),$("#mr_month").val()):$("#olinfoForm .mr_days").hide(),$("#xl").val($(this).attr("data-xl")),$("#gznx").val($(this).attr("data-gzjy"));var _=$("#gznx").val();if("应届毕业生"==$.trim(_)){var g=$(".ul_shenfen li[data-id = '1']");0!=g.length&&(globals.personIdFlag="1")}else{var v=$(".ul_shenfen li[data-id = '2']");0!=v.length&&(globals.personIdFlag="2")}if($("#szcs").val($(this).attr("data-city")),$("#mr_mobile").val($(this).attr("data-mobile")),$("#mr_email").val($(this).attr("data-email")),$(".mr_sns a").length>0){$(".mr_add_sns").show(),$(".sns_empty").hide();var w="";$(".mr_sns a").each(function(){var a=$(this).data("sns"),c=$(this).data("site"),h="sns"+a;w+='<div class="form_wrap mr_sns_m">',w+='    <i class="'+h+'"></i>',w+='    <em class="mr_ok"></em>',w+='    <a href="javascript:;" class="sns_del"></a>',w+='    <input type="text" id="'+h+'" name="'+h+'" data-sns="'+a+'" class="mr_button" value="'+c+'"/>',w+="</div>"}),$(".mr_info_edit .sns_area").html(w)}0==$(".sns_area .mr_sns_m").length&&($(".mr_add_sns").hide(),$(".sns_empty").show()),$("#olinfoForm .mr_info_edit").removeClass("dn")}});var at=function(){var a,c=$("#uploadImages"),h=c.find("#cropzoom_container"),_=c.find("#crop"),g=c.find("#restore");_.bind("click",function(){a.send(ctx+"/resume/cutPic.json","POST",{resubmitToken:globals.token},function(c){a.showImage.attr("src",ctx+"/"+c.content.uploadPath+"?cc="+Math.random()),$.colorbox.close(),a.showImage=null,null!=c.resubmitToken&&""!=c.resubmitToken&&(globals.token=c.resubmitToken),updateResumeTime(c.content.refreshTime);var rt=c.content.infoCompleteStatus.score,h=parseInt($.trim($(".mr_bfb").text())),_=amountScore-h+rt;updateRatioRM(rt,_),$(".shadow").hide(),$(".mr_headfile").hover(function(){$(".shadow").show()},function(){$(".shadow").hide()}),a.restore()})}),g.bind("click",function(){a.restore(),$(".shadow").hide(),$(".mr_headfile").hover(function(){$(".shadow").show()},function(){$(".shadow").hide()}),$.colorbox.close()});var v=function(_){var g=$(".mr_headimg"),v=ctx+"/"+_.uploadPath;$.colorbox({inline:!0,href:c,title:"选择裁剪区域"}),myresumeCommon.config.cutImage.image.source=v,myresumeCommon.config.cutImage.image.width=_.srcImageW,myresumeCommon.config.cutImage.image.height=_.srcImageH,myresumeCommon.config.cutImage.selector.w=myresumeCommon.config.userPhotoSelector.width,myresumeCommon.config.cutImage.selector.h=myresumeCommon.config.userPhotoSelector.height,a=h.cropzoom(myresumeCommon.config.cutImage),a.showImage=null,a.showImage=g},b=function(){};return{upSucc:v,upFail:b}}();window.uploadPhoto=at,$("#colorbox").on("click","#cboxClose",function(){"uploadImages"==$(this).siblings("#cboxLoadedContent").children("div").attr("id")&&($(".shadow").hide(),$(".mr_headfile").hover(function(){$(".shadow").show()},function(){$(".shadow").hide()}))});var st=function(){var a,c=$("#uploadLogos"),h=c.find("#cropzoom_container"),_=c.find("#crop"),g=c.find("#restore"),v=function(_,g){var v=$("#"+g).next(".logo_u"),b=ctx+"/"+_.uploadPath;$.colorbox({inline:!0,href:c,title:"选择裁剪区域"}),myresumeCommon.config.cutImage.image.source=b,myresumeCommon.config.cutImage.image.width=_.srcImageW,myresumeCommon.config.cutImage.image.height=_.srcImageH,myresumeCommon.config.cutImage.selector.w=myresumeCommon.config.userPhotoSelector.width,myresumeCommon.config.cutImage.selector.h=myresumeCommon.config.userPhotoSelector.height,a=h.cropzoom(myresumeCommon.config.cutImage),a.showImage=null,a.showImage=v},b=function(){};return _.bind("click",function(){$(".jobExpForm").find(":submit").val("上传中").attr("disabled",!0),a.send(ctx+"/workExperience/cutLogo.json","POST",{resubmitToken:globals.token},function(c){oMoudle.workId="",a.showImage.css({width:120,height:120}).attr("src",ctx+"/"+c.content+"?cc="+Math.random()),a.showImage.prev().prev().removeClass("active").addClass("up"),$.colorbox.close(),a.showImage=null,null!=c.resubmitToken&&""!=c.resubmitToken&&(globals.token=c.resubmitToken),$(".jobExpForm").find(":submit").val("保存").attr("disabled",!1),a.restore()})}),g.bind("click",function(){a.restore(),$.colorbox.close()}),{upSucc:v,upFail:b}}();window.uploadCompanyLogo=st,$(".mr_uploaded").on("click","a.mr_del",function(){confirm("你确定要删除该附件吗？删除后你设置的默认投递简历也将失效")&&$.ajax({url:ctx+"/nearBy/delNearBy.json",type:"GET"}).done(function(a){a.success?($(".mr_uploaded").hide(),$(".mr_upload").show()):alert(a.msg)})}),$(".mr_module ul").delegate(".md_flag a","click",function(e){e.stopPropagation(),$(".mr_module li").removeClass("active"),$(this).parent().addClass("active");var a=$(this).parent().data("md");k(a,0)}),$(".mr_module").unbind("click"),$(".mr_module").delegate(".hide_md","click",function(){$(this).addClass("dn").addClass("mr_hide");var a=$(this).data("md");$("#"+a).removeClass("dn"),"customBlock"==a&&initTitlePosition(),$(".m_hide").each(function(){var d=$(this).data("md");if(d==a){$(this).removeClass("dn").addClass("md_flag"),W(a,0),k(a,1),$(".mr_module li").removeClass("active"),$(this).addClass("active");var c=$(this).attr("data-md");"customBlock"==$.trim(c)&&$("#customBlock .cust_title span").text("自定义标题"),initTitlePosition()}}),9==$(".mr_module ul .md_flag").length?$(".mr_module_add").addClass("dn"):$(".mr_module_add").removeClass("dn")}),$(".mr_module_add").mouseover(function(){$(this).addClass("dn"),$(".hide_md").removeClass("dn"),$(".hide_md").mouseover(function(){$(".mr_module_add").addClass("dn"),$(".hide_md").removeClass("dn")})}),$(".hide_md").mouseout(function(){$(".mr_module .hide_md").addClass("dn"),$(".mr_module .m_hide").each(function(i){$(this).hasClass("dn")&&i++}),9==$(".md_flag").length?$(".mr_module_add").addClass("dn"):$(".mr_module_add").removeClass("dn")}),$(".mr_created").on("click",".mr_md_del",function(e){e.stopPropagation()}),$(".mr_hide_del").bind("click",function(e){e.stopPropagation(),$(".mr_module .mr_md_del").remove(),$(this).parent().after($("#del_hide_tip").html()),oDelMoudle=$(this)}),$(".mr_created").on("click",".mr_md_del .mr_del_cel",function(e){e.stopPropagation(),$(this).parents(".mr_md_del").remove()});var ot=!0;$(".mr_created").on("click",".mr_md_del .mr_del_btn",function(e){if(ot){e.stopPropagation(),$(this).text("删除中"),ot=!1;var a=$(this);$(this).unbind();var c,h,_="",g=oDelMoudle.parent().parent().data("md"),v=globals.token,b=globals.resumeId,y="false";switch(g){case"expectJob":_="/expectJobs/delExpectJobs.json",y=globals.hasExpectJobs,h=$("#expHideId").val(),c={resumeId:b,type:1,resubmitToken:v,id:h},St.clear();break;case"projectExperience":_="/projectExperience/delAllProject.json",y=globals.hasProjectExperiences,c={resumeId:b,type:1,resubmitToken:v},wt.clear();break;case"selfDescription":_="/resume/intro.json",y=globals.hasSelf,c={resumeId:b,type:1,resubmitToken:v},Ct.clear();break;case"worksShow":_="/workShow/delAllWorkShow.json",y=globals.hasWorkShows,c={resumeId:b,type:1,resubmitToken:v},Tt.clear();break;case"customBlock":_="/userDefine/delUserDefine.json",y=globals.hasUserDefines,h=$("#customId").val(),c={resumeId:b,type:1,resubmitToken:v,id:h};var k=$("#customBlock");k.find(".cust_title span").text("自定义标题"),k.find(".custom_list").html("");break;case"skillsAssess":_="/skillEvaluate/delAllSkill.json",y=globals.hasSkillEvaluates,c={resumeId:b,type:1,resubmitToken:v},Pt.clear();break;default:return}y?$.ajax({url:ctx+_,type:"POST",data:c,dataType:"json"}).done(function(c){"expectJob"==g&&$("#expHideId").val(""),globals.token=c.resubmitToken,c.success?w(a,g,0,c):alert(c.msg),ot=!0}):(w(a,g,1,0),ot=!0)}}),$(".mr_bottom_l").bind("click",function(e){e.stopPropagation();var a=$(".mr_down_tip");a.is(":hidden")?a.removeClass("dn"):a.addClass("dn")}),$(".mr_down_tip li").bind("click",function(e){e.stopPropagation(),$(".mr_down_tip").addClass("dn")}),$(".mr_down_tip li").hover(function(){$(".mr_down_tip li.active").removeClass("active"),$(this).addClass("active")},function(){$(".mr_down_tip li.active").removeClass("active"),$(this).removeClass("active")}),$(".mr_created").delegate(".mr_delete span","click",function(){$(this).prev(".mr_delete_pop").removeClass("dn")}),$(".mr_created").delegate(".mr_del_cancel","click",function(){""==Z&&$(this).parent().parent().addClass("dn")}),$(".mr_created").delegate(".mr_del_ok","click",function(){Z="1";var a=$(this).parents(".mr_moudle_content"),c=$(this).parents("form"),h=$(".mr_del_ok",c).data("id"),_="";switch(X){case"upJobForm":_="/workExperience/delExp.json";break;case"upEduForm":_="/educationExperience/delEdu.json";break;case"upExpJobForm":$("#upExpJobForm .mr_cancel").trigger("click");break;case"upProForm":_=myresumeCommon.requestTargets.projectExpDel;break;default:return}$(this).text("删除中...").attr("disabled",!0);var g=$(this);$.ajax({url:ctx+_,type:"POST",data:{id:h,resubmitToken:globals.token},dataType:"json"}).done(function(h){if(h.success){null!=h.resubmitToken&&""!=h.resubmitToken&&(globals.token=h.resubmitToken),updateResumeTime(h.content.refreshTime);var rt=h.content.infoCompleteStatus.score,_=parseInt($.trim($(".mr_bfb").text())),v=amountScore-_+rt;switch(amountScore=v,updateRatioRM(rt,v),X){case"upJobForm":var b=h.content.isOpenMyResume,w=h.content.firstOpen;if(C(b,w),1==a.find(".updatejob_wrap .mr_jobe_list").length){a.find(".mr_empty_add").show(),$.trim($(".base_info .j").text()),("2"==$(".shenfen em").attr("data-id")||"0"==$(".shenfen em").attr("data-id"))&&($(".mr_infoed .info_t .shenfen").addClass("dn"),$(".mr_p_info .mr_edit_on").attr("data-sf",""));var y=$(".ul_shenfen li[data-id = '2']");y&&y.remove();var k=$(".mr_module .flag_work");"实习经历"!=$.trim($("#workExperience .mr_title_c").text())&&k.is(":hidden")&&k.removeClass("dn")}R(h);break;case"upEduForm":var b=h.content.isOpenMyResume,w=h.content.firstOpen;if(C(b,w),1==a.find(".mr_jobe_list").length){a.find(".mr_empty_add").show(),$.trim($(".base_info .j").text()),("1"==$(".shenfen em").attr("data-id")||"0"==$(".shenfen em").attr("data-id"))&&($(".mr_infoed .info_t .shenfen").addClass("dn"),$(".mr_p_info .mr_edit_on").attr("data-sf",""));var S=$(".ul_shenfen li[data-id = '1']");S&&S.remove();var k=$(".mr_module .flag_edu");k.is(":hidden")&&k.removeClass("dn")}R(h);break;case"upExpJobForm":$("#upExpJobForm .mr_cancel").trigger("click");break;case"upProForm":$("#currentUpProForm .mr_cancel").trigger("click");var j=wt.obj.find(".mr_empty_add"),T=h&&h.content&&h.content.projectExperiences||[];T.length?(globals.hasProjectExperiences=!0,j.hide()):(globals.hasProjectExperiences=!1,j.show());break;default:return}U(),X="",Q=!0,c.prev().remove(),c.remove()}else alert(h.msg);Z="",g.text("删除").attr("disabled",!1)})});var lt={obj:$("#workExperience"),clearError:function(){this.obj.find("span.error").hide(),this.obj.find("input.error").removeClass("error")},rules:{companyName:{required:!0,maxlenStr:40},positionName:{required:!0,maxlenStr:30},startTime:{required:!0},endTime:{required:!0},editorValue:{required:!1,ueditorLength:[0,1600]}},messages:{companyName:{required:"必填",maxlenStr:"请输入80字符以内的公司名称"},positionName:{required:"必填",maxlenStr:"请输入60字符以内的职位名称"},startTime:{required:"必填"},endTime:{required:"必填"},editorValue:{ueditorLength:"请输入1600字符以内的工作内容"}},AddCancel:function(){$("#addJobForm").addClass("dn"),this.obj.find(".mr_jobe_list").length<=1&&this.obj.find(".mr_empty_add").show(),U(),this.obj.find(".mr_head_r").removeClass("mr_add_grey").removeClass("mr_up_grey").removeClass("mr_addup_cel").children("em").text("添加"),X="",Q=!0},UpCancel:function(){U(),$("#currentUpJobForm").prev().show(),$("#currentUpJobForm").hide(),$("#currentUpJobForm").attr("id",""),X="",Q=!0}};try{var dt=new components.CityWrapper({container:$("#olinfoForm .city_s"),onchange:function(a,c){c.find(".error").hide()},beforeShown:function(a){$(document).trigger("click"),$(".select_color").removeClass("select_color"),a.addClass("select_color")},afterHide:function(a){a.removeClass("select_color")}}),ct=new components.CityWrapper({container:$("#upExpJobForm .city_s"),onchange:function(a,c){c.find(".error").hide()},beforeShown:function(a){$(document).trigger("click"),$(".select_color").removeClass("select_color"),a.addClass("select_color")},afterHide:function(a){a.removeClass("select_color")}}),mt=new components.CityWrapper({container:$("#infoForm .city_s"),onchange:function(a,c){c.find(".error").hide()},beforeShown:function(a){$(document).trigger("click"),$(".select_color").removeClass("select_color"),a.addClass("select_color")},afterHide:function(a){a.removeClass("select_color")}})}catch(e){}try{var ut,ht,pt=new components.CalendarWrapper({container:$("#addJobForm").find(".mr_timed_div:first"),onchange:function(a,c){ft.setLeftBoundary(a),c.find(".error").hide()},beforeShown:function(a){ft.hide(),$(".select_color").removeClass("select_color"),a.addClass("select_color"),a.css("zIndex","2"),a.siblings("div:last").css("zIndex","1")},afterHide:function(a){a.removeClass("select_color"),a.css("zIndex","auto"),a.siblings("div:last").css("zIndex","auto")}}),ft=new components.CalendarWrapper({container:$("#addJobForm").find(".mr_timed_div:last"),onchange:function(a,c){pt.setRightBoundary(a),c.find(".error").hide()},beforeShown:function(a){pt.hide(),$(".select_color").removeClass("select_color"),a.addClass("select_color")},afterHide:function(a){a.removeClass("select_color")},has2Today:!0})}catch(e){}var _t=null;lt.obj.delegate(".mr_head_r","click",function(){_t||(_t=UE.getEditor("ueditor_addjob"),_t.addListener("ready",function(){_t.setContent(""),_t.on("contextmenu",function(){return!0})})),_t.addListener("keyup",function(){this.sync(),$("#addJobForm").find("textarea").valid()}),lt.clearError(),S(_t);var a=lt.obj.find(".mr_empty_add");"添加"==$(this).children("em").text()?""==X&&(X="addJobForm",Q=!1,$("#addJobForm").removeClass("dn"),H(),$(this).removeClass("mr_add_grey").removeClass("mr_up_grey").addClass("mr_addup_cel").children("em").text("取消"),a.not(":hidden")&&a.hide()):(Q=!0,$("#addJobForm").addClass("dn"),U(),$(this).removeClass("mr_add_grey").removeClass("mr_up_grey").removeClass("mr_addup_cel").children("em").text("添加"),X="",lt.obj.find(".mr_jobe_list").length<=1&&a.show())}),lt.obj.delegate(".mr_empty_add","click",function(){$(this).hide(),$("#workExperience .mr_head_r").trigger("click")});var gt=void 0;lt.obj.delegate(".mr_edit","click",function(){if(""==X){H(),X="upJobForm",Q=!1,$(this).parents(".mr_jobe_list").next().attr("id","currentUpJobForm"),$(this).parents(".mr_jobe_list").next().show(),$(this).parents(".mr_jobe_list").hide();var a=$("#currentUpJobForm");a.find(".companyName").val(a.prev().find(".l2 h4").text()),a.find(".autoPosition").val(a.prev().find(".l2 span").text());var c;c="block"!=a.prev().find(".mr_content_m").css("display")?"":a.prev().find(".mr_content_m").html(),gt="ueditor_"+$(this).data("expid"),J=null,J=UE.getEditor(gt),J.isReady&&J.setContent(c),J.addListener("ready",function(){J.setContent(c),J.on("contextmenu",function(){return!0})}),J.addListener("keyup",function(){this.sync(),a.find("textarea").valid()}),$(".mr_del_ok",a).attr("data-id",$(this).data("expid")),oMoudle.workId=$(this).data("expid"),$("img.logo_u",a).prev().prev().addClass("up");var h=$(this).attr("data-logo");""!=h?(h=ctx+"/"+h,$("img.logo_u",a).css({width:120,height:120}).attr("src",h),$("input[name='companyLogoHide']",a).val(h)):(h="",$(".mr_upload_logo div",a).removeClass("up"),$("img.logo_u",a).css({width:0,height:0}).attr("src",h),$("input[name='companyLogoHide']",a).val("")),T(),ut=new components.CalendarWrapper({container:a.find(".mr_timed_div:first"),onchange:function(a,c){ht.setLeftBoundary(a),c.find(".error").hide()},beforeShown:function(a){ht.hide(),$(".select_color").removeClass("select_color"),a.addClass("select_color")},afterHide:function(a){a.removeClass("select_color")}}),ht=new components.CalendarWrapper({container:a.find(".mr_timed_div:last"),onchange:function(a,c){ut.setRightBoundary(a),c.find(".error").hide()},beforeShown:function(a){ut.hide(),$(".select_color").removeClass("select_color"),a.addClass("select_color")},afterHide:function(a){a.removeClass("select_color")},has2Today:!0}),ut.set($(this).attr("data-startime"),!0),ht.set($(this).attr("data-endtime"),!0),handleFrames()}}),lt.obj.delegate(".mr_upload_logo","mouseover",function(){var a=$(this).find("div");a.hasClass("up")||a.addClass("active")}),lt.obj.delegate(".mr_upload_logo","mouseout",function(){var a=$(this).find("div");a.hasClass("up")||a.removeClass("active")}),lt.obj.delegate("#currentUpJobForm .mr_cancel","click",function(){lt.UpCancel()}),$("#addJobForm .mr_cancel").bind("click",function(){lt.AddCancel()}),$(".mr_created").delegate("a.mce_fullscreen","click",function(){var a=$("#mce_fullscreen_container .mceToolbarRow1"),c=$("#mce_fullscreen_container #mce_fullscreen_toolbargroup"),h='<a href="javascript:;" class="writeBtn">写好了</a>',_=$(this).attr("id"),g=_.split("_");_=g[0],c.append(h),$(window).resize(function(){$("table#mce_fullscreen_tbl").css("width","100%")}),$("#mce_fullscreen_container .writeBtn").bind("click",function(){ff.fullscreenEditor.execCommand("mceFullScreen")}),a.find("td:nth-child(3)").addClass("borderLNone");var v=$("#mce_fullscreen_ifr")[0].contentDocument.body;$(v).css({backgroundColor:"#f9f9f9",color:"#555",fontSize:"16px"}),v.focus()});var vt={obj:$("#educationalBackground"),rules:{schoolName:{required:!0,checkNum:!0,maxlenStr:50,truename2:!0},positionName:{required:!0,checkNum:!0,maxlenStr:50,newSpecialChar:!0},degree_text:{required:!0},graduate_text:{required:!0}},messages:{schoolName:{required:"必填",checkNum:"请输入有效的学校名称",maxlenStr:"请输入有效的学校名称",truename2:"请输入有效的学校名称"},positionName:{required:"必填",checkNum:"请输入有效的专业名称",maxlenStr:"请输入有效的专业名称",newSpecialChar:"请输入有效的专业名称"},degree_text:{required:"必填"},graduate_text:{required:"必填"}},errorPlacement:function(a,c){"hidden"==c.attr("type")?($(c).parent().css("margin-bottom","20px"),a.appendTo($(c).parent())):"button"==c.attr("type")?a.appendTo($(c).parent()):a.insertAfter($(c).parent())},clearError:function(){this.obj.find("span.error").hide(),this.obj.find("input.error").removeClass("error")},AddCancel:function(){$("#addEduForm").addClass("dn"),this.obj.find(".mr_jobe_list").length<=1&&this.obj.find(".mr_empty_add").show(),U(),this.obj.find(".mr_head_r").removeClass("mr_add_grey").removeClass("mr_up_grey").removeClass("mr_addup_cel").children("em").text("添加"),X="",Q=!0},UpCancel:function(){U(),$("#upEduForm").prev().show(),$("#upEduForm").remove(),X="",Q=!0}};vt.obj.delegate(".mr_head_r","click",function(){if(vt.clearError(),N(),"添加"==$(this).children("em").text()){var a=vt.obj.find(".mr_empty_add");""==X&&(a.not(":hidden")&&a.hide(),X="addEduForm",Q=!1,$("#addEduForm").removeClass("dn"),H(),$(this).removeClass("mr_add_grey").removeClass("mr_up_grey").addClass("mr_addup_cel").children("em").text("取消"))}else 0==$("#educationalBackground .mr_jobe_list").length&&$("#educationalBackground .mr_empty_add").show(),$("#addEduForm").addClass("dn"),U(),$(this).removeClass("mr_add_grey").removeClass("mr_up_grey").removeClass("mr_addup_cel").children("em").text("添加"),X=""}),vt.obj.delegate(".mr_empty_add","click",function(){$(this).hide(),$("#educationalBackground .mr_head_r").trigger("click")}),vt.obj.delegate(".mr_edit","click",function(){if(""==X){H(),X="upEduForm",Q=!1;var a="";a=$("#edu_update_hide").html(),$(this).parents(".mr_jobe_list").hide().after(a),E(),z(),$(this).parents(".mr_jobe_list").next().attr("id","upEduForm");var c=$("#upEduForm");$("#eduId",c).val($(this).data("eduid")),$(".mr_del_ok",c).attr("data-id",$(this).data("eduid")),oMoudle.eduId=$(this).data("eduid"),$('input[name="schoolName"]',c).val($(this).data("schoolname")),$('input[name="positionName"]',c).val($(this).data("pro")),$('input[name="degree_text"]',c).val($(this).data("edu")),$('input[name="degree_val"]',c).val($(this).data("edu")),$('input[name="graduate_text"]',c).val($(this).data("date")),$('input[name="graduate"]',c).val($(this).data("date")),F()}}),vt.obj.delegate("#upEduForm .mr_cancel","click",function(){vt.UpCancel()}),$("#addEduForm .mr_cancel").bind("click",function(){vt.AddCancel()}),E(),z();var bt,$t,wt={obj:$("#projectExperience"),clearError:function(){this.obj.find("span.error").hide(),this.obj.find("input.error").removeClass("error")},AddCancel:function(){var a=$("#addProForm");a.addClass("dn"),a.find('input[name="projectName"]').val(""),a.find('input[name="thePost"]').val(""),a.find('input[name="startTime"]').val(""),a.find('input[name="endTime"]').val(""),a.find('input[name="pro_link"]').val(""),a.find('input[type="button"]').val(""),this.obj.find(".mr_jobe_list").length<=2&&(this.obj.find(".mr_empty_add").show(),globals.hasProjectExperiences=!1),U(),this.obj.find(".mr_head_r").removeClass("mr_add_grey").removeClass("mr_up_grey").removeClass("mr_addup_cel").children("em").text("添加"),X="",Q=!0,this.checkState(),xt.reset(),yt.reset()},UpCancel:function(){U(),$("#currentUpProForm").prev().show(),$("#currentUpProForm").hide(),$("#currentUpProForm").attr("id",""),X="",Q=!0,this.checkState()},checkState:function(){this.obj.find(".mr_jobe_list").length<=2?(this.obj.find(".mr_empty_add").show(),globals.hasProjectExperiences=!1):(this.obj.find(".mr_empty_add").hide(),globals.hasProjectExperiences=!0)},clear:function(){var a=$("#addProForm");a.find('input[name="projectName"]').val(""),a.find('input[name="thePost"]').val(""),a.find('input[name="startTime"]').val(""),a.find('input[name="endTime"]').val(""),a.find('input[name="pro_link"]').val(""),a.find('input[type="button"]').val("");var c=this.obj;c.find(".list_show").html(c.find(".temp_hide").html()),c.find(".mr_empty_add").show(),this.clearError(),this.checkState()}},xt=new components.CalendarWrapper({container:$("#addProForm").find(".mr_timed_div:first"),onchange:function(a,c){yt.setLeftBoundary(a),c.find(".error").hide()},beforeShown:function(a){yt.hide(),$(".select_color").removeClass("select_color"),a.addClass("select_color")},afterHide:function(a){a.removeClass("select_color")}}),yt=new components.CalendarWrapper({container:$("#addProForm").find(".mr_timed_div:last"),onchange:function(a,c){xt.setRightBoundary(a),c.find(".error").hide()},beforeShown:function(a){xt.hide(),$(".select_color").removeClass("select_color"),a.addClass("select_color")},afterHide:function(a){a.removeClass("select_color")},has2Today:!0}),kt=null;wt.obj.delegate(".mr_head_r","click",function(){kt?kt.setContent(""):(kt=UE.getEditor("ueditor_addpro"),kt.addListener("ready",function(){kt.setContent(""),kt.on("contextmenu",function(){return!0})}),kt.addListener("keyup",function(){this.sync(),$("#addProForm").find("textarea").valid()})),wt.clearError(),O(kt),"添加"==$(this).children("em").text()?""==X&&(X="addProForm",Q=!1,$("#addProForm").removeClass("dn"),H(),$(this).removeClass("mr_add_grey").removeClass("mr_up_grey").addClass("mr_addup_cel").children("em").text("取消"),wt.checkState(),wt.obj.find(".mr_empty_add").hide()):($("#addProForm").addClass("dn"),U(),$(this).removeClass("mr_add_grey").removeClass("mr_up_grey").removeClass("mr_addup_cel").children("em").text("添加"),X="",wt.checkState(),wt.obj.find(".mr_jobe_list").length<=1&&wt.obj.find(".mr_empty_add").show())}),wt.obj.delegate(".mr_empty_add","click",function(){$(this).hide(),$("#projectExperience .mr_head_r").trigger("click")}),wt.obj.delegate(".mr_edit","click",function(){if(""==X){H(),X="upProForm",Q=!1,$(this).parents(".mr_jobe_list").next().attr("id","currentUpProForm"),$(this).parents(".mr_jobe_list").next().show(),$(this).parents(".mr_jobe_list").hide();var a=$("#currentUpProForm"),c=$(this).attr("data-remark")?$(this).attr("data-remark"):"";J=null,J=UE.getEditor("ueditor_"+$(this).attr("data-id")),J.isReady&&J.setContent(c),J.addListener("ready",function(){J.setContent(c),J.on("contextmenu",function(){return!0})}),J.addListener("keyup",function(){this.sync(),a.find("textarea").valid()});var h=$(this).parents(".mr_jobe_list");D(h.attr("data-id")),a.find(".mr_del_ok").attr("data-id",h.data("id")),a.find('input[name="projectName"]').val($.trim(h.find(".projectTitle").text())),a.find('input[name="thePost"]').val($.trim(h.find(".l2 p").text()));var _=$.trim(h.find(".mr_content_r span").text()).split(" - ");a.find('input[name="startTime"]').val(_[0]).prev().val(_[0]),a.find('input[name="endTime"]').val(_[1]).prev().val(_[1]),a.find('textarea[name="upproContent"]').val($.trim(h.find(".mr_content_m").html())),a.find('input[name="pro_link"]').val($.trim(h.find(".projectTitle").attr("href"))),wt.checkState(),bt=new components.CalendarWrapper({container:a.find(".mr_timed_div:first"),onchange:function(a,c){$t.setLeftBoundary(a),c.find(".error").hide()},beforeShown:function(a){$t.hide(),$(".select_color").removeClass("select_color"),a.addClass("select_color")},afterHide:function(a){a.removeClass("select_color")}}),$t=new components.CalendarWrapper({container:a.find(".mr_timed_div:last"),onchange:function(a,c){bt.setRightBoundary(a),c.find(".error").hide()},beforeShown:function(a){bt.hide(),$(".select_color").removeClass("select_color"),a.addClass("select_color")},afterHide:function(a){a.removeClass("select_color")},has2Today:!0}),bt.set(_[0],!0),$t.set(_[1],!0),handleFrames()}}),wt.obj.delegate("#currentUpProForm .mr_cancel","click",function(){wt.UpCancel()}),$("#addProForm .mr_cancel").bind("click",function(){wt.AddCancel()});var Ct={obj:$("#selfDescription"),clearError:function(){this.obj.find("span.error").hide(),this.obj.find("input.error").removeClass("error")},UpCancel:function(){$("#upSelfForm").addClass("dn"),U(),X="",Q=!0,this.obj.find(".mr_head_r").removeClass("mr_up_grey").removeClass("mr_add_grey").removeClass("mr_addup_cel").children("em").text("编辑"),this.obj.find(".self_des_list").removeClass("dn"),this.checkState()},clear:function(){Ct.obj.find(".mr_self_r").html(""),this.checkState(),this.clearError()},checkState:function(){""==$.trim($(".mr_self_r").html())?(Ct.obj.find(".mr_empty_add").show(),Ct.obj.find(".self_des_list").addClass("dn")):(Ct.obj.find(".mr_empty_add").hide(),Ct.obj.find(".self_des_list").removeClass("dn"))}};Ct.obj.delegate(".mr_head_r","click",function(){Ct.clearError(),"编辑"==$(this).children("em").text()?""==X&&(J=null,J=UE.getEditor("ueditor_selfDescribe"),J.isReady&&J.setContent(Ct.obj.find(".mr_self_r").html()),J.addListener("ready",function(){J.setContent(Ct.obj.find(".mr_self_r").html()),J.on("contextmenu",function(){return!0})}),J.addListener("keyup",function(){this.sync(),$("#upSelfForm").find("textarea").valid()}),X="upSelfForm",Q=!1,$("#upSelfForm").removeClass("dn"),H(),Ct.obj.find(".self_des_list").addClass("dn"),$(this).removeClass("mr_add_grey").removeClass("mr_up_grey").addClass("mr_addup_cel").children("em").text("取消"),$("#upSelfForm"),Ct.obj.find(".mr_empty_add").hide()):($("#upSelfForm").addClass("dn"),U(),$(this).removeClass("mr_up_grey").removeClass("mr_add_grey").removeClass("mr_addup_cel").children("em").text("编辑"),X="",Ct.obj.find(".self_des_list").removeClass("dn"),Q=!0,""==J.getContent()&&Ct.obj.find(".mr_empty_add").show(),Ct.checkState())}),$("#upSelfForm .mr_cancel").bind("click",function(){Ct.UpCancel()
}),Ct.obj.find(".mr_empty_add").bind("click",function(){Ct.obj.find(".mr_head_r").trigger("click")}),$("#upSelfForm").submit(function(){J.sync()}).validate({rules:{editorValue:{required:!0,ueditorLength:[10,1600]}},messages:{editorValue:{required:"必填",ueditorLength:"请输入10-1600字符的自我描述"}},errorPlacement:function(a,c){"text"==c.attr("type")||"button"==c.attr("type")?($(c).parent().css("margin-bottom","20px"),a.appendTo($(c).parent())):c.is("textarea")?$(c).parent().find(".wrap_editor").after(a):a.insertAfter($(c).parent())},submitHandler:function(a){$(a).find(":submit").val("保存中...").attr("disabled",!0),myresumeCommon.utils.requester({url:myresumeCommon.requestTargets.myRemark,data:{resumeId:globals.resumeId,myRemark:J.getContent().replace(/<(?!ol|li|ul|p|\/ol|\/li|\/ul|\/p)[^>]*>/g,"").replace(/<([a-z][a-z0-9]*)[^>]*?(\/?)>/gi,"<$1$2>").replace(/&nbsp;/gi,"")}},function(c){if($(a).find(":submit").val("保 存").attr("disabled",!1),c.success){Ct.clearError(),Ct.UpCancel(),Ct.obj.find(".mr_self_r").html(c.content.resume.myRemark),updateResumeTime(c.content.refreshTime),globals.hasSelf=!0,""!=oMoudleScore.myRemarkScore&&(amountScore-=oMoudleScore.myRemarkScore),oMoudleScore.myRemarkScore="",""!=$.trim(Ct.obj.find(".mr_self_r").html())&&(Ct.obj.find(".mr_empty_add").hide(),Ct.obj.find(".self_des_list").removeClass("dn"));var rt=c.content.infoCompleteStatus.score,h=parseInt($.trim($(".mr_bfb").text())),_=amountScore-h+rt;updateRatioRM(rt,_)}else $(a).find(".wrap_editor").after('<span for="ueditor_textarea_editorValue" class="error">'+c.msg+"</span>")})}});var St={obj:$("#expectJob"),clearError:function(){this.obj.find("span.error").hide(),this.obj.find("input.error").removeClass("error")},UpCancel:function(){$("#upExpJobForm").addClass("dn"),U(),X="",Q=!0,this.obj.find(".mr_head_r").removeClass("mr_up_grey").removeClass("mr_add_grey").removeClass("mr_addup_cel").children("em").text("编辑"),this.obj.find(".expectjob_list").removeClass("dn"),this.checkState()},clear:function(){var a=$("#expectJob .expectjob_list");a.find(".mr_job_name").html(""),a.find(".mr_job_type").html(""),a.find(".mr_job_adr").html(""),a.find(".mr_job_range").html(""),a.find(".mr_job_des").html(""),this.checkState(),this.clearError()},checkState:function(){""==$.trim($(".expectjob_list").text()).replace(/\s/g,"")?(St.obj.find(".expectjob_list").addClass("dn"),St.obj.find(".mr_empty_add").show()):(St.obj.find(".mr_empty_add").hide(),St.obj.find(".expectjob_list").removeClass("dn"),globals.hasExpectJobs=!0)},clearCityError:function(){St.obj.find(".mr_job_city").find("span.error").hide()},clearPayError:function(){St.obj.find(".mr_pay_div").find("span.error").hide()},clearPayLayer:function(){St.obj.find(".xl_list:first, .xl_list:last").hide()}};St.obj.delegate(".mr_head_r","click",function(){if(St.clearError(),"编辑"==$(this).children("em").text()){if(""==X){var a=$("#expectJob .expectjob_list");J=null,J=UE.getEditor("ueditor_expJobDes"),J.isReady&&a.find(".mr_expjob_content").html()&&J.setContent(a.find(".mr_expjob_content").html()),J.addListener("ready",function(){a.find(".mr_expjob_content").html()&&J.setContent(a.find(".mr_expjob_content").html()),J.on("contextmenu",function(){return!0})}),J.addListener("keyup",function(){this.sync(),$("#upExpJobForm").find("textarea").valid()}),X="upExpJobForm",Q=!1,$("#upExpJobForm").removeClass("dn"),H(),Ct.obj.find(".expectjob_list").addClass("dn"),$(this).removeClass("mr_add_grey").removeClass("mr_up_grey").addClass("mr_addup_cel").children("em").text("取消");var c=a.find(".mr_job_name").text(),h=a.find(".mr_job_type").text(),_=$(this).attr("data-city")||a.find(".mr_job_adr").text()||$("#mr_mr_head").find(".mr_p_info .base_info em:last").text()||"",g=a.find(".mr_job_range").text(),v=a.find(".mr_expjob_content").html(),b=$("#upExpJobForm");$('input[name="expjobName"]',b).val($.trim(c));var w=$.trim(h);$('input[name="exp_job_type"]',b).val(""==w?"全职":w),$('input[name="jobCity"]',b).val($.trim(_)),$('input[name="monthpay"]',b).val($.trim(g)),$("#expJobDes").val($.trim(v)),St.checkState(),St.obj.find(".mr_empty_add").hide(),St.obj.find(".expectjob_list").addClass("dn")}}else $("#upExpJobForm").addClass("dn"),U(),$(this).removeClass("mr_up_grey").removeClass("mr_add_grey").removeClass("mr_addup_cel").children("em").text("编辑"),X="",Ct.obj.find(".expectjob_list").removeClass("dn"),Q=!0,St.checkState()}),$("#upExpJobForm .mr_cancel").bind("click",function(){St.UpCancel()}),St.obj.find(".mr_empty_add").bind("click",function(){St.obj.find(".mr_head_r").trigger("click")}),St.obj.find(".ul_exptype").on("click","li",function(e){e.stopPropagation(),$(this).parent().parent().prev().val($(this).text()),$(this).parent().parent().hide(),$(".select_color").removeClass("select_color")}),St.obj.find(".ul_pay").on("click","li",function(e){e.stopPropagation(),$(this).parent().parent().prev().val($(this).text()),$(this).parent().parent().hide(),$(".select_color").removeClass("select_color"),St.clearPayError()}),$("#upExpJobForm").submit(function(){J.sync()}).validate({rules:{expjobName:{required:!1,maxlenStr:30,positionspecialchar:!0},editorValue:{ueditorLength:[0,400]},monthpay:{required:!1},jobCity:{required:!1}},messages:{expjobName:{maxlenStr:"请输入有效的期望职位",positionspecialchar:"格式错误"},editorValue:{ueditorLength:$.validator.format("请输入400字符以内的补充说明")}},errorPlacement:function(a,c){"text"==c.attr("type")||"button"==c.attr("type")?($(c).parent().css("margin-bottom","20px"),a.appendTo($(c).parent())):c.is("textarea")?$(c).parent().find(".wrap_editor").after(a):a.insertAfter($(c).parent())},submitHandler:function(a){$(a).find(":submit").val("保存中...").attr("disabled",!0);var c=$('input[name="expjobName"]',a).val(),h=$('input[name="exp_job_type"]',a).val(),_=$('input[name="jobCity"]',a).val(),g=$('input[name="monthpay"]',a).val(),v=J.getContent().replace(/<(?!ol|li|ul|p|\/ol|\/li|\/ul|\/p)[^>]*>/g,"").replace(/<([a-z][a-z0-9]*)[^>]*?(\/?)>/gi,"<$1$2>").replace(/&nbsp;/gi,""),b=$.trim($("#expectJob .mr_job_info").attr("data-id"));$.ajax({url:ctx+myresumeCommon.requestTargets.expectJobSave,type:"POST",data:{id:globals.resumeId,expectId:b||"",city:_,positionType:h,positionName:c,addExplain:v,salarys:g,resubmitToken:globals.token},dataType:"json"}).done(function(b){if(b.success){""==$.trim(_)&&$("#expectJob .mr_head_r").attr("data-city",""),null!=b.resubmitToken&&""!=b.resubmitToken&&(globals.token=b.resubmitToken),$(a).find(":submit").val("保 存").attr("disabled",!1),updateResumeTime(b.content.refreshTime),""!=oMoudleScore.expectJobsScore&&(amountScore-=oMoudleScore.expectJobsScore),oMoudleScore.expectJobsScore="";var rt=b.content.infoCompleteStatus.score,w=parseInt($.trim($(".mr_bfb").text())),y=amountScore-w+rt;updateRatioRM(rt,y),globals.hasExpectJobs=!0;var k=$(".mr_module .flag_hopework");k.is(":hidden")||k.addClass("dn");var C=$("#expectJob .expectjob_list");b.content.expectJobs&&$("#expHideId").val(b.content.expectJobs.id),C.find(".mr_job_name").text(c),C.find(".mr_job_name").attr("title",c),C.find(".mr_job_type").text(h),C.find(".mr_job_adr").text(_),C.find(".mr_job_adr").attr("title",_),C.find(".mr_job_range").text(g),C.find(".mr_expjob_content").html(v),b.content.expectJobs&&$("#expectJob .mr_job_info").attr("data-id",b.content.expectJobs.id),""==$.trim(c)?$(".mr_name_li").addClass("dn"):$(".mr_name_li").removeClass("dn"),""==$.trim(h)?$(".mr_jobtype_li").addClass("dn"):$(".mr_jobtype_li").removeClass("dn"),""==$.trim(_)?$(".mr_city_li").addClass("dn"):$(".mr_city_li").removeClass("dn"),""==$.trim(g)?$(".mr_jobrange_li").addClass("dn"):$(".mr_jobrange_li").removeClass("dn"),""==$.trim(v)?$(".mr_job_des").addClass("dn"):$(".mr_job_des").removeClass("dn"),St.UpCancel(),$(".expectjob_list").removeClass("dn"),$("#upExpJobForm").addClass("dn"),U(),X="",Q=!0,St.checkState()}else $(a).find(".wrap_editor").after('<span for="ueditor_textarea_editorValue" class="error">'+b.msg+"</span>");$(a).find(":submit").val("保 存").attr("disabled",!1)})}});var jt={obj:$("#customBlock"),clearError:function(){this.obj.find("span.error").hide(),this.obj.find("input.error").removeClass("error")},UpCancel:function(){initTitlePosition(),$("#upCustomForm").addClass("dn"),U(),X="",Q=!0,this.obj.find(".mr_head_r").removeClass("mr_up_grey").removeClass("mr_add_grey").removeClass("mr_addup_cel").children("em").text("编辑"),this.obj.find(".custom_list").removeClass("dn");var a=$(".mr_content_cus").text();""==$.trim(a)&&$("#customBlock .mr_empty_add").show()},SetTitle:function(){var a=$("#customTitleName");$("#customBlock .cust_title span").text(""!=a.val()&&a.val()?a.val():"自定义标题")}};jt.obj.delegate(".mr_empty_add","click",function(){$(this).addClass("dn"),$("#customBlock .mr_head_r").trigger("click")}),$("#customCon").bind("full2restore",function(){$("#customCon").valid()}),jt.obj.delegate(".mr_head_r","click",function(){$("#customBlock .mr_empty_add").hide(),jt.clearError(),jt.obj.find(".mr_add_work img").attr("src",$("#userpic").attr("src"));var a=$("#customBlock .cust_title").text(),c=$("#customBlock .custom_list").html(),h=$.trim(a);if($("#upCustomForm input[name='titleName']").val("自定义标题"==h?"":h),"编辑"==$(this).children("em").text())""==X&&(J=null,J=UE.getEditor("ueditor_customBlock"),J.isReady&&J.setContent(c),J.addListener("ready",function(){J.setContent(c),J.on("contextmenu",function(){return!0})}),J.addListener("keyup",function(){this.sync(),$("#upCustomForm").find("textarea").valid()}),X="upCustomForm",Q=!1,$("#upCustomForm").removeClass("dn"),H(),jt.obj.find(".custom_list").addClass("dn"),$(this).removeClass("mr_add_grey").removeClass("mr_up_grey").addClass("mr_addup_cel").children("em").text("取消"));else{jt.SetTitle(),initTitlePosition(),$("#upCustomForm").addClass("dn"),U(),$(this).removeClass("mr_up_grey").removeClass("mr_add_grey").removeClass("mr_addup_cel").children("em").text("编辑"),X="",jt.obj.find(".custom_list").removeClass("dn"),Q=!0;var _=$(".mr_content_cus").text();""==$.trim(_)&&$("#customBlock .mr_empty_add").show()}}),$("#upCustomForm .mr_cancel").bind("click",function(){jt.SetTitle(),jt.UpCancel()}),$("#upCustomForm").submit(function(){J.sync()}).validate({rules:{titleName:{required:!0,rangeLenStr:[0,10]},editorValue:{required:!0,ueditorLength:[2,1600]}},messages:{titleName:{required:"必填",rangeLenStr:"请输入20个字符以内的标题"},editorValue:{required:"必填",ueditorLength:"请输入2-1600字符的有效内容"}},errorPlacement:function(a,c){"customCon"==c.attr("id")?$(c).parent().after(a):c.is("textarea")?$(c).parent().find(".wrap_editor").after(a):a.insertAfter($(c).parent())},submitHandler:function(a){var c=globals.token,h=globals.resumeId,_=$("#customId").val(),g=$('input[name="titleName"]',a).val(),v=J.getContent().replace(/<(?!ol|li|ul|p|\/ol|\/li|\/ul|\/p)[^>]*>/g,"").replace(/<([a-z][a-z0-9]*)[^>]*?(\/?)>/gi,"<$1$2>").replace(/&nbsp;/gi,"");$(a).find(":submit").val("保存中...").attr("disabled",!0),$.ajax({url:ctx+"/userDefine/titleSave.json",type:"post",data:{id:h,defineId:_,titleName:g,titleContent:v,resubmitToken:c},dataType:"json"}).done(function(c){if(c.success){globals.hasUserDefines=!0,globals.token=c.resubmitToken,updateResumeTime(c.content.refreshTime),$(".mr_cancel",a).trigger("click"),$("#customBlock .mr_moudle_content .mr_empty_add").hide(),U(),X="",Q=!0,jt.obj.find(".mr_head_r").removeClass("mr_up_grey").removeClass("mr_add_grey").removeClass("mr_addup_cel").children("em").text("编辑");var h=$('input[name="titleName"]',a).val();$("#customCon").val(),$("#customBlock .cust_title span").text(h),$("#upCustomForm").addClass("dn");var _=c.content.userDefine,g="";g+='<input id="customTitleName" type="hidden" value="'+_.titleName+'" />',g+='<input id="customId" type="hidden" value="'+_.id+'" />',g+='<div class="custom_list" data-id="'+_.id+'">'+_.titleContent+"</div>",$(".mr_content_cus").html(g),initTitlePosition()}else $(a).find(".wrap_editor").after('<span for="ueditor_textarea_editorValue" class="error">'+c.msg+"</span>");$(a).find(":submit").val("保 存").attr("disabled",!1)})}}),$("#upCustomForm input[name='titleName']").keyup(function(){});try{myresumeCommon.utils.inputerListener($("#upCustomForm input[name='titleName']"),function(a){for(var c=a.length,h=0,_=a,i=0;c>i;i++){a.charCodeAt(i)<27||a.charCodeAt(i)>126?h+=2:h++;var g=$("#titleName");if(h>20){_=a.substring(0,i),g.val(_);break}}$("#customBlock .cust_title span").text(""==_?"自定义标题":_);var v=parseInt($("#customBlock .cust_title").width())/2;$("#customBlock .cust_title").css("margin-left",.7*-v)})}catch(e){}var Tt=function(){var a={upload:0,online:1},c=a.upload,h={edit:"添加",cancel:"取消"},_={normal:0,edit:1},g=_.normal,v={editcancel:"mr_addup_cel"},b={url:"www.example.com",previewText:"<p>这里是你的作品描述</p>"},w=$("#worksShow"),y=w.find(".mr_head_r"),k=y.find("em"),C=w.find(".mr_moudle_content"),S=C.find(".mr_worksshow_forms"),j=C.find("#addWorksShowUploadForm"),T=C.find("#addWorksShowOnlineForm"),P=C.find(".mr_work_online"),E=C.find(".mr_work_upload"),z=C.find(".mr_cancel"),I=C.find(".mr_worksshow_forms .mr_save"),N=C.find(".mr_empty_add"),F=T.find("#workOnlineUrl"),M=T.find(".mr_self_sitelink"),R=T.find(".mr_wo_preview"),O=j.find("#worksshowUp");O.click(function(){$(this).blur()});var D,A=j.find("#worksshowUpShow"),L=j.find("#workUploadTitle"),W=function(){return P.find(".mr_wo_show").length+E.find(".mr_wu_show").length},B=function(){C.find(".mr_worksshow_tab span").bind("click",function(){var h=$(this);h.hasClass("selected")||(S.find("span.error").hide(),h.hasClass("mr_wst_uponline")?(j.hide(),T.show(),c=a.online):(j.show(),T.hide(),c=a.upload))})},Y=null,V=null,Z=function(){""==X&&(R.html(b.previewText),M.html(b.url),k.text(h.cancel),y.addClass(v.editcancel),A.css({width:"0",height:"0"}),N.hide(),Y?Y.setContent(""):(Y=UE.getEditor("ueditor_adduploadImage"),Y.addListener("ready",function(){$("#ueditor_adduploadImage").bind("contextmenu",function(){return!1}),Y.setContent(""),Y.on("contextmenu",function(){return!0})})),V?V.setContent(""):(V=UE.getEditor("ueditor_addonlineImage"),V.addListener("ready",function(){$("#ueditor_addonlineImage").bind("contextmenu",function(){return!1}),V.setContent(""),V.on("contextmenu",function(){return!0})})),st(F,M,!0),ot(R,!0),Y.addListener("keyup",function(){this.sync(),j.find("textarea").valid()}),j.submit(function(){Y.sync()}).validate({rules:{workPicHidden:{required:!0},workTitle:{required:!1,maxlenStr:50},editorValue:{required:!1,ueditorLength:[0,1e3]}},messages:{workPicHidden:{required:"请选择要上传的图片"},workTitle:{required:"请输入作品标题",maxlenStr:"请输入有效的作品标题（100字符以内）"},editorValue:{required:"请描述你的作品",ueditorLength:"请输入1000字符以内的描述"}},errorPlacement:function(a,c){"button"==c.attr("type")?a.appendTo($(c).parent()):c.is("textarea")?$(c).parent().find(".wrap_editor").after(a):a.insertAfter($(c).parent())}}),V.addListener("keyup",function(){this.sync(),T.find("textarea").valid()}),T.submit(function(){V.sync()}).validate({rules:{url:{required:!0,maxlenStr:500,checkUrl:!0},editorValue:{required:!0,ueditorLength:[0,200]}},messages:{url:{required:"请输入在线地址",maxlenStr:"请输入1000字符以内的网址",checkUrl:"请输入有效的在线地址"},editorValue:{required:"请描述你的作品",ueditorLength:"请输入200字符以内的描述"}},errorPlacement:function(a,c){"button"==c.attr("type")?a.appendTo($(c).parent()):a.insertAfter(c.is("textarea")?c.parent().find(".wrap_editor"):$(c).parent())}}),S.find(".up").removeClass("up"),S.show(),g=_.edit,X=c==a.upload?"addWorksShowUploadForm":"addWorksShowOnlineForm",Q=!1,H())},G=function(){k.text(h.edit),y.removeClass(v.editcancel),S.hide(),!W()&&N.show(),g=_.normal,X="",Q=!0,U()},K=function(){nt(),g==_.normal?Z():G()},et=function(){return{id:globals.resumeId,wsid:"",url:"",workName:"",imageUrl:"",workTitle:"",workDescribe:""}},tt=function(a){var c=a&&a.content&&a.content.workShows||[],h={online:"",upload:""};$.each(c,function(a,c){c.url&&(h.online+=myresumeCommon.utils.strFormat(myresumeCommon.templates.workShowOnline,{type:"online",id:c.id,href:c.url,desc:c.workName,ahref:~c.url.indexOf("http://")||~c.url.indexOf("https://")?c.url:"http://"+c.url})),c.imageUrl&&(h.upload+=myresumeCommon.utils.strFormat(myresumeCommon.templates.workShowUpload,{type:"upload",id:c.id,imgsrc:c.cutImageUrl,imageUrl:c.imageUrl,desc:c.workDescribe,title:c.workTitle,hasTitle:""!=c.workTitle?"":"dn"}))}),P.html(h.online),E.html(h.upload);var _=$(".mr_wu_con .mr_content_l");_.each(function(){var a=$(this);a.hasClass("dn")&&""!=$.trim(a.parent().next(".mr_wu_con_m").text())&&(a.parent().addClass("step_aside"),a.parent().next(".mr_wu_con_m").addClass("step_content"))}),c.length?N.hide():N.show(),globals.hasWorkShows=c.length?!0:!1,updateResumeTime(a.content.refreshTime),""!=oMoudleScore.workShowScore&&(amountScore-=oMoudleScore.workShowScore),oMoudleScore.workShowScore="";var rt=a.content.infoCompleteStatus.score,g=parseInt($.trim($(".mr_bfb").text())),v=amountScore-g+rt;updateRatioRM(rt,v)},it=function(h){w.find(":submit").val("保存中...").attr("disabled",!0);var _=et();if(c==a.online){var g=F.val();myresumeCommon.utils.addHttpPrefix("",g,function(a){g=""==g?"":a}),_.url=$.trim(g),_.workName=V.getContent()}else c==a.upload&&(_.workTitle=$.trim(L.val()),_.workDescribe=Y.getContent(),_.imageUrl=$.trim(A.attr("data-origin-src")),_.cutImageUrl=$.trim(A.attr("src")));myresumeCommon.utils.requester({url:myresumeCommon.requestTargets.workShowSave,data:_},function(a){if(w.find(":submit").val("保 存").attr("disabled",!1),a.success){tt(a),y.trigger("click");var c=$("#worksshowUpShow");c.attr("src","").attr("data-origin-src","").css({width:0,height:0}),c.prev().prev().removeClass("up"),$("#workUploadTitle").val(""),$("#workImagesDescContent").val(""),h==T&&$("#workOnlineUrl").val(""),c.parent().find(".work-pic-hidden").val("")}else w.find(".wrap_editor").after('<span for="ueditor_textarea_editorValue" class="error">'+a.msg+"</span>")})},nt=function(){S.find("span.error").hide()},at=function(){var h=c==a.upload?j:T;return h.valid()&&it(h),!1},st=function(a,c,h){var _=function(){var _=$.trim(a.val());h&&myresumeCommon.utils.addHttpPrefix("",_,function(a){_=""==_?"":a});var g=c[0].tagName.toLowerCase();"a"==g?(0==_.length,c.attr("href",_),c.html(_)):(0==_.length&&(_=b.url),c.html(_))};a.bind("keyup",_).bind("blur",_)},ot=function(a,c){return c?void V.on("keyup",function(){a.html($.trim(V.getContent()))}):void J.on("keyup",function(){a.html($.trim(J.getContent()))})},lt=function(a){if(""==X){X="addWorksShowOnlineFormUpdate",Q=!1,H();var c=a.next(".addWorksShowOnlineFormUpdate");c.find(".workOnlineUrlUpdate").val(a.find(".mr_self_sitelink").attr("href"));var h="ueditor_"+a.attr("data-id");J=null,J=UE.getEditor(h),J.isReady&&J.setContent(a.find(".mr_wo_preview").html()),J.addListener("ready",function(){J.setContent(a.find(".mr_wo_preview").html()),J.on("contextmenu",function(){return!0})}),c.show(),a.hide(),J.addListener("keyup",function(){this.sync(),c.find("textarea").valid()});var _=c.find(".workOnlineUrlUpdate"),g=a.attr("data-id"),v=c.find(".mr_self_sitelink"),b=c.find(".mr_wo_preview");st(_,v,!0),ot(b);var w=c.find(".mr_save"),y=c.find(".mr_cancel"),k=c.find(".mr_del_ok");c.submit(function(){J.sync()}).validate({rules:{url:{required:!0,maxlenStr:500,checkUrl:!0},editorValue:{required:!0,ueditorLength:[0,200]}},messages:{url:{required:"请输入在线地址",maxlenStr:"请输入1000字符以内的网址",checkUrl:"请输入有效的在线地址"},editorValue:{required:"请描述你的作品",ueditorLength:"请输入200字符以内的描述"}},errorPlacement:function(a,c){"button"==c.attr("type")?a.appendTo($(c).parent()):a.insertAfter(c.is("textarea")?c.parent().find(".wrap_editor"):$(c).parent())},submitHandler:function(){w.val("保存中...").attr("disabled",!0);var a=et();a.url=$.trim(_.val()),a.workName=J.getContent().replace(/<(?!ol|li|ul|p|\/ol|\/li|\/ul|\/p)[^>]*>/g,"").replace(/<([a-z][a-z0-9]*)[^>]*?(\/?)>/gi,"<$1$2>").replace(/&nbsp;/gi,""),a.wsid=g,myresumeCommon.utils.requester({url:myresumeCommon.requestTargets.workShowSave,data:a},function(a){w.val("保 存").attr("disabled",!1),a.success?(tt(a),y.trigger("click"),U(),X="",Q=!0,UE.delEditor(h)):c.find(".wrap_editor").after('<span for="ueditor_textarea_editorValue" class="error">'+a.msg+"</span>")})}}),y.bind("click",function(){a.show(),c.hide(),X="",Q=!0,U()}),k.bind("click",function(){k.text("删除中...").attr("disabled",!0);var a=et();return a.id=g,myresumeCommon.utils.requester({url:myresumeCommon.requestTargets.workShowDel,data:a},function(a){tt(a),y.trigger("click"),k.text("删 除").attr("disabled",!1),""!=oMoudleScore.workShowScore&&(amountScore-=oMoudleScore.workShowScore),oMoudleScore.workShowScore="";var rt=a.content.infoCompleteStatus.score,c=parseInt($.trim($(".mr_bfb").text())),h=amountScore-c+rt;amountScore=h,updateRatioRM(rt,h),U(),X="",Q=!0}),!1})}},dt=function(a){if(""==X){X="addWorksShowUploadFormUpdate",Q=!1,H();var c=a.next(".addWorksShowUploadFormUpdate"),h="ueditor_"+a.attr("data-id");J=null,J=UE.getEditor(h),J.isReady&&J.setContent(a.find(".mr_wu_con_m").html()),J.addListener("ready",function(){J.setContent(a.find(".mr_wu_con_m").html()),J.on("contextmenu",function(){return!0})}),J.addListener("keyup",function(){this.sync(),c.find("textarea").valid()}),c.show(),a.hide();var _=c.find(".workUploadTitleUpdate"),g=a.attr("data-id"),v=$.trim(a.find(".mr_wu_t img").attr("src")),b=$.trim(a.find(".mr_wu_t img").attr("data-origin-src")),w=$.trim(a.find(".mr_work_title").text());w=w.substring(2,w.length-2);var y=($.trim(a.find(".mr_wu_con_m").html()),c.find(".worksshow_img"));y.attr("data-origin-src",b);var k=y.prev().prev();k.addClass("up"),""!=v?y.css({width:"100%",height:"100%"}).attr("src",v):(logoSrc="",k.removeClass("up"),y.css({width:0,height:0}).attr("src",v)),_.val(w);var C=c.find(".mr_save"),S=c.find(".mr_cancel"),j=c.find(".mr_del_ok");c.submit(function(){J.sync()}).validate({rules:{workPicHidden:{required:!0},workTitle:{required:!1,maxlenStr:50},editorValue:{required:!1,ueditorLength:[0,1e3]}},messages:{workPicHidden:{required:"请选择要上传的图片"},workTitle:{required:"请输入作品标题",maxlenStr:"请输入有效的作品标题（100字符以内）"},editorValue:{required:"请描述你的作品",ueditorLength:"请输入1000字符以内的描述"}},errorPlacement:function(a,c){"button"==c.attr("type")?a.appendTo($(c).parent()):c.is("textarea")?$(c).parent().find(".wrap_editor").after(a):a.insertAfter($(c).parent())},submitHandler:function(){C.val("保存中...").attr("disabled",!0);var a=et();a.wsid=g,a.workTitle=$.trim(_.val()),a.workDescribe=J.getContent().replace(/<(?!ol|li|ul|p|\/ol|\/li|\/ul|\/p)[^>]*>/g,"").replace(/<([a-z][a-z0-9]*)[^>]*?(\/?)>/gi,"<$1$2>").replace(/&nbsp;/gi,""),a.imageUrl=$.trim(y.attr("data-origin-src")),a.cutImageUrl=$.trim(y.attr("src")),myresumeCommon.utils.requester({url:myresumeCommon.requestTargets.workShowSave,data:a},function(a){C.val("保 存").attr("disabled",!1),a.success?(tt(a),S.trigger("click"),U(),X="",Q=!0,UE.delEditor(h)):c.find(".wrap_editor").after('<span for="ueditor_textarea_editorValue" class="error">'+a.msg+"</span>")})}}),S.bind("click",function(){a.show(),c.hide(),X="",Q=!0,U()}),j.bind("click",function(){j.text("删除中...").attr("disabled",!0);var a=et();return a.id=g,myresumeCommon.utils.requester({url:myresumeCommon.requestTargets.workShowDel,data:a},function(a){tt(a),S.trigger("click"),j.text("删 除").attr("disabled",!1),U(),X="",Q=!0}),!1})}},ct=function(){var a=$(this),c=a.attr("data-type");"online"==c?lt(a.parents(".mr_wo_show")):dt(a.parents(".mr_wu_show"))},mt=function(){P.html(""),E.html(""),W()?N.hide():N.show()},ut=function(){y.bind("click",K),z.bind("click",K),I.bind("click",at),B(),N.click(function(){y.trigger("click")}),C.delegate(".mr_wo_show .mr_edit_text, .mr_wu_show .mr_edit_text","click",ct),window.setTimeout(function(){},3e3)},ht=$("#cropimageContainer"),pt=ht.find("#cropzoom_container"),ft=ht.find("#cropimageEnsure"),_t=ht.find("#cropimageRestore");ft.bind("click",function(){$(".add_worksshow_form").find(":submit").val("上传中").attr("disabled",!0),D.send(ctx+myresumeCommon.requestTargets.workCut,"POST",{resubmitToken:globals.token},function(a){$(".worksshowUpUpdateShow").prev().prev().prev().removeClass("active").addClass("up"),$(".worksshowUpUpdateShow").parent().find(".work-pic-hidden").val(a.content),$(".worksshowUpUpdateShow").attr("src",ctx+"/"+a.content).css({width:"100%",height:"100%"}),D.showImage.prev().prev().prev().removeClass("active").addClass("up"),D.showImage.parent().find(".work-pic-hidden").val(a.content),D.showImage.attr("src",ctx+"/"+a.content).css({width:"100%",height:"100%"}),$.colorbox.close(),D.showImage=null,null!=a.resubmitToken&&""!=a.resubmitToken&&(globals.token=a.resubmitToken),$(".add_worksshow_form").find(":submit").val("保存").attr("disabled",!1),D.restore()})}),_t.bind("click",function(){$("#worksShow input[name='workPicHidden']").val(""),D.restore(),$.colorbox.close()});var gt=function(a,c){var h=$("#"+c+"Show"),_=ctx+"/"+a.uploadPath;h.parent().parent().find(".error").hide(),h.attr("data-origin-src",_),$.colorbox({inline:!0,href:ht,title:"选择裁剪区域"}),myresumeCommon.config.cutImage.image.source=_,myresumeCommon.config.cutImage.image.width=a.srcImageW,myresumeCommon.config.cutImage.image.height=a.srcImageH,myresumeCommon.config.cutImage.selector.w=myresumeCommon.config.workShowSelector.width,myresumeCommon.config.cutImage.selector.h=myresumeCommon.config.workShowSelector.height,D=pt.cropzoom(myresumeCommon.config.cutImage),D.showImage=h},vt=function(){};return{init:ut,addUploadSucc:gt,addUploadFail:vt,clear:mt}}();window.worksShowOperator=Tt,Tt.init(),$("#worksShow").delegate(".mr_worksshow_upimage","mouseover",function(){var a=$(this).find("div");a.hasClass("up")||a.addClass("active")}),$("#worksShow").delegate(".mr_worksshow_upimage","mouseout",function(){var a=$(this).find("div");a.hasClass("up")||a.removeClass("active")});var Pt=function(){var a={edit:"编辑",cancel:"取消"},c={normal:0,edit:1},h={skillplanstart:10,skillplanend:420,skillcirclestart:122,skillcircleend:532,allwidth:410},_=c.normal,g={editcancel:"mr_addup_cel"},v={inbk:"inline-block"},b={defaultText:"了解",hashDefine:{"了解":{min:0,max:84},"熟悉":{min:84,max:168},"掌握":{min:168,max:252},"精通":{min:252,max:336},"专家":{min:336,max:450}}},w={skillTitle:"输入技能名称"},y=5,k=function(){return _},C=function(a){var c=b.defaultText;for(var h in b.hashDefine)if(b.hashDefine[h].min<a&&a<=b.hashDefine[h].max){c=h;break}return c},S=$("#skillsAssess"),j=S.find(".mr_moudle_content"),T=j.find(".mr_skill_con"),P=j.find(".me_skill_list"),E=S.find(".mr_head_r"),z=E.find("em"),I=S.find(".mr_skill_delete"),N=S.find(".mr_skill_circle"),F=S.find(".mr_skill_level"),M=S.find(".mr_empty_add"),R=S.find(".mr_skill_add"),O=S.find(".mr_skill_add_button"),D=S.find(".mr_skill_opera"),A=D.find(".mr_save"),L=D.find(".mr_cancel"),W=function(){if(""==X){z.text(a.cancel),E.addClass(g.editcancel),B(!0),I=P.find(".mr_skill_delete"),N=P.find(".mr_skill_circle"),F=P.find(".mr_skill_level"),I.css("display",v.inbk),N.css("display",v.inbk),F.hide(),R.show(),nt(),_=c.edit;var h=$(".mr_skill_name");"输入技能名称"==$.trim(h.text())&&h.css("font-style","italic"),X="updateSkill",Q=!1,H(),j.addClass("mr_skilledit_background")}},J=function(){z.text(a.edit),E.removeClass(g.editcancel),B(),I=P.find(".mr_skill_delete"),N=P.find(".mr_skill_circle"),F=P.find(".mr_skill_level"),I.hide(),N.hide(),F.show(),R.hide(),_=c.normal,X="",Q=!0,U(),j.removeClass("mr_skilledit_background")},B=function(a){P.children('.mr_skill_con[data-del-flag!="1"]').length||(a?(M.hide(),P.html(myresumeCommon.utils.strFormat(myresumeCommon.templates.skillItem,{skillPercent:"10",id:"",skillName:w.skillTitle,masterLevel:"了解"})),P.children("div").attr("data-add-flag","1")):(M.show(),D.hide()))},Y=function(){V(),_==c.normal?W():J()},V=function(){j.find("div[data-add-flag=1]").remove(),P.children("div[data-del-flag=1]").show().removeAttr("data-del-flag"),st(j.find("div[data-grade-edit=1]")),j.find(".mr_skill_con").each(function(){var a=$(this).find(".mr_skill_name");a.text(a.attr("title"))})},Z=function(){var a=[];return P.children("div[data-del-flag=1][data-add-flag!=1]").each(function(c,h){a.push(h.getAttribute("data-skill-id"))}),a},G=function(){var a,c=40,h=S.find(".mr_skill_con"),_=!1,g=0;return $.each(h,function(c){var h=$(this);if(1!=h.attr("data-del-flag")){var v=$.trim(h.find(".mr_skill_name").text());if(""==v||~v.indexOf(w.skillTitle))return a=c,_=!0,!1;var b=getStrLen(v);b>g&&(g=b,a=c)}}),_?(void 0!=a&&$(h[a]).find(".mr_skill_name").trigger("click"),myresumeCommon.utils.errorTips(S.find(".error"),"必填"),!1):g>c?(void 0!=a&&$(h[a]).find(".mr_skill_name").trigger("click"),myresumeCommon.utils.errorTips(S.find(".error"),"请输入20个字符以内的技能名称"),!1):!0},K=function(){if(G()){var a=Z(),c=it();return S.find(":submit").val("保存中...").attr("disabled",!0),a.length?void myresumeCommon.utils.requester({url:myresumeCommon.requestTargets.skillDel,data:{skillId:a.join(",")}},function(){et(c)}):void et(c)}},et=function(a){var c={skillJson:JSON.stringify(a),resumeId:globals.resumeId};myresumeCommon.utils.requester({url:myresumeCommon.requestTargets.skillSave,data:c},function(a){tt(a),Y(),S.find(":submit").val("保 存").attr("disabled",!1)})},tt=function(a){var c=a&&a.content&&a.content.skillEvaluates||[],h="";$.each(c,function(a,c){h+=myresumeCommon.utils.strFormat(myresumeCommon.templates.skillItem,c)}),P.html(h),c.length?M.hide():M.show(),st(P.children()),globals.hasSkillEvaluates=c.length?!0:!1,updateResumeTime(a.content.refreshTime),""!=oMoudleScore.skillScore&&(amountScore-=oMoudleScore.skillScore),oMoudleScore.skillScore="";var rt=a.content.infoCompleteStatus.score,_=parseInt($.trim($(".mr_bfb").text())),g=amountScore-_+rt;updateRatioRM(rt,g)},it=function(){var a=P.find(".mr_skill_con"),c=ot(a);return c},nt=function(){P.children('.mr_skill_con[data-del-flag!="1"]').length>=y?O.hide():O.show()},at=function(a){a.attr("data-add-flag","1"),a.removeAttr("data-del-flag"),a.find(".mr_skill_plan em").width(h.skillplanstart),a.find(".mr_skill_circle").css("left",h.skillcirclestart).find("em").text(b.defaultText),a.removeAttr("data-grade").removeAttr("data-grade-edit").removeAttr("data-skill-id"),a.find(".mr_skill_name").attr("title","").css("font-style","italic"),a.show(),nt()},st=function(a){a=a||T,a.each(function(a,c){var _=h.allwidth*(c.getAttribute("data-grade")/100),g=$(c),v=C(_);g.find(".mr_skill_plan em").width(h.skillplanstart+_),g.find(".mr_skill_circle").css("left",h.skillcirclestart+_+"px").find("em").text(v),g.find(".mr_skill_level").text(v)})},ot=function(a){var c=[];return a=a||T,a.each(function(a,_){var g=$(_);if(!~$.trim(g.find(".mr_skill_name").text()).indexOf(w.skillTitle)&&!g.attr("data-del-flag")){var v={},b=g.find(".mr_skill_plan em").width()-h.skillplanstart,y=parseInt(b/h.allwidth*100);v.id=g.attr("data-skill-id")||"",v.skillName=$.trim(g.find(".mr_skill_name").text()),v.masterLevel=$.trim(g.find(".mr_skill_circle").text()),v.skillPercent=0>+y?0:y,c.push(v)}}),c},lt=function(a){$(this).parent(".mr_skill_con").attr("data-del-flag",1).hide(),nt(),a.stopPropagation()},dt=function(){P.html(""),M.show()},ct=function(){st(),E.bind("click",Y),L.bind("click",Y),M.bind("click",Y),A.bind("click",K),S.delegate(".mr_skill_delete","click",lt)};return{init:ct,clear:dt,initWidths:h,rangeDefine:b,onAddSkill:at,defaultsText:w,getState:k,toggleOpenOnclick:Y}}();Pt.init(),$(".mr_created").delegate(".mr_click_flag","click",function(e){e.stopPropagation(),$(".xl_list").hide(),$(".select_color").removeClass("select_color"),$(this).addClass("select_color"),dt&&dt.hide(),mt&&mt.hide(),ct&&ct.hide(),xt&&xt.hide(),yt&&yt.hide(),bt&&bt.hide(),$t&&$t.hide(),pt&&pt.hide(),ft&&ft.hide(),ut&&ut.hide(),ht&&ht.hide(),xt&&xt.hide(),yt&&yt.hide()}),$("#skillsAssess").delegate(".mr_skill_circle","mousedown",function(){var a=$(this),c=a.siblings(".mr_skill_plan").find("em"),h=a.parent(".mr_skill_con"),_=a.siblings(".mr_skill_plan");return a.parent().attr("data-grade-edit","1"),$(document).on("mousemove",function(g){var e=g||event,l=e.clientX-h.offset().left-122-a.width()/2;0>l?l=0:l>_.width()-a.width()/2&&(l=_.width()-a.width()/2),a.css({left:122+l+"px"}),c.width(l+a.width()/2),c.width()<=84?a.find("em").text("了解"):c.width()>84&&c.width()<=168?a.find("em").text("熟悉"):c.width()>168&&c.width()<=252?a.find("em").text("掌握"):c.width()>252&&c.width()<=336?a.find("em").text("精通"):c.width()>336&&a.find("em").text("专家")
}),$(document).on("mouseup",function(){$(this).off("mousemove"),$(this).off("mouseup")}),!1}),$("#skillsAssess").delegate(".mr_skill_name","click",function(a){if(Pt.getState()){$text=$(this).text();var c=$('<input type="text" name="skillname" />');$(this).empty(),c.appendTo($(this)),c.val($text),c.css({width:"90px",height:"22px","font-size":"14px",border:"none",outline:"none",margin:"0px",padding:"0 5px",border:"1px solid #00b88d","line-height":"22px"}),c.on("click",function(a){a.stopPropagation()}),c.on("focus",function(){var a=$.trim(c.val());""==a||a==Pt.defaultsText.skillTitle?c.css("color","silver"):c.css("color","#000"),c.select()}),c.on("blur",function(){var a=$.trim(c.val())||Pt.defaultsText.skillTitle,h=c.closest(".mr_skill_name");h.text(a),a==Pt.defaultsText.skillTitle?h.css("font-style","italic"):h.css("font-style","normal"),c.remove()}),c.on("keyup",function(){$.trim(c.val()),c.css("color","#000")}),c.focus(),a.stopPropagation()}});var Et,zt=(navigator.appName,navigator.appVersion),It=zt.split(";");It.length>1&&(Et=It[1].replace(/[ ]/g,"")),$(".mr_skill_add_button span").on("click",function(a){var c=$(".mr_skill_con"),h=$(".mr_skill_con").eq(c.length-1),_=h.clone(!0);_.find(".mr_skill_name").text(Pt.defaultsText.skillTitle),h.after(_),Pt.onAddSkill(_),a.stopPropagation()}),$(".mr_set_default").bind("click",function(e){e.stopPropagation();var a=$(this),c=a.find(".set_default_wrap"),h=a.find(".xl_list");c.hasClass("active")?(c.removeClass("active"),h.hide()):(c.addClass("active"),h.show())}),$(".ul_resume_type li").bind("click",function(e){e.stopPropagation();var a=$(this),c=a.parent().parent();$.ajax({url:ctx+"/mycenter/resume/setDefaultResume.json",type:"POST",data:{type:a.attr("data-type")}}).done(function(h){h.success?(c.hide(),$("#default_resume").val(a.text()),$(".set_default_wrap").removeClass("active")):alert(h.msg)})})});var uploadFlag=1;window.setTimeout(function(){handleFrames()},7e3);var openFlag=!0,toggleHandler=function(a){var a=a,c=$(a).find("input");c.click(function(){openFlag&&(openFlag=!1,"3"!=globals.isOpenResume&&"2"!=globals.isOpenResume&&(c.eq(1).is(":checked")?switchResumeStatus(0,a,c):($.colorbox({inline:!0,href:$("div#closeplus"),title:"提示"}),openFlag=!0)))}),$(a).hover(function(){$(".openresume_tip").toggleClass("dn")},function(){$(".openresume_tip").toggleClass("dn")}),$("#openResumeStatus .btn").click(function(){switchResumeStatus(0,a,c)}),$("#closeplus a").click(function(){switchResumeStatus(1,a,c)})};$(document).ready(function(){var a=$(".openresume_tip");"3"==globals.isOpenResume&&(a.hide(),$(".firstset").show()),$(".toggle").each(function(a,c){toggleHandler(c)}),$(".openresume_tip i").bind("click",function(e){e.stopPropagation,$(this).parent().hide()}),$(".toggle").mouseover(function(){switch(globals.isOpenResume){case"0":$(".firstset").show();break;case"2":$(".unopen").show();break;case"3":$(".firstset").show(),$(".unopen").hide()}})}),$(".firstset a").on("click",function(){$.ajax({url:ctx+"/mycenter/openMyResume.json",type:"POST",data:{openStatus:0},dataType:"json"}).done(function(){window.location.href="http://www.lagou.com/user/resumePrivacy.html"})}),$(function(){$(".lgad_jsonp").each(function(i,e){var a=$(e).attr("key"),c=$("#keyword").val();$.getJSON("http://ggservice.lagou.com/promotionSpace/data?callback=?",{spaceKey:a,keyword:c},function(a){if(a.success&&a.data.promotionAds.length>0){var c=(a.data.promotionAds[0].img1||"").replace(/^https?\:\/\/www\.lagou\.com/i,GLOBAL_DOMAIN.lgsctx),h=a.data.promotionAds[0].width||a.data.width,_=a.data.promotionAds[0].height||a.data.height,g=a.data.promotionAds[0].link1,v=a.data.tgCode,b=a.data.promotionAds[0].id||"idnull",w=$('<img src="'+c+'" />');if(!c)return;$(e).append(w),h&&w.width(h),_&&w.height(_),g&&(v?(w.wrap('<a href="'+g+'" data-lg-tj-id="'+v+'" data-lg-tj-no="idnull" data-lg-tj-cid="'+b+'" target="_blank" rel="nofollow"></a>'),$(e).hasClass("ad_exposure")&&exposureStatistics([getTjId(v,"idnull",b)])):w.wrap('<a href="'+g+'" target="_blank" rel="nofollow"></a>'))}else $(e).remove(),$(window).trigger("resize")})}),$("div[key^=SPACE_KEY_]").size()>0&&$.ajax({url:"http://ggservice.lagou.com/static/main-mix.js",dataType:"script",cache:!0}),pushStatistics()});